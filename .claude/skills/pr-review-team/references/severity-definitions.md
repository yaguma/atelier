# 重要度定義（詳細版）

## 重要度レベル

### Critical - 即時修正必須

マージ前に必ず修正が必要な問題。以下のカテゴリに分類する。

#### C1: バグ・ランタイムエラー
- 実行時にクラッシュする
- NullPointerException / undefined アクセス
- 無限ループの可能性
- 到達不能コードによる機能欠損

#### C2: セキュリティ脆弱性
- XSS（ユーザー入力の未サニタイズ）
- 機密情報のハードコード（APIキー, パスワード）
- 入力検証の欠如（バッファオーバーフロー相当）
- eval() / Function() の使用

#### C3: データ整合性
- セーブデータ破損のリスク
- 状態管理の不整合（フェーズ遷移違反）
- マスターデータ参照の不一致（存在しないIDの参照）

#### C4: メモリリーク
- EventBus購読の解除忘れ
- Phaser GameObjectの未破棄
- Tween/タイマーの未停止
- グローバル参照の蓄積

#### C5: ゲームロジックの誤り
- 報酬計算の明確なバグ
- 品質計算の論理エラー
- ゲームバランスを著しく崩す計算ミス

---

### Warning - 修正を強く推奨

マージは可能だが、修正しないと将来的に問題になる可能性が高いもの。

#### W1: アーキテクチャ違反
- Feature-Based Architecture 未準拠
- Functional Core内での副作用
- Imperative Shell内の複雑なビジネスロジック
- 循環依存の発生

#### W2: 型安全性の欠如
- `any` 型の使用
- 不適切な `as` キャスト
- 戻り値型の未指定
- 型ガードなしでのunknown使用

#### W3: テスト品質
- 新機能にテストなし
- エッジケース未カバー
- テストの決定性の欠如
- モックの過剰使用

#### W4: パフォーマンス懸念
- update()内での不適切な処理
- 不要なオブジェクト生成
- 非効率なアルゴリズム
- リソースの過剰使用

#### W5: コーディング規約違反
- 命名規則の不統一
- ファイルサイズ超過（300行以上）
- マジックナンバーの使用
- 深いネスト（3階層以上）

---

### Info - 任意対応

改善すると良いが、現状でも機能的に問題ないもの。

#### I1: パターン改善
- より適切なデザインパターンの提案
- 既存ユーティリティの再利用提案
- より簡潔な実装方法の紹介

#### I2: ドキュメント
- コメント追加の推奨
- JSDocの追加提案
- README更新の推奨

#### I3: コードスタイル
- 一貫性の軽微な改善
- インポート順序の調整
- 変数名の軽微な改善提案

---

## 判定ガイドライン

### 迷った場合の基準

- 「本番で問題が起きるか？」→ Yes なら Critical
- 「3ヶ月後に技術的負債になるか？」→ Yes なら Warning
- 「あった方がベターか？」→ Yes なら Info

### 過剰判定の防止

- 根拠が示せない指摘はCriticalにしない
- 好みの問題をWarningにしない
- 既存コードの問題を新規コードの指摘にしない
