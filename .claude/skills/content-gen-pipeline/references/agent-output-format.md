# エージェント出力フォーマット

## 概要

各エージェントはPipeline Leadへの報告時にこのフォーマットに従う。
SendMessageで送信する際、以下の構造化されたフォーマットで結果を報告する。

---

## 生成エージェントの出力フォーマット

```markdown
# [エージェント名] Generation Report

## Summary
- 生成件数: N件
- 更新ファイル: file1.json, file2.json
- 使用IDレンジ: prefix_001 〜 prefix_NNN

## Generated Items

### 新規追加
| ID | 名前 | レアリティ | ランク | 補足 |
|----|------|-----------|--------|------|
| id_001 | 名前 | COMMON | G | - |
| id_002 | 名前 | UNCOMMON | F | - |

### 既存更新（あれば）
| ID | 変更内容 |
|----|---------|
| existing_id | 変更の説明 |

## Cross-References
- 他エージェントのデータを参照した箇所一覧
- 例: `recipe_new_001` は `mat_new_003` を必要素材として参照

## Notes
- 生成時に判断に迷った点
- 既存データとの整合性で注意が必要な点
```

---

## Validator Agentの出力フォーマット

```markdown
# Validation Report

## Summary
- 検証対象ファイル数: N
- 総データ件数: N
- 検出件数: Critical N件 / Warning N件 / Info N件

## Critical Issues

### [C-連番] タイトル
- **カテゴリ**: スキーマ違反 / 参照整合性 / ID重複
- **ファイル**: `path/to/file.json`
- **該当データ**: `{"id": "xxx", ...}`
- **問題**: 問題の詳細説明
- **修正案**: 具体的な修正方法

## Warning Issues

### [W-連番] タイトル
- **カテゴリ**: バランス偏り / 命名不統一 / 値の範囲超過
- **ファイル**: `path/to/file.json`
- **問題**: 問題の詳細説明
- **修正案**: 具体的な修正方法

## Info Issues

### [I-連番] タイトル
- **カテゴリ**: 改善提案 / 追加推奨
- **問題**: 提案の内容

## Statistics

### レアリティ分布
| レアリティ | カード | 素材 | アイテム |
|-----------|--------|------|---------|
| COMMON | N | N | N |
| UNCOMMON | N | N | N |
| RARE | N | N | N |
| EPIC | N | N | N |
| LEGENDARY | N | N | N |

### 属性分布
| 属性 | 素材数 |
|------|--------|
| FIRE | N |
| WATER | N |
| EARTH | N |
| WIND | N |
| GRASS | N |

### ランク別コンテンツ数
| ランク | 採取カード | レシピカード | 強化カード | 依頼 |
|--------|-----------|------------|-----------|------|
| G | N | N | N | N |
| F | N | N | N | N |
| ... | | | | |
```

---

## 注意事項

### 重要度の定義

| レベル | 定義 | 対応 |
|--------|------|------|
| **Critical** | データが壊れている、参照先が存在しない、ID重複 | 必ず修正 |
| **Warning** | バランス偏り、命名不統一、推奨値外 | 修正推奨 |
| **Info** | 改善提案、コンテンツ追加推奨 | 任意対応 |

### SendMessage時の注意

- メッセージは簡潔にまとめる（詳細は必要に応じて別メッセージで送信）
- Critical issueがある場合はサマリーの冒頭で明記する
- 生成完了後は必ず TaskUpdate でタスクを completed にする
