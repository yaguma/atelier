# GatheringService ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®šç¾©æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**ã‚¿ã‚¹ã‚¯ID**: TASK-0011
**è¦ä»¶å**: atelier-guild-rank
**æ©Ÿèƒ½å**: GatheringServiceï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ï¼‰
**å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«**: `docs/implements/atelier-guild-rank/TASK-0011/gathering-service-testcases.md`

---

## ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®æ¦‚è¦

GatheringServiceã¯ã€æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ‰ãƒ©ãƒ•ãƒˆå½¢å¼ã§ç´ æã‚’ç²å¾—ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠã™ã‚‹ã¨ã€ç´ æãƒ—ãƒ¼ãƒ«ã‹ã‚‰3ã¤ã®ç´ æãŒãƒ©ãƒ³ãƒ€ãƒ ã«æç¤ºã•ã‚Œã€ãã®ä¸­ã‹ã‚‰1ã¤ã‚’é¸ã‚“ã§ç²å¾—ã§ãã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã”ã¨ã«è¨­å®šã•ã‚ŒãŸæç¤ºå›æ•°ï¼ˆ2ã€œ5å›ï¼‰ã¾ã§ç¹°ã‚Šè¿”ã—å¯èƒ½ã§ã€æœ€çµ‚çš„ã«é¸æŠã—ãŸç´ æã®å€‹æ•°ã«å¿œã˜ãŸè¡Œå‹•ãƒã‚¤ãƒ³ãƒˆã‚³ã‚¹ãƒˆãŒè¨ˆç®—ã•ã‚Œã¾ã™ã€‚

### å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆ**: `docs/implements/atelier-guild-rank/TASK-0011/note.md`
- **è¦ä»¶å®šç¾©æ›¸**: `docs/implements/atelier-guild-rank/TASK-0011/gathering-service-requirements.md`
- **ã‚¿ã‚¹ã‚¯å®šç¾©**: `docs/tasks/atelier-guild-rank/phase-2/TASK-0011.md`
- **ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹è¨­è¨ˆ**: `docs/design/atelier-guild-rank/game-mechanics.md`
- **ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹è¨­è¨ˆ**: `docs/design/atelier-guild-rank/core-systems-core-services.md`

### ä½¿ç”¨ã™ã‚‹æŠ€è¡“ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

- **ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª**: TypeScript 5.x
  - **è¨€èªé¸æŠã®ç†ç”±**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¨™æº–è¨€èªã§ã‚ã‚Šã€å‹å®‰å…¨æ€§ãŒé«˜ã„ ğŸ”µ
  - **ãƒ†ã‚¹ãƒˆã«é©ã—ãŸæ©Ÿèƒ½**: å‹æ¨è«–ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã«ã‚ˆã‚‹å¥‘ç´„ã®æ˜ç¢ºåŒ– ğŸ”µ
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest 4.xï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼‰
  - **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é¸æŠã®ç†ç”±**: Viteç’°å¢ƒã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€é«˜é€Ÿãªå®Ÿè¡Œé€Ÿåº¦ ğŸ”µ
  - **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒ**: Node.jsç’°å¢ƒã§ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ ğŸ”µ
- ğŸ”µ ã“ã®å†…å®¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆã«æ˜è¨˜

---

## 1. æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆåŸºæœ¬çš„ãªå‹•ä½œï¼‰

### T-0011-01: ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–é–‹å§‹ï¼ˆåŸºæœ¬å‹•ä½œï¼‰

- **ãƒ†ã‚¹ãƒˆå**: startDraftGathering()ã§ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã•ã‚Œã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ã¦æ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã§ãã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: DraftSessionãŒç”Ÿæˆã•ã‚Œã€3ã¤ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæç¤ºã•ã‚Œã€æç¤ºå›æ•°ãŒè¨­å®šã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `card`: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ï¼ˆä¾‹: è¿‘ãã®æ£®ã€æç¤ºå›æ•°3å›ã€åŸºæœ¬ã‚³ã‚¹ãƒˆ0ï¼‰
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®åŸºæœ¬æƒ…å ±ï¼ˆæç¤ºå›æ•°ã€ç´ æãƒ—ãƒ¼ãƒ«ã€ãƒ¬ã‚¢å‡ºç¾ç‡ï¼‰ã«åŸºã¥ã„ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - DraftSessionãŒè¿”ã•ã‚Œã‚‹
  - `currentOptions`ã«3ã¤ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå«ã¾ã‚Œã‚‹
  - `maxRounds`ãŒæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®æç¤ºå›æ•°ï¼ˆ3å›ï¼‰ã«è¨­å®šã•ã‚Œã‚‹
  - `currentRound`ãŒ1ã«è¨­å®šã•ã‚Œã‚‹
  - `selectedMaterials`ãŒç©ºé…åˆ—
  - `isComplete`ãŒfalse
  - `GATHERING_STARTED`ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã‚‹
  - **æœŸå¾…çµæœã®ç†ç”±**: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®åŸºæœ¬æƒ…å ±ã«åŸºã¥ã„ã¦æ­£ã—ãã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã®é–‹å§‹å‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã®ä¸€æ„æ€§ã€ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ•°ã€æç¤ºå›æ•°ã®è¨­å®š ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-02: ç´ æé¸æŠï¼ˆåŸºæœ¬å‹•ä½œï¼‰

- **ãƒ†ã‚¹ãƒˆå**: selectMaterial()ã§ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰ç´ æã‚’é¸æŠã§ãã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: æç¤ºã•ã‚ŒãŸç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰1ã¤ã‚’é¸æŠã—ã€ç²å¾—ã§ãã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: é¸æŠã—ãŸç´ æãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¿½åŠ ã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `sessionId`: æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID
  - `materialIndex`: ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆ0ã€œ2ã®ç¯„å›²ï¼‰
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰ç‰¹å®šã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç´ æã‚’é¸æŠã™ã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - MaterialInstanceãŒè¿”ã•ã‚Œã‚‹
  - `selectedMaterials`ã«é¸æŠã—ãŸç´ æãŒè¿½åŠ ã•ã‚Œã‚‹ï¼ˆé•·ã•+1ï¼‰
  - `currentRound`ãŒ+1ã•ã‚Œã‚‹
  - æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼ˆ3ã¤ï¼‰
  - `MATERIAL_SELECTED`ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã‚‹
  - **æœŸå¾…çµæœã®ç†ç”±**: ç´ æé¸æŠã«ã‚ˆã‚Šã€ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ç´ æé¸æŠå‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: é¸æŠã—ãŸç´ æã®è¿½åŠ ã€ãƒ©ã‚¦ãƒ³ãƒ‰ã®é€²è¡Œã€æ¬¡ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ç”Ÿæˆ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-03: ç´ æã‚¹ã‚­ãƒƒãƒ—ï¼ˆåŸºæœ¬å‹•ä½œï¼‰

- **ãƒ†ã‚¹ãƒˆå**: skipSelection()ã§ç´ æé¸æŠã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: ç´ æã‚’é¸ã°ãšã«æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã«é€²ã‚ã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: ç´ æã‚’ç²å¾—ã›ãšã«ãƒ©ã‚¦ãƒ³ãƒ‰ãŒé€²è¡Œã™ã‚‹
- **å…¥åŠ›å€¤**:
  - `sessionId`: æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: ç¾åœ¨ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§ç´ æã‚’é¸æŠã›ãšã«ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `selectedMaterials`ã®é•·ã•ãŒå¤‰ã‚ã‚‰ãªã„
  - `currentRound`ãŒ+1ã•ã‚Œã‚‹
  - æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼ˆ3ã¤ï¼‰
  - **æœŸå¾…çµæœã®ç†ç”±**: ã‚¹ã‚­ãƒƒãƒ—ã«ã‚ˆã‚Šã€ç´ æã‚’é¸ã°ãšã«ãƒ©ã‚¦ãƒ³ãƒ‰ã ã‘ãŒé€²è¡Œã™ã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ã‚¹ã‚­ãƒƒãƒ—å‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: ç´ æãŒè¿½åŠ ã•ã‚Œãªã„ã“ã¨ã€ãƒ©ã‚¦ãƒ³ãƒ‰ãŒé€²ã‚€ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-04: æ¡å–çµ‚äº†ï¼ˆç²å¾—ç´ æãƒªã‚¹ãƒˆè¿”å´ã€ã‚³ã‚¹ãƒˆè¨ˆç®—ï¼‰

- **ãƒ†ã‚¹ãƒˆå**: endGathering()ã§æ¡å–ã‚’çµ‚äº†ã—ã€ç²å¾—ç´ æã¨ã‚³ã‚¹ãƒˆã‚’å–å¾—ã§ãã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: æ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã€ç²å¾—ã—ãŸç´ æã¨ã‚³ã‚¹ãƒˆã‚’è¨ˆç®—ã§ãã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: ç²å¾—ã—ãŸç´ æãƒªã‚¹ãƒˆã¨ã‚³ã‚¹ãƒˆæƒ…å ±ãŒè¿”ã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `sessionId`: æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã€çµæœã‚’å–å¾—ã™ã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - GatheringResultãŒè¿”ã•ã‚Œã‚‹
  - `materials`ã«ç²å¾—ã—ãŸç´ æãƒªã‚¹ãƒˆãŒå«ã¾ã‚Œã‚‹
  - `cost.actionPointCost`ã«æ¡å–ã‚³ã‚¹ãƒˆãŒè¨ˆç®—ã•ã‚Œã‚‹ï¼ˆåŸºæœ¬ã‚³ã‚¹ãƒˆ + è¿½åŠ ã‚³ã‚¹ãƒˆï¼‰
  - `cost.extraDays`ã«è¿½åŠ æ—¥æ•°ãŒè¨ˆç®—ã•ã‚Œã‚‹ï¼ˆ7å€‹ä»¥ä¸Šã§+1æ—¥ï¼‰
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒ`activeSessions`ã‹ã‚‰å‰Šé™¤ã•ã‚Œã‚‹
  - `GATHERING_ENDED`ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã‚‹
  - **æœŸå¾…çµæœã®ç†ç”±**: æ¡å–çµ‚äº†ã«ã‚ˆã‚Šã€ç²å¾—ç´ æã¨ã‚³ã‚¹ãƒˆãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: æ¡å–çµ‚äº†å‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: ç²å¾—ç´ æã®æ­£ç¢ºæ€§ã€ã‚³ã‚¹ãƒˆè¨ˆç®—ã®æ­£ç¢ºæ€§ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-05: ã‚«ãƒ¼ãƒ‰åŠ¹æœé©ç”¨ï¼ˆæç¤ºå›æ•°ãŒåŠ¹æœé€šã‚Šï¼‰

- **ãƒ†ã‚¹ãƒˆå**: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã€Œç²¾éœŠã®å°ãã€ã§æç¤ºå›æ•°ãŒ+1ã•ã‚Œã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®åŠ¹æœã«ã‚ˆã‚Šæç¤ºå›æ•°ãŒå¢—åŠ ã™ã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: åŸºæœ¬æç¤ºå›æ•°ã«å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®åŠ¹æœãŒåŠ ç®—ã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `card`: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ï¼ˆä¾‹: è¿‘ãã®æ£®ã€æç¤ºå›æ•°3å›ï¼‰
  - `enhancementCards`: å¼·åŒ–ã‚«ãƒ¼ãƒ‰é…åˆ—ï¼ˆä¾‹: [ã€Œç²¾éœŠã®å°ãã€]ï¼‰
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®åŠ¹æœã«ã‚ˆã‚Šæç¤ºå›æ•°ãŒå¢—åŠ ã™ã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `maxRounds`ãŒåŸºæœ¬æç¤ºå›æ•°+1ï¼ˆ4å›ï¼‰ã«è¨­å®šã•ã‚Œã‚‹
  - **æœŸå¾…çµæœã®ç†ç”±**: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®åŠ¹æœãŒæ­£ã—ãé©ç”¨ã•ã‚Œã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®åŠ¹æœé©ç”¨ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: æç¤ºå›æ•°ã®å¢—åŠ ã€åŠ¹æœã®åŠ ç®— ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-06: é¸æŠå›æ•°ä¸Šé™åˆ°é”

- **ãƒ†ã‚¹ãƒˆå**: maxRoundsã«åˆ°é”ã—ãŸã‚‰æ¡å–ãŒå®Œäº†ã™ã‚‹
  - **ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹**: æç¤ºå›æ•°ã®ä¸Šé™ã«é”ã—ãŸã‚‰è‡ªå‹•çš„ã«æ¡å–ãŒå®Œäº†ã™ã‚‹ã“ã¨
  - **æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**: currentRoundãŒmaxRoundsã‚’è¶…ãˆãŸã‚‰isCompleteãŒtrueã«ãªã‚‹
- **å…¥åŠ›å€¤**:
  - `sessionId`: æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID
  - maxRoundså›ã®ç´ æé¸æŠã‚’å®Ÿè¡Œ
  - **å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ„å‘³**: æç¤ºå›æ•°ã®ä¸Šé™ã¾ã§ç´ æã‚’é¸æŠã™ã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `isComplete`ãŒtrueã«ãªã‚‹
  - `currentOptions`ãŒç©ºé…åˆ—ã«ãªã‚‹
  - æ¬¡ã®ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚Œãªã„
  - **æœŸå¾…çµæœã®ç†ç”±**: æç¤ºå›æ•°ä¸Šé™ã«é”ã—ãŸã‚‰æ¡å–ãŒè‡ªå‹•çš„ã«å®Œäº†ã™ã‚‹ ğŸ”µ
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: é¸æŠå›æ•°ä¸Šé™ã®åˆ¶å¾¡ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
  - **ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: isCompleteãƒ•ãƒ©ã‚°ã®å¤‰æ›´ã€ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ç”Ÿæˆã®åœæ­¢ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ»è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

---

## 2. ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰

### T-0011-E01: å­˜åœ¨ã—ãªã„ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ç´ æé¸æŠ

- **ãƒ†ã‚¹ãƒˆå**: selectMaterial()ã§å­˜åœ¨ã—ãªã„ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
  - **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦**: ç„¡åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ç´ æé¸æŠã‚’è©¦ã¿ã‚‹
  - **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§**: ä¸æ­£ãªã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’ä½¿ç”¨ã—ãŸæ“ä½œã‚’é˜²ã
- **å…¥åŠ›å€¤**:
  - `sessionId`: å­˜åœ¨ã—ãªã„ã‚»ãƒƒã‚·ãƒ§ãƒ³IDï¼ˆä¾‹: 'invalid_session_id'ï¼‰
  - `materialIndex`: 0
  - **ä¸æ­£ãªç†ç”±**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€æ“ä½œã‚’å®Ÿè¡Œã§ããªã„
  - **å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ª**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ—¢ã«çµ‚äº†ã—ã¦ã„ã‚‹ã€ã¾ãŸã¯èª¤ã£ãŸIDãŒæ¸¡ã•ã‚ŒãŸå ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `ApplicationError`ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
  - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: `SESSION_NOT_FOUND`
  - **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹**: ã€ŒGathering session not foundã€
  - **ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§**: ä¸æ­£ãªæ“ä½œãŒé˜»æ­¢ã•ã‚Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•´åˆæ€§ãŒä¿ãŸã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: å­˜åœ¨ã—ãªã„ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ç¢ºèª
  - **å“è³ªä¿è¨¼ã®è¦³ç‚¹**: ä¸æ­£ãªæ“ä½œã‚’é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ¤œå‡ºã§ãã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-E02: ç„¡åŠ¹ãªç´ æã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ç´ æé¸æŠ

- **ãƒ†ã‚¹ãƒˆå**: selectMaterial()ã§ç¯„å›²å¤–ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
  - **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦**: ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ç¯„å›²å¤–ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§é¸æŠã‚’è©¦ã¿ã‚‹
  - **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§**: é…åˆ—ã®ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ã
- **å…¥åŠ›å€¤**:
  - `sessionId`: æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ID
  - `materialIndex`: ç¯„å›²å¤–ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆä¾‹: 5ã€-1ï¼‰
  - **ä¸æ­£ãªç†ç”±**: ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯0ã€œ2ã®ç¯„å›²ã®ã¿æœ‰åŠ¹
  - **å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ª**: UIå´ã®ãƒã‚°ã‚„ä¸æ­£ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚ŒãŸå ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `ApplicationError`ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
  - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: `INVALID_SELECTION`
  - **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹**: ã€ŒInvalid material indexã€
  - **ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§**: é…åˆ—ã®ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ãŒé˜»æ­¢ã•ã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ç„¡åŠ¹ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ç¢ºèª
  - **å“è³ªä¿è¨¼ã®è¦³ç‚¹**: å¢ƒç•Œå¤–ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦æ¤œå‡ºã§ãã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-E03: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ä»¥å¤–ã®ã‚«ãƒ¼ãƒ‰ã§æ¡å–é–‹å§‹

- **ãƒ†ã‚¹ãƒˆå**: startDraftGathering()ã§æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ä»¥å¤–ã‚’æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
  - **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦**: ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã‚„å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã§æ¡å–é–‹å§‹ã‚’è©¦ã¿ã‚‹
  - **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§**: ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã®æ•´åˆæ€§ã‚’ä¿ã¤
- **å…¥åŠ›å€¤**:
  - `card`: ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã¾ãŸã¯å¼·åŒ–ã‚«ãƒ¼ãƒ‰ï¼ˆ`card.type !== 'GATHERING'`ï¼‰
  - **ä¸æ­£ãªç†ç”±**: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®ã¿ãŒæ¡å–ã«ä½¿ç”¨ã§ãã‚‹
  - **å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ª**: UIå´ã®ãƒã‚°ã‚„èª¤ã£ãŸã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ãŒæ¸¡ã•ã‚ŒãŸå ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `ApplicationError`ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
  - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: `INVALID_CARD_TYPE`
  - **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹**: ã€ŒCard is not a gathering cardã€
  - **ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§**: ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã®åˆ¶ç´„ãŒå®ˆã‚‰ã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ä¸æ­£ãªã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ç¢ºèª
  - **å“è³ªä¿è¨¼ã®è¦³ç‚¹**: ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã®åˆ¶ç´„ã‚’é©åˆ‡ã«ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜

### T-0011-E04: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æœªèª­ã¿è¾¼ã¿æ™‚ã«æ¡å–é–‹å§‹

- **ãƒ†ã‚¹ãƒˆå**: startDraftGathering()ã§ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æœªèª­ã¿è¾¼ã¿æ™‚ã«ã‚¨ãƒ©ãƒ¼
  - **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦**: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§æ¡å–é–‹å§‹ã‚’è©¦ã¿ã‚‹
  - **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ä¿ã¤ãŸã‚ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’ç¢ºèª
- **å…¥åŠ›å€¤**:
  - `card`: æ¡å–åœ°ã‚«ãƒ¼ãƒ‰
  - ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒªãƒã‚¸ãƒˆãƒªã®`isLoaded()`ãŒfalseã‚’è¿”ã™çŠ¶æ…‹
  - **ä¸æ­£ãªç†ç”±**: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§ã¯ç´ ææƒ…å ±ã‚’å–å¾—ã§ããªã„
  - **å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ª**: ã‚²ãƒ¼ãƒ èµ·å‹•ç›´å¾Œã‚„ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰å¤±æ•—æ™‚
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `ApplicationError`ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
  - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: `DATA_NOT_LOADED`
  - **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹**: ã€ŒMaster data not loadedã€
  - **ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§**: ä¸å®Œå…¨ãªçŠ¶æ…‹ã§ã®æ“ä½œãŒé˜»æ­¢ã•ã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æœªèª­ã¿è¾¼ã¿æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ç¢ºèª
  - **å“è³ªä¿è¨¼ã®è¦³ç‚¹**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ä¿ã¤ãŸã‚ã®äº‹å‰ãƒã‚§ãƒƒã‚¯ãŒã§ãã‚‹ã“ã¨ ğŸŸ¡
- ğŸŸ¡ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«è¨˜è¼‰ã‚ã‚Šï¼ˆã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¯æ—¢å­˜å®šç¾©ã‚’ä½¿ç”¨ï¼‰

---

## 3. å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆæœ€å°å€¤ã€æœ€å¤§å€¤ã€nullç­‰ï¼‰

### T-0011-B01: æœ€å°æç¤ºå›æ•°ï¼ˆ2å›ï¼‰ã§ã®æ¡å–

- **ãƒ†ã‚¹ãƒˆå**: è£åº­ã‚«ãƒ¼ãƒ‰ï¼ˆæç¤ºå›æ•°2å›ï¼‰ã§æ¡å–ãŒæ­£ã—ãå‹•ä½œã™ã‚‹
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: æç¤ºå›æ•°ã®æœ€å°å€¤ï¼ˆ2å›ï¼‰ã§ã®å‹•ä½œç¢ºèª
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: æœ€å°æç¤ºå›æ•°ã§ã‚‚æ­£å¸¸ã«æ¡å–ãŒå®Œäº†ã™ã‚‹
- **å…¥åŠ›å€¤**:
  - `card`: è£åº­ã‚«ãƒ¼ãƒ‰ï¼ˆæç¤ºå›æ•°2å›ã€åŸºæœ¬ã‚³ã‚¹ãƒˆ0ï¼‰
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: æç¤ºå›æ•°ã®æœ€å°å€¤ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ã‚²ãƒ¼ãƒ åºç›¤ã®æ¡å–åœ°ã¨ã—ã¦é »ç¹ã«ä½¿ç”¨ã•ã‚Œã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `maxRounds`ãŒ2ã«è¨­å®šã•ã‚Œã‚‹
  - 2å›ã®ç´ æé¸æŠå¾Œã€`isComplete`ãŒtrueã«ãªã‚‹
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: æœ€å°æç¤ºå›æ•°ã§ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: ä»–ã®æç¤ºå›æ•°ã¨åŒæ§˜ã®å‹•ä½œãŒä¿è¨¼ã•ã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: æœ€å°æç¤ºå›æ•°ã§ã®å‹•ä½œã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: æœ€å°å€¤ã§ã‚‚å®‰å®šã—ã¦å‹•ä½œã™ã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼‰

### T-0011-B02: æœ€å¤§æç¤ºå›æ•°ï¼ˆ5å›ï¼‰ã§ã®æ¡å–

- **ãƒ†ã‚¹ãƒˆå**: å¤ä»£éºè·¡ã‚«ãƒ¼ãƒ‰ï¼ˆæç¤ºå›æ•°5å›ï¼‰ã§æ¡å–ãŒæ­£ã—ãå‹•ä½œã™ã‚‹
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: æç¤ºå›æ•°ã®æœ€å¤§å€¤ï¼ˆ5å›ï¼‰ã§ã®å‹•ä½œç¢ºèª
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: æœ€å¤§æç¤ºå›æ•°ã§ã‚‚æ­£å¸¸ã«æ¡å–ãŒå®Œäº†ã™ã‚‹
- **å…¥åŠ›å€¤**:
  - `card`: å¤ä»£éºè·¡ã‚«ãƒ¼ãƒ‰ï¼ˆæç¤ºå›æ•°5å›ã€åŸºæœ¬ã‚³ã‚¹ãƒˆ2ï¼‰
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: æç¤ºå›æ•°ã®æœ€å¤§å€¤ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ã‚²ãƒ¼ãƒ å¾ŒåŠã®é«˜ãƒ©ãƒ³ã‚¯æ¡å–åœ°ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `maxRounds`ãŒ5ã«è¨­å®šã•ã‚Œã‚‹
  - 5å›ã®ç´ æé¸æŠå¾Œã€`isComplete`ãŒtrueã«ãªã‚‹
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: æœ€å¤§æç¤ºå›æ•°ã§ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: ä»–ã®æç¤ºå›æ•°ã¨åŒæ§˜ã®å‹•ä½œãŒä¿è¨¼ã•ã‚Œã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: æœ€å¤§æç¤ºå›æ•°ã§ã®å‹•ä½œã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: æœ€å¤§å€¤ã§ã‚‚å®‰å®šã—ã¦å‹•ä½œã™ã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼‰

### T-0011-B03: 0å€‹é¸æŠï¼ˆåµå¯Ÿã®ã¿ï¼‰ã§ã®ã‚³ã‚¹ãƒˆè¨ˆç®—

- **ãƒ†ã‚¹ãƒˆå**: ç´ æã‚’1ã¤ã‚‚é¸æŠã›ãšã«çµ‚äº†ã—ãŸå ´åˆã€ã‚³ã‚¹ãƒˆãŒ0ã«ãªã‚‹
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: é¸æŠå€‹æ•°ã®æœ€å°å€¤ï¼ˆ0å€‹ï¼‰ã§ã®ã‚³ã‚¹ãƒˆè¨ˆç®—
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: 0å€‹é¸æŠã§ã‚‚æ­£å¸¸ã«ã‚³ã‚¹ãƒˆãŒè¨ˆç®—ã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `baseCost`: 0ï¼ˆè£åº­ã‚«ãƒ¼ãƒ‰ãªã©ï¼‰
  - `selectedCount`: 0
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: ç´ æã‚’é¸æŠã—ãªã„ã€Œåµå¯Ÿã€ã¨ã„ã†ä½¿ã„æ–¹ãŒå¯èƒ½
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒç´ æã‚’é¸ã°ãšã«æ¡å–åœ°ã‚’ç¢ºèªã™ã‚‹ã ã‘ã®å ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `actionPointCost`: 0ï¼ˆåŸºæœ¬ã‚³ã‚¹ãƒˆ0 + è¿½åŠ ã‚³ã‚¹ãƒˆ0ï¼‰
  - `extraDays`: 0
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: 0å€‹é¸æŠã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšã€ã‚³ã‚¹ãƒˆãŒ0ã«ãªã‚‹
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: ã‚³ã‚¹ãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œã™ã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: 0å€‹é¸æŠæ™‚ã®ã‚³ã‚¹ãƒˆè¨ˆç®—ã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: æœ€å°å€¤ï¼ˆ0å€‹ï¼‰ã§ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆæ¡å–ã‚³ã‚¹ãƒˆè¨ˆç®—è¡¨ï¼‰

### T-0011-B04: 7å€‹é¸æŠï¼ˆç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰ã§ã®ã‚³ã‚¹ãƒˆè¨ˆç®—

- **ãƒ†ã‚¹ãƒˆå**: 7å€‹ä»¥ä¸Šé¸æŠã—ãŸå ´åˆã€ç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã™ã‚‹
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: ç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã™ã‚‹å¢ƒç•Œå€¤ï¼ˆ7å€‹ï¼‰
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: 7å€‹ä»¥ä¸Šã§æ­£ç¢ºã«ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒé©ç”¨ã•ã‚Œã‚‹
- **å…¥åŠ›å€¤**:
  - `baseCost`: 2ï¼ˆå¤ä»£éºè·¡ã‚«ãƒ¼ãƒ‰ãªã©ï¼‰
  - `selectedCount`: 7
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: 7å€‹ãŒç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ã®å¢ƒç•Œå€¤ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå¤§é‡ã«ç´ æã‚’æ¡å–ã—ãŸå ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `actionPointCost`: 5ï¼ˆåŸºæœ¬ã‚³ã‚¹ãƒˆ2 + è¿½åŠ ã‚³ã‚¹ãƒˆ3ï¼‰
  - `extraDays`: 1ï¼ˆç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: 7å€‹ã§æ­£ç¢ºã«ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒé©ç”¨ã•ã‚Œã‚‹
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: 6å€‹ä»¥ä¸‹ã§ã¯ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒãªãã€7å€‹ä»¥ä¸Šã§ç™ºç”Ÿã™ã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ã®å¢ƒç•Œå€¤ã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: ãƒšãƒŠãƒ«ãƒ†ã‚£ã®å¢ƒç•Œå€¤ãŒæ­£ç¢ºã«åˆ¤å®šã•ã‚Œã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆæ¡å–ã‚³ã‚¹ãƒˆè¨ˆç®—è¡¨ï¼‰

### T-0011-B05: 6å€‹é¸æŠï¼ˆãƒšãƒŠãƒ«ãƒ†ã‚£ãªã—ä¸Šé™ï¼‰ã§ã®ã‚³ã‚¹ãƒˆè¨ˆç®—

- **ãƒ†ã‚¹ãƒˆå**: 6å€‹é¸æŠã—ãŸå ´åˆã€ç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã—ãªã„
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: ç¿Œæ—¥æŒè¶Šã—ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã—ãªã„ä¸Šé™å€¤ï¼ˆ6å€‹ï¼‰
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: 6å€‹ä»¥ä¸‹ã§ã¯ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã—ãªã„ã“ã¨ã‚’ç¢ºèª
- **å…¥åŠ›å€¤**:
  - `baseCost`: 1ï¼ˆå±±éº“ã®å²©å ´ã‚«ãƒ¼ãƒ‰ãªã©ï¼‰
  - `selectedCount`: 6
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: 6å€‹ãŒãƒšãƒŠãƒ«ãƒ†ã‚£ãªã—ã®ä¸Šé™å€¤
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’é¿ã‘ã¤ã¤æœ€å¤§é™æ¡å–ã™ã‚‹å ´åˆ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `actionPointCost`: 4ï¼ˆåŸºæœ¬ã‚³ã‚¹ãƒˆ1 + è¿½åŠ ã‚³ã‚¹ãƒˆ3ï¼‰
  - `extraDays`: 0ï¼ˆãƒšãƒŠãƒ«ãƒ†ã‚£ãªã—ï¼‰
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: 6å€‹ã§ã¯ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã—ãªã„
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: 7å€‹ä»¥ä¸Šã§åˆã‚ã¦ãƒšãƒŠãƒ«ãƒ†ã‚£ãŒç™ºç”Ÿã™ã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: ãƒšãƒŠãƒ«ãƒ†ã‚£ãªã—ä¸Šé™å€¤ã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: ãƒšãƒŠãƒ«ãƒ†ã‚£ã®å¢ƒç•Œå€¤ãŒæ­£ç¢ºã«åˆ¤å®šã•ã‚Œã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆæ¡å–ã‚³ã‚¹ãƒˆè¨ˆç®—è¡¨ï¼‰

### T-0011-B06: nullã‚»ãƒƒã‚·ãƒ§ãƒ³ã§getCurrentSession()ã‚’å®Ÿè¡Œ

- **ãƒ†ã‚¹ãƒˆå**: æ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãªã„çŠ¶æ…‹ã§getCurrentSession()ã‚’å‘¼ã³å‡ºã™ã¨nullã‚’è¿”ã™
  - **å¢ƒç•Œå€¤ã®æ„å‘³**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„çŠ¶æ…‹ã§ã®å‹•ä½œç¢ºèª
  - **å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼**: nullã‚±ãƒ¼ã‚¹ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšã€é©åˆ‡ã«nullã‚’è¿”ã™
- **å…¥åŠ›å€¤**:
  - æ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹
  - **å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ **: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ãŒå¿…è¦
  - **å®Ÿéš›ã®ä½¿ç”¨å ´é¢**: ã‚²ãƒ¼ãƒ èµ·å‹•ç›´å¾Œã‚„æ¡å–çµ‚äº†å¾Œ
- **æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
  - `getCurrentSession()`ãŒnullã‚’è¿”ã™
  - **å¢ƒç•Œã§ã®æ­£ç¢ºæ€§**: nullã‚±ãƒ¼ã‚¹ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
  - **ä¸€è²«ã—ãŸå‹•ä½œ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰ç„¡ã‚’é©åˆ‡ã«åˆ¤å®šã§ãã‚‹
- **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: nullã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚ã®å‹•ä½œã‚’ç¢ºèª
  - **å …ç‰¢æ€§ã®ç¢ºèª**: nullã‚±ãƒ¼ã‚¹ã§ã‚‚å®‰å…¨ã«å‹•ä½œã™ã‚‹ã“ã¨ ğŸ”µ
- ğŸ”µ ã“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: è¦ä»¶å®šç¾©æ›¸ã«æ˜è¨˜ï¼ˆgetCurrentSession()ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰

---

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…æ™‚ã®æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆæŒ‡é‡

å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè£…æ™‚ã«ã¯ä»¥ä¸‹ã®æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆã‚’å¿…ãšå«ã‚ã¦ãã ã•ã„ã€‚

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹é–‹å§‹æ™‚ã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: [ã“ã®ãƒ†ã‚¹ãƒˆã§ä½•ã‚’ç¢ºèªã™ã‚‹ã‹ã‚’æ—¥æœ¬èªã§æ˜è¨˜]
// ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: [å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹ã‚’èª¬æ˜]
// ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: [æ­£å¸¸ã«å‹•ä½œã—ãŸå ´åˆã®çµæœã‚’èª¬æ˜]
// ğŸ”µğŸŸ¡ğŸ”´ ã“ã®å†…å®¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚’è¨˜è¼‰
```

### Givenï¼ˆæº–å‚™ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: [ãªãœã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚‹ã‹ã®ç†ç”±]
// ã€åˆæœŸæ¡ä»¶è¨­å®šã€‘: [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã®çŠ¶æ…‹ã‚’èª¬æ˜]
// ã€å‰ææ¡ä»¶ç¢ºèªã€‘: [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã«å¿…è¦ãªå‰ææ¡ä»¶ã‚’æ˜è¨˜]
```

### Whenï¼ˆå®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: [ã©ã®æ©Ÿèƒ½/ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã‹ã‚’èª¬æ˜]
// ã€å‡¦ç†å†…å®¹ã€‘: [å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã®å†…å®¹ã‚’æ—¥æœ¬èªã§èª¬æ˜]
// ã€å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‘: [ãªãœã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã™ã‚‹ã‹ã‚’èª¬æ˜]
```

### Thenï¼ˆæ¤œè¨¼ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ã€çµæœæ¤œè¨¼ã€‘: [ä½•ã‚’æ¤œè¨¼ã™ã‚‹ã‹ã‚’å…·ä½“çš„ã«èª¬æ˜]
// ã€æœŸå¾…å€¤ç¢ºèªã€‘: [æœŸå¾…ã•ã‚Œã‚‹çµæœã¨ãã®ç†ç”±ã‚’èª¬æ˜]
// ã€å“è³ªä¿è¨¼ã€‘: [ã“ã®æ¤œè¨¼ãŒã‚·ã‚¹ãƒ†ãƒ å“è³ªã«ã©ã†è²¢çŒ®ã™ã‚‹ã‹ã‚’èª¬æ˜]
```

### å„expectã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ã€æ¤œè¨¼é …ç›®ã€‘: [ã“ã®æ¤œè¨¼ã§ç¢ºèªã—ã¦ã„ã‚‹å…·ä½“çš„ãªé …ç›®]
// ğŸ”µğŸŸ¡ğŸ”´ ã“ã®å†…å®¹ã®ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚’è¨˜è¼‰
expect(result.currentOptions).toHaveLength(3); // ã€ç¢ºèªå†…å®¹ã€‘: ç´ æã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ3ã¤æç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª ğŸ”µ
expect(result.maxRounds).toBe(3); // ã€ç¢ºèªå†…å®¹ã€‘: æç¤ºå›æ•°ãŒæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®è¨­å®šé€šã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª ğŸ”µ
```

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã®ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
beforeEach(() => {
  // ã€ãƒ†ã‚¹ãƒˆå‰æº–å‚™ã€‘: å„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«GatheringServiceã‚’åˆæœŸåŒ–
  // ã€ç’°å¢ƒåˆæœŸåŒ–ã€‘: ãƒ¢ãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªã¨EventBusã‚’ä½œæˆã—ã€GatheringServiceã«æ³¨å…¥
});

afterEach(() => {
  // ã€ãƒ†ã‚¹ãƒˆå¾Œå‡¦ç†ã€‘: å„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã«ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢
  // ã€çŠ¶æ…‹å¾©å…ƒã€‘: æ¬¡ã®ãƒ†ã‚¹ãƒˆã«å½±éŸ¿ã—ãªã„ã‚ˆã†ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤
});
```

---

## 5. ãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ—¢å­˜ãƒ†ã‚¹ãƒˆã‚’å‚è€ƒï¼‰

### ãƒ¢ãƒƒã‚¯ã®ä½œæˆãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// ãƒ¢ãƒƒã‚¯MasterDataRepository
class MockMasterDataRepository implements Partial<IMasterDataRepository> {
  getCardById(id: unknown): CardMaster | undefined {
    const idStr = String(id);
    return mockCardMasters[idStr];
  }

  getMaterialById(id: unknown): IMaterial | undefined {
    const idStr = String(id);
    return mockMaterials[idStr];
  }

  isLoaded(): boolean {
    return true;
  }
}

// ãƒ¢ãƒƒã‚¯EventBus
class MockEventBus implements Partial<IEventBus> {
  emit = vi.fn();
  on = vi.fn();
  off = vi.fn();
  once = vi.fn();
}

// ãƒ¢ãƒƒã‚¯MaterialService
class MockMaterialService implements Partial<IMaterialService> {
  createInstance = vi.fn((materialId: MaterialId, quality: Quality) => {
    return new MaterialInstance(
      `material_${Date.now()}_${Math.floor(Math.random() * 10000)}`,
      materialId,
      quality,
      mockMaterials[String(materialId)]?.name ?? 'Unknown',
      mockMaterials[String(materialId)]?.attributes ?? [],
    );
  });

  generateRandomQuality = vi.fn((baseQuality: Quality) => {
    // åŸºæº–å“è³ªã‹ã‚‰Â±1æ®µéšã®ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    return baseQuality;
  });
}
```

### ãƒ†ã‚¹ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
describe('GatheringService', () => {
  let gatheringService: IGatheringService;
  let mockMaterialService: IMaterialService;
  let mockMasterDataRepo: IMasterDataRepository;
  let mockEventBus: IEventBus;

  beforeEach(() => {
    // ã€ãƒ†ã‚¹ãƒˆå‰æº–å‚™ã€‘: å„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«GatheringServiceã‚’åˆæœŸåŒ–
    // ã€ç’°å¢ƒåˆæœŸåŒ–ã€‘: ãƒ¢ãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªã¨EventBusã‚’ä½œæˆã—ã€GatheringServiceã«æ³¨å…¥
    mockMaterialService = new MockMaterialService() as IMaterialService;
    mockMasterDataRepo = new MockMasterDataRepository() as IMasterDataRepository;
    mockEventBus = new MockEventBus() as IEventBus;
    gatheringService = new GatheringService(
      mockMaterialService,
      mockMasterDataRepo,
      mockEventBus,
    );
  });

  // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã«è¨˜è¿°
});
```

---

## 6. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `atelier-guild-rank/tests/unit/application/services/gathering-service.test.ts`
- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: `atelier-guild-rank/src/domain/interfaces/gathering-service.interface.ts`
- **å®Ÿè£…**: `atelier-guild-rank/src/application/services/gathering-service.ts`

**æ³¨æ„**: å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼ˆ`/home/user/atelier`ï¼‰ã‚’åŸºæº–ã¨ã—ãŸç›¸å¯¾ãƒ‘ã‚¹ã§ã™ã€‚

---

## 7. å“è³ªåˆ¤å®šçµæœ

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆ†é¡

- **æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**: 6ä»¶ï¼ˆT-0011-01ã€œT-0011-06ï¼‰
- **ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**: 4ä»¶ï¼ˆT-0011-E01ã€œT-0011-E04ï¼‰
- **å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**: 6ä»¶ï¼ˆT-0011-B01ã€œT-0011-B06ï¼‰
- **åˆè¨ˆ**: 16ä»¶

### æœŸå¾…å€¤å®šç¾©

å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§æœŸå¾…å€¤ãŒæ˜ç¢ºã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼š
- æˆ»ã‚Šå€¤ã®å‹ã¨å†…å®¹
- çŠ¶æ…‹å¤‰åŒ–ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã€ç´ æãƒªã‚¹ãƒˆã€ãƒ©ã‚¦ãƒ³ãƒ‰é€²è¡Œï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
- ã‚¨ãƒ©ãƒ¼å†…å®¹ï¼ˆã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰

### æŠ€è¡“é¸æŠ

- **ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª**: TypeScript 5.xï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–ï¼‰
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vitest 4.xï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–ï¼‰
- **ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: Vitestå†…è”µã®`vi.fn()`

### å®Ÿè£…å¯èƒ½æ€§

å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ç¾åœ¨ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§å®Ÿè£…å¯èƒ½ã§ã™ï¼š
- ä¾å­˜ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆMaterialServiceã€MasterDataRepositoryã€EventBusï¼‰ã®ãƒ¢ãƒƒã‚¯åŒ–ãŒå¯èƒ½
- æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆDeckServiceã€MaterialServiceï¼‰ã‚’å‚è€ƒã«å®Ÿè£…å¯èƒ½

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã®åˆ†å¸ƒ

- **ğŸ”µ é’ä¿¡å·ï¼ˆæ¨æ¸¬ãªã—ï¼‰**: 14ä»¶ï¼ˆ87.5%ï¼‰
  - è¦ä»¶å®šç¾©æ›¸ã€ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆã€è¨­è¨ˆæ–‡æ›¸ã«æ˜è¨˜ã•ã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- **ğŸŸ¡ é»„ä¿¡å·ï¼ˆå¦¥å½“ãªæ¨æ¸¬ï¼‰**: 2ä»¶ï¼ˆ12.5%ï¼‰
  - ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æœªèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆæ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ï¼‰
- **ğŸ”´ èµ¤ä¿¡å·ï¼ˆæ¨æ¸¬ï¼‰**: 0ä»¶ï¼ˆ0%ï¼‰

### ç·åˆåˆ¤å®š

**âœ… é«˜å“è³ª**

- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹åˆ†é¡: æ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹
- æœŸå¾…å€¤å®šç¾©: å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æœŸå¾…å€¤ãŒæ˜ç¢º
- æŠ€è¡“é¸æŠ: ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªãƒ»ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒç¢ºå®š
- å®Ÿè£…å¯èƒ½æ€§: ç¾åœ¨ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§å®Ÿç¾å¯èƒ½
- ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: ğŸ”µï¼ˆé’ä¿¡å·ï¼‰ãŒ87.5%ã¨é«˜ã„

---

## 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

æ¬¡ã®ãŠå‹§ã‚ã‚¹ãƒ†ãƒƒãƒ—: `/tsumiki:tdd-red atelier-guild-rank TASK-0011` ã§Redãƒ•ã‚§ãƒ¼ã‚ºï¼ˆå¤±æ•—ãƒ†ã‚¹ãƒˆä½œæˆï¼‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚

---

**æœ€çµ‚æ›´æ–°**: 2026-01-16
