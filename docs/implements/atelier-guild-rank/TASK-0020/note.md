# TASK-0020: MainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ - é–‹ç™ºãƒãƒ¼ãƒˆ

**ä½œæˆæ—¥**: 2026-01-18
**ã‚¿ã‚¹ã‚¯ID**: TASK-0020
**è¦ä»¶å**: atelier-guild-rank
**æ©Ÿèƒ½å**: MainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ï¼‰

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 1.1 ä½¿ç”¨æŠ€è¡“ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|----------|------|
| **Phaser 3** | æœ€æ–°ç‰ˆ | ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ |
| **rexUI Plugin** | æœ€æ–°ç‰ˆ | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| **TypeScript** | æœ€æ–°ç‰ˆ | å‹å®‰å…¨ãªé–‹ç™º |
| **Vite** | æœ€æ–°ç‰ˆ | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |
| **Vitest** | æœ€æ–°ç‰ˆ | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |

**å‚ç…§å…ƒ**:
- docs/tasks/atelier-guild-rank/phase-3/TASK-0020.md
- docs/tasks/atelier-guild-rank/phase-1/TASK-0008.md
- docs/design/atelier-guild-rank/architecture-phaser.md

### 1.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

- **Clean Architecture**: ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ï¼ˆPresentation / Application / Domain / Infrastructureï¼‰
- **Event-Driven Architecture**: EventBusã‚’ç”¨ã„ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“é€šä¿¡
- **Phaser Sceneç®¡ç†**: ã‚·ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ç”»é¢é·ç§»
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**: å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

**å‚ç…§å…ƒ**:
- docs/design/atelier-guild-rank/architecture-overview.md
- docs/design/atelier-guild-rank/architecture-components.md

### 1.3 Phaserè¨­å®š

```typescript
const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,
  width: 1280,
  height: 720,
  parent: 'game-container',
  backgroundColor: '#F5F5DC', // Beige
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
  plugins: {
    scene: [
      {
        key: 'rexUI',
        plugin: RexUIPlugin,
        mapping: 'rexUI',
      },
    ],
  },
};
```

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/architecture-phaser.md

---

## 2. é–‹ç™ºãƒ«ãƒ¼ãƒ«

### 2.1 ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
atelier-guild-rank/src/
â”œâ”€â”€ presentation/
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ theme.ts                # ãƒ†ãƒ¼ãƒå®šç¾©ï¼ˆå®Œæˆï¼‰
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â””â”€â”€ BaseComponent.ts    # åŸºåº•ã‚¯ãƒ©ã‚¹ï¼ˆå®Œæˆï¼‰
â”‚       â””â”€â”€ main/
â”‚           â”œâ”€â”€ HeaderUI.ts         # ãƒ˜ãƒƒãƒ€ãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå®Ÿè£…å¯¾è±¡ï¼‰
â”‚           â”œâ”€â”€ SidebarUI.ts        # ã‚µã‚¤ãƒ‰ãƒãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå®Ÿè£…å¯¾è±¡ï¼‰
â”‚           â””â”€â”€ FooterUI.ts         # ãƒ•ãƒƒã‚¿ãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå®Ÿè£…å¯¾è±¡ï¼‰
```

**å‚ç…§å…ƒ**:
- docs/tasks/atelier-guild-rank/phase-3/TASK-0020.md
- atelier-guild-rank/src/presentation/ui/ï¼ˆå®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

#### å‘½åè¦å‰‡

| å¯¾è±¡ | è¦å‰‡ | ä¾‹ |
|------|------|-----|
| **ã‚¯ãƒ©ã‚¹** | PascalCase | `HeaderUI`, `SidebarUI`, `FooterUI` |
| **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹** | PascalCase | `IGameState`, `GamePhase` |
| **å®šæ•°** | UPPER_SNAKE_CASE | `THEME`, `RANK_COLORS` |
| **å¤‰æ•°** | camelCase | `rankText`, `gaugeBar` |
| **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰** | `private` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | `private rankText` |

**å‚ç…§å…ƒ**: TypeScriptã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰

### 2.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«

#### BaseComponentã®ç¶™æ‰¿

- ã™ã¹ã¦ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `BaseComponent` ã‚’ç¶™æ‰¿
- `create()` ã¨ `destroy()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å¿…ãšå®Ÿè£…
- `scene`, `container`, `rexUI` ã¸ã®å‚ç…§ã‚’åŸºåº•ã‚¯ãƒ©ã‚¹ã‹ã‚‰å–å¾—

```typescript
export class HeaderUI extends BaseComponent {
  constructor(scene: Phaser.Scene) {
    super(scene, 0, 0);
  }

  create(): void {
    // UIç”Ÿæˆ
  }

  destroy(): void {
    // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  }
}
```

**å‚ç…§å…ƒ**:
- atelier-guild-rank/src/presentation/ui/components/BaseComponent.ts
- docs/tasks/atelier-guild-rank/phase-3/TASK-0018.md

#### UIãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | depth | å†…å®¹ |
|---------|------|------|
| Background | 0 | èƒŒæ™¯ç”»åƒãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| Content | 100 | ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆã‚«ãƒ¼ãƒ‰è¡¨ç¤ºãªã©ï¼‰ |
| Sidebar | 150 | ã‚µã‚¤ãƒ‰ãƒãƒ¼ |
| Header/Footer | 200 | ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ |
| Overlay | 300 | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãƒ»ãƒ€ã‚¤ã‚¢ãƒ­ã‚°èƒŒæ™¯ |
| Dialog | 400 | ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° |
| Toast | 500 | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |

**HeaderUIã€SidebarUIã€FooterUIã¯ä»¥ä¸‹ã®depthã§é…ç½®**:
- HeaderUI: depth 200
- SidebarUI: depth 150
- FooterUI: depth 200

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/overview.md

#### ãƒ†ãƒ¼ãƒå®šç¾©ã®ä½¿ç”¨

```typescript
import { THEME } from '../theme';

// ã‚«ãƒ©ãƒ¼ä½¿ç”¨ä¾‹
const backgroundColor = THEME.colors.background;  // 0xf5f5dc
const textColor = THEME.colors.text;              // 0x333333
const primaryColor = THEME.colors.primary;        // 0x8b4513

// ãƒ•ã‚©ãƒ³ãƒˆä½¿ç”¨ä¾‹
const textStyle = {
  fontFamily: THEME.fonts.primary,  // 'Noto Sans JP'
  fontSize: `${THEME.sizes.medium}px`,  // 16px
};

// ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°ä½¿ç”¨ä¾‹
const padding = THEME.spacing.md; // 16px
```

**å‚ç…§å…ƒ**: atelier-guild-rank/src/presentation/ui/theme.ts

---

## 3. é–¢é€£å®Ÿè£…

### 3.1 ä¾å­˜ã‚¿ã‚¹ã‚¯

#### TASK-0018: å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŸºç›¤ âœ… å®Œäº†

- **çŠ¶æ…‹**: å®Œäº†ï¼ˆTDDé–‹ç™ºå®Œäº†ï¼‰
- **å†…å®¹**: ãƒ†ãƒ¼ãƒå®šç¾©ã€BaseComponentå®Ÿè£…
- **æˆæœç‰©**:
  - atelier-guild-rank/src/presentation/ui/theme.ts - ãƒ†ãƒ¼ãƒå®šç¾©ï¼ˆå®Œæˆï¼‰
  - atelier-guild-rank/src/presentation/ui/components/BaseComponent.ts - åŸºåº•ã‚¯ãƒ©ã‚¹ï¼ˆå®Œæˆï¼‰

**å‚ç…§å…ƒ**:
- docs/tasks/atelier-guild-rank/phase-3/TASK-0018.md
- docs/implements/atelier-guild-rank/TASK-0018/note.md

#### TASK-0017: ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†ï¼ˆGameStateServiceï¼‰âœ… å®Œäº†

- **çŠ¶æ…‹**: å®Œäº†
- **å†…å®¹**: IGameStateå‹å®šç¾©ã€GameStateServiceå®Ÿè£…
- **æˆæœç‰©**:
  - atelier-guild-rank/src/shared/types/game-state.ts - ã‚²ãƒ¼ãƒ çŠ¶æ…‹å‹å®šç¾©

**IGameStateã®ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£**:
```typescript
interface IGameState {
  currentRank: GuildRank;        // ç¾åœ¨ã®ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯
  rankHp: number;                // ãƒ©ãƒ³ã‚¯HP
  promotionGauge: number;        // æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ï¼ˆ0-100ï¼‰
  remainingDays: number;         // æ®‹ã‚Šæ—¥æ•°
  currentDay: number;            // ç¾åœ¨ã®æ—¥æ•°
  currentPhase: GamePhase;       // ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º
  gold: number;                  // æ‰€æŒã‚´ãƒ¼ãƒ«ãƒ‰
  comboCount: number;            // ã‚³ãƒ³ãƒœã‚«ã‚¦ãƒ³ãƒˆ
  actionPoints: number;          // è¡Œå‹•ãƒã‚¤ãƒ³ãƒˆ
  isPromotionTest: boolean;      // æ˜‡æ ¼è©¦é¨“ä¸­ã‹ã©ã†ã‹
}
```

**å‚ç…§å…ƒ**: atelier-guild-rank/src/shared/types/game-state.ts

### 3.2 é¡ä¼¼æ©Ÿèƒ½ã®å®Ÿè£…ä¾‹

#### MainSceneï¼ˆæ—¢å­˜ä»®å®Ÿè£…ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: atelier-guild-rank/src/presentation/scenes/MainScene.ts

**ç¾çŠ¶**: ä»®å®Ÿè£…ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºã®ã¿ï¼‰
- å°†æ¥çš„ã«HeaderUIã€SidebarUIã€FooterUIã‚’çµ„ã¿è¾¼ã‚€

**å‚ç…§å…ƒ**: atelier-guild-rank/src/presentation/scenes/MainScene.ts

#### CardUIãƒ»HandDisplayï¼ˆæ—¢å­˜å®Ÿè£…ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**:
- atelier-guild-rank/src/presentation/ui/components/CardUI.ts
- atelier-guild-rank/src/presentation/ui/components/HandDisplay.ts

**å®Ÿè£…æ¸ˆã¿ã®æ©Ÿèƒ½**:
- BaseComponentã‚’ç¶™æ‰¿ã—ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ï¼ˆãƒ›ãƒãƒ¼ã€ã‚¯ãƒªãƒƒã‚¯ï¼‰
- `create()` / `destroy()` ãƒ‘ã‚¿ãƒ¼ãƒ³

**FooterUIã§ã®æ‰‹æœ­è¡¨ç¤ºæ™‚ã«å‚ç…§**

**å‚ç…§å…ƒ**:
- atelier-guild-rank/src/presentation/ui/components/CardUI.ts
- atelier-guild-rank/src/presentation/ui/components/HandDisplay.ts

---

## 4. è¨­è¨ˆæ–‡æ›¸

### 4.1 ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä»•æ§˜

#### å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ãƒ˜ãƒƒãƒ€ãƒ¼ (HeaderUI)                                                â”‚   â”‚
â”‚ â”‚ [ãƒ©ãƒ³ã‚¯: G] [æ˜‡æ ¼ã‚²ãƒ¼ã‚¸: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 35/100] [æ®‹ã‚Š: 25æ—¥] [ğŸ’° 130G] [âš¡ 3/3] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ã‚µã‚¤ãƒ‰ãƒãƒ¼  â”‚ â”‚                                                   â”‚   â”‚
â”‚ â”‚ (SidebarUI) â”‚ â”‚             ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢                â”‚   â”‚
â”‚ â”‚ ã€å—æ³¨ä¾é ¼ã€‘â”‚ â”‚             ï¼ˆãƒ•ã‚§ãƒ¼ã‚ºã«å¿œã˜ã¦å¤‰åŒ–ï¼‰              â”‚   â”‚
â”‚ â”‚ ã€ç´ æã€‘    â”‚ â”‚                                                   â”‚   â”‚
â”‚ â”‚ ã€å®Œæˆå“ã€‘  â”‚ â”‚                                                   â”‚   â”‚
â”‚ â”‚ [ã‚·ãƒ§ãƒƒãƒ—] â”‚ â”‚                                                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ãƒ•ãƒƒã‚¿ãƒ¼ (FooterUI)                                                â”‚   â”‚
â”‚ â”‚ [ä¾é ¼å—æ³¨]â—â”â”â—‹[æ¡å–]â”â”â—‹[èª¿åˆ]â”â”â—‹[ç´å“]                          â”‚   â”‚
â”‚ â”‚ æ‰‹æœ­: [ã‚«ãƒ¼ãƒ‰1][ã‚«ãƒ¼ãƒ‰2][ã‚«ãƒ¼ãƒ‰3][ã‚«ãƒ¼ãƒ‰4][ã‚«ãƒ¼ãƒ‰5]    [ä¼‘æ†©][æ¬¡ã¸]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/main.md

### 4.2 HeaderUIè¨­è¨ˆ

#### ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ãƒ©ãƒ³ã‚¯: G â”‚ â”‚æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ35/100â”‚ â”‚æ®‹25æ—¥â”‚ â”‚ğŸ’°130Gâ”‚ â”‚âš¡ 3/3 AP â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ID | è¡¨ç¤ºå†…å®¹ |
|--------------|-----|---------|
| ãƒ©ãƒ³ã‚¯è¡¨ç¤º | rank-display | ç¾åœ¨ã®ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯ (Gã€œS) |
| æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ | promotion-gauge | æ˜‡æ ¼ã¾ã§ã®é€²æ—ãƒãƒ¼ |
| æ®‹ã‚Šæ—¥æ•° | day-counter | æ®‹ã‚Šæ—¥æ•°ï¼ˆç·Šæ€¥æ™‚ã¯è‰²å¤‰åŒ–ï¼‰ |
| æ‰€æŒé‡‘è¡¨ç¤º | gold-display | ç¾åœ¨ã®ã‚´ãƒ¼ãƒ«ãƒ‰ |
| è¡Œå‹•ãƒã‚¤ãƒ³ãƒˆ | action-points | ç¾åœ¨ã®AP / æœ€å¤§AP |

#### ãƒ©ãƒ³ã‚¯åˆ¥ã‚«ãƒ©ãƒ¼

```typescript
const RANK_COLORS: Record<GuildRank, number> = {
  'G': 0x808080,  // ã‚°ãƒ¬ãƒ¼
  'F': 0xCD7F32,  // ãƒ–ãƒ­ãƒ³ã‚º
  'E': 0xC0C0C0,  // ã‚·ãƒ«ãƒãƒ¼
  'D': 0xFFD700,  // ã‚´ãƒ¼ãƒ«ãƒ‰
  'C': 0x00CED1,  // ã‚¿ãƒ¼ã‚³ã‚¤ã‚º
  'B': 0x9400D3,  // ãƒ‘ãƒ¼ãƒ—ãƒ«
  'A': 0xFF4500,  // ã‚ªãƒ¬ãƒ³ã‚¸ãƒ¬ãƒƒãƒ‰
  'S': 0xFFFFFF,  // ãƒ›ãƒ¯ã‚¤ãƒˆ
};
```

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/common-components.md

### 4.3 SidebarUIè¨­è¨ˆ

#### ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã€å—æ³¨ä¾é ¼ã€‘ â–¼  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚å‚·è–¬ x2      â”‚ â”‚
â”‚ â”‚æœŸé™: 3æ—¥   â”‚ â”‚
â”‚ â”‚å ±é…¬: 50G   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€ç´ æã€‘ â–¼      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è–¬è‰ x5 (C)     â”‚
â”‚ æ¯’æ¶ˆã—è‰ x3 (B) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€å®Œæˆå“ã€‘ â–¼    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‚·è–¬ x1 (B)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¿ç®¡: 12/20     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ›’ ã‚·ãƒ§ãƒƒãƒ—]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ID | æ©Ÿèƒ½ |
|--------------|-----|------|
| å—æ³¨ä¾é ¼ãƒªã‚¹ãƒˆ | quest-list | ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å½¢å¼ã§ä¾é ¼è¡¨ç¤º |
| ç´ æãƒªã‚¹ãƒˆ | material-list | æ‰€æŒç´ æã®ä¸€è¦§è¡¨ç¤º |
| å®Œæˆå“ãƒªã‚¹ãƒˆ | item-list | èª¿åˆæ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ ã®ä¸€è¦§è¡¨ç¤º |
| ä¿ç®¡å®¹é‡è¡¨ç¤º | storage-indicator | ç¾åœ¨/æœ€å¤§ã®ä¿ç®¡æ•°è¡¨ç¤º |
| ã‚·ãƒ§ãƒƒãƒ—ãƒœã‚¿ãƒ³ | btn-shop | ã‚·ãƒ§ãƒƒãƒ—ç”»é¢ã¸ã®é·ç§»ãƒœã‚¿ãƒ³ |

**rexUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ScrollablePanel + Accordion

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/common-components.md

### 4.4 FooterUIè¨­è¨ˆ

#### ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [ä¾é ¼å—æ³¨]â—â”â”â”â—‹[æ¡å–]â”â”â”â—‹[èª¿åˆ]â”â”â”â—‹[ç´å“]                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ã‚«ãƒ¼ãƒ‰â”‚ â”‚ã‚«ãƒ¼ãƒ‰â”‚ â”‚ã‚«ãƒ¼ãƒ‰â”‚ â”‚ã‚«ãƒ¼ãƒ‰â”‚ â”‚ã‚«ãƒ¼ãƒ‰â”‚      â”‚ ä¼‘æ†© â”‚ â”‚ æ¬¡ã¸ â”‚   â”‚   â”‚
â”‚ â”‚ â”‚  1  â”‚ â”‚  2  â”‚ â”‚  3  â”‚ â”‚  4  â”‚ â”‚  5  â”‚      â”‚      â”‚ â”‚      â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ID | æ©Ÿèƒ½ |
|--------------|-----|------|
| ãƒ•ã‚§ãƒ¼ã‚ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ | phase-indicator | ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºã®é€²è¡ŒçŠ¶æ³è¡¨ç¤º |
| æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢ | hand-display | 5æšã®ã‚«ãƒ¼ãƒ‰ã‚’æ¨ªä¸¦ã³è¡¨ç¤º |
| ä¼‘æ†©ãƒœã‚¿ãƒ³ | btn-rest | APå›å¾©ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
| æ¬¡ã¸ãƒœã‚¿ãƒ³ | btn-next | æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®é·ç§» |

#### ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤ºçŠ¶æ…‹

```typescript
enum PhaseDisplayState {
  PENDING = 'pending',        // æœªåˆ°é”ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼‰
  CURRENT = 'current',        // ç¾åœ¨ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
  COMPLETED = 'completed',    // å®Œäº†ï¼ˆãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼‰
  SKIPPED = 'skipped',        // ã‚¹ã‚­ãƒƒãƒ—ï¼ˆæ–œç·šï¼‰
}
```

#### GamePhaseå®šç¾©

```typescript
const GamePhase = {
  QUEST_ACCEPT: 'QUEST_ACCEPT',  // ä¾é ¼å—æ³¨
  GATHERING: 'GATHERING',         // æ¡å–
  ALCHEMY: 'ALCHEMY',             // èª¿åˆ
  DELIVERY: 'DELIVERY',           // ç´å“
} as const;
```

**å‚ç…§å…ƒ**:
- docs/design/atelier-guild-rank/ui-design/screens/common-components.md
- atelier-guild-rank/src/shared/types/common.ts

---

## 5. æ³¨æ„äº‹é …

### 5.1 æŠ€è¡“çš„åˆ¶ç´„

#### Phaserã®åˆ¶ç´„

- DOMè¦ç´ ã¯ä½¿ç”¨ã—ãªã„ï¼ˆ`dom.createContainer: false`ï¼‰
- ã™ã¹ã¦ã®UIã¯Canvas/WebGLã§æç”»
- rexUIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ä¾å­˜

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/architecture-phaser.md

#### IGameStateã¨ã®é€£æº

- HeaderUIã€SidebarUIã€FooterUIã¯ `IGameState` ã‚’å‚ç…§ã—ã¦è¡¨ç¤ºã‚’æ›´æ–°
- `update(state: IGameState)` ãƒ¡ã‚½ãƒƒãƒ‰ã§çŠ¶æ…‹å¤‰æ›´ã‚’åæ˜ 
- ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹çµŒç”±ã§çŠ¶æ…‹å¤‰æ›´é€šçŸ¥ã‚’å—ä¿¡

```typescript
// ã‚²ãƒ¼ãƒ çŠ¶æ…‹æ›´æ–°æ™‚
headerUI.update(gameState);
sidebarUI.update(gameState);
footerUI.update(gameState);
```

**å‚ç…§å…ƒ**: atelier-guild-rank/src/shared/types/game-state.ts

### 5.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

#### ãƒ¡ãƒ¢ãƒªç®¡ç†

- `destroy()` ãƒ¡ã‚½ãƒƒãƒ‰ã§å¿…ãšã™ã¹ã¦ã®GameObjectsã‚’ç ´æ£„
- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚‚å¿˜ã‚Œãšã«å‰Šé™¤
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ã‚’æ¤œè¨

```typescript
public destroy(): void {
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤
  this.removeEventListeners();

  // ã™ã¹ã¦ã®GameObjectsã‚’ç ´æ£„
  this.rankText?.destroy();
  this.gaugeBar?.destroy();
  // ...

  // ã‚³ãƒ³ãƒ†ãƒŠã‚’ç ´æ£„
  this.container?.destroy();
}
```

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/common-components.md

#### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–

- UIã®æ›´æ–°ã¯å€¤å¤‰æ›´æ™‚ã®ã¿
- æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ã®è¦ç´ ã¯éè¡¨ç¤ºã«ã™ã‚‹
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯Tweenã‚’ä½¿ç”¨

**æ›´æ–°é »åº¦è¨­å®š**:
```typescript
const UPDATE_FREQUENCIES = {
  HEADER_UI: 'on_change',           // å€¤å¤‰æ›´æ™‚ã®ã¿
  SIDEBAR_UI: 'on_change',          // å€¤å¤‰æ›´æ™‚ã®ã¿
  PHASE_INDICATOR: 'on_phase_change', // ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´æ™‚ã®ã¿
};
```

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/common-components.md

### 5.3 ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

#### ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

| ã‚­ãƒ¼ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|-----|----------|
| `Tab` | æ¬¡ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ã¸ç§»å‹• |
| `Enter` / `Space` | ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã€ã‚¢ã‚¤ãƒ†ãƒ é¸æŠ |
| `Escape` | é¸æŠè§£é™¤ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°é–‰ã˜ |
| `1-5` | æ‰‹æœ­ã‚«ãƒ¼ãƒ‰ç›´æ¥é¸æŠ |

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/ui-design/screens/common-components.md

---

## 6. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 6.1 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

| ãƒ†ã‚¹ãƒˆID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|---------|----------|----------|
| T-0020-01 | ãƒ˜ãƒƒãƒ€ãƒ¼è¡¨ç¤º | å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0020-02 | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–° | IGameStateå¤‰æ›´æ™‚ã«å€¤ãŒåæ˜ ã•ã‚Œã‚‹ |
| T-0020-03 | ã‚µã‚¤ãƒ‰ãƒãƒ¼å±•é–‹ | ä¾é ¼ãƒ»ç´ æãƒ»å®Œæˆå“ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0020-04 | ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿ | ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ãŒå‹•ä½œã™ã‚‹ |
| T-0020-05 | ãƒ•ã‚§ãƒ¼ã‚ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ | ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºãŒå¼·èª¿è¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0020-06 | æ‰‹æœ­è¡¨ç¤º | 5æšã®ã‚«ãƒ¼ãƒ‰ãŒæ¨ªä¸¦ã³ã§è¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0020-07 | ãƒœã‚¿ãƒ³æ“ä½œ | ä¼‘æ†©ãƒ»æ¬¡ã¸ãƒœã‚¿ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ |

**å‚ç…§å…ƒ**: docs/tasks/atelier-guild-rank/phase-3/TASK-0020.md

### 6.2 çµ±åˆãƒ†ã‚¹ãƒˆ

- MainSceneã§ã®å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¡¨ç¤ºç¢ºèª
- GameStateServiceã¨ã®é€£æºç¢ºèªï¼ˆçŠ¶æ…‹æ›´æ–°ï¼‰
- EventBusã¨ã®é€£æºç¢ºèªï¼ˆã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ/è³¼èª­ï¼‰

**å‚ç…§å…ƒ**: docs/design/atelier-guild-rank/architecture-phaser.md

---

## 7. å®Ÿè£…å„ªå…ˆåº¦

### 7.1 Phase 1: HeaderUIå®Ÿè£…ï¼ˆå¿…é ˆï¼‰

1. **åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ** - æ¨ªä¸¦ã³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
2. **ãƒ©ãƒ³ã‚¯è¡¨ç¤º** - ãƒ©ãƒ³ã‚¯åˆ¥ã‚«ãƒ©ãƒ¼å¯¾å¿œ
3. **æ˜‡æ ¼ã‚²ãƒ¼ã‚¸** - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼è¡¨ç¤º
4. **æ•°å€¤è¡¨ç¤º** - æ—¥æ•°ã€ã‚´ãƒ¼ãƒ«ãƒ‰ã€AP
5. **çŠ¶æ…‹æ›´æ–°** - `update(state)` ãƒ¡ã‚½ãƒƒãƒ‰

### 7.2 Phase 2: FooterUIå®Ÿè£…ï¼ˆå¿…é ˆï¼‰

1. **ãƒ•ã‚§ãƒ¼ã‚ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼** - 4ãƒ•ã‚§ãƒ¼ã‚ºã®é€²è¡Œè¡¨ç¤º
2. **æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢** - HandDisplayã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ´»ç”¨
3. **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³** - ä¼‘æ†©ã€æ¬¡ã¸ãƒœã‚¿ãƒ³
4. **çŠ¶æ…‹æ›´æ–°** - ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´å¯¾å¿œ

### 7.3 Phase 3: SidebarUIå®Ÿè£…ï¼ˆå¿…é ˆï¼‰

1. **ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³æ§‹é€ ** - æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³
2. **ä¾é ¼ãƒªã‚¹ãƒˆ** - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªãƒªã‚¹ãƒˆè¡¨ç¤º
3. **ç´ æãƒ»å®Œæˆå“ãƒªã‚¹ãƒˆ** - ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§è¡¨ç¤º
4. **ä¿ç®¡å®¹é‡è¡¨ç¤º** - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼å½¢å¼
5. **ã‚·ãƒ§ãƒƒãƒ—ãƒœã‚¿ãƒ³** - ç”»é¢é·ç§»ç”¨

### 7.4 Phase 4: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¨å¥¨ï¼‰

1. **æŠ˜ã‚ŠãŸãŸã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³** - ã‚¹ãƒ ãƒ¼ã‚ºãªå±•é–‹/åç´
2. **ã‚²ãƒ¼ã‚¸ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³** - æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ã®å¢—æ¸›
3. **ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³** - ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ç§»å‹•

**å‚ç…§å…ƒ**: docs/tasks/atelier-guild-rank/phase-3/TASK-0020.md

---

## 8. å‚è€ƒãƒªãƒ³ã‚¯

### 8.1 è¨­è¨ˆæ–‡æ›¸

- docs/spec/atelier-guild-rank-requirements.md - è¦ä»¶å®šç¾©æ›¸
- docs/design/atelier-guild-rank/architecture-overview.md - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
- docs/design/atelier-guild-rank/architecture-phaser.md - Phaserå®Ÿè£…è¨­è¨ˆ
- docs/design/atelier-guild-rank/ui-design/overview.md - UIè¨­è¨ˆæ¦‚è¦
- docs/design/atelier-guild-rank/ui-design/screens/main.md - ãƒ¡ã‚¤ãƒ³ç”»é¢è¨­è¨ˆ
- docs/design/atelier-guild-rank/ui-design/screens/common-components.md - å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 8.2 ã‚¿ã‚¹ã‚¯æ–‡æ›¸

- docs/tasks/atelier-guild-rank/phase-3/TASK-0017.md - ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†ï¼ˆä¾å­˜ã‚¿ã‚¹ã‚¯ï¼‰
- docs/tasks/atelier-guild-rank/phase-3/TASK-0018.md - å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŸºç›¤ï¼ˆä¾å­˜ã‚¿ã‚¹ã‚¯ï¼‰
- docs/tasks/atelier-guild-rank/phase-3/TASK-0020.md - æœ¬ã‚¿ã‚¹ã‚¯

### 8.3 å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- atelier-guild-rank/src/presentation/ui/theme.ts - ãƒ†ãƒ¼ãƒå®šç¾©
- atelier-guild-rank/src/presentation/ui/components/BaseComponent.ts - åŸºåº•ã‚¯ãƒ©ã‚¹
- atelier-guild-rank/src/presentation/ui/components/CardUI.ts - ã‚«ãƒ¼ãƒ‰UIï¼ˆå‚è€ƒï¼‰
- atelier-guild-rank/src/presentation/ui/components/HandDisplay.ts - æ‰‹æœ­è¡¨ç¤ºï¼ˆå‚è€ƒï¼‰
- atelier-guild-rank/src/presentation/scenes/MainScene.ts - ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³ï¼ˆä»®å®Ÿè£…ï¼‰
- atelier-guild-rank/src/shared/types/game-state.ts - ã‚²ãƒ¼ãƒ çŠ¶æ…‹å‹å®šç¾©
- atelier-guild-rank/src/shared/types/common.ts - å…±é€šå‹å®šç¾©ï¼ˆGamePhase, GuildRankç­‰ï¼‰

---

## 9. é–‹ç™ºãƒ¡ãƒ¢

### 9.1 å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹

1. **BaseComponentã®ç¶™æ‰¿**: ã™ã¹ã¦ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `BaseComponent` ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨
2. **ã‚³ãƒ³ãƒ†ãƒŠã®æ·±åº¦ç®¡ç†**: HeaderUI/FooterUIã¯depth: 200ã€SidebarUIã¯depth: 150
3. **ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­**: `destroy()` æ™‚ã«å¿…ãšã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤
4. **ãƒ†ãƒ¼ãƒå®šç¾©ã®ä½¿ç”¨**: ã‚«ãƒ©ãƒ¼ã€ãƒ•ã‚©ãƒ³ãƒˆã€ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°ã¯ `THEME` ã‹ã‚‰å–å¾—
5. **IGameStateå‹ã®å‚ç…§**: è¡¨ç¤ºæ›´æ–°æ™‚ã¯ `IGameState` ã®å‹ã«å¾“ã†

### 9.2 æ—¢å­˜å®Ÿè£…ã®æ´»ç”¨

FooterUIã§ã¯æ—¢å­˜ã®HandDisplayã‚’æ´»ç”¨ï¼š

```typescript
// æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢ã«HandDisplayã‚’ä½¿ç”¨
this.handDisplay = new HandDisplay(this.scene, {
  x: 0,
  y: 50,
  maxHandSize: 5,
  cardSpacing: 8,
  onCardClick: (card) => this.onCardSelected(card),
});
```

**æ—¢å­˜å®Ÿè£…ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå‚è€ƒï¼‰**:
- atelier-guild-rank/src/presentation/ui/components/CardUI.spec.ts
- atelier-guild-rank/src/presentation/ui/components/HandDisplay.spec.ts

### 9.3 ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

| å•é¡Œ | åŸå›  | è§£æ±ºç­– |
|------|------|--------|
| UIãŒè¡¨ç¤ºã•ã‚Œãªã„ | `create()` å¿˜ã‚Œ | ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ `this.create()` ã‚’å‘¼ã¶ |
| çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚Œãªã„ | `update()` æœªå‘¼ã³å‡ºã— | ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­ã§ `update(state)` ã‚’å‘¼ã¶ |
| ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œã‚‹ | åº§æ¨™è¨ˆç®—ãƒŸã‚¹ | ç”»é¢ã‚µã‚¤ã‚º(1280x720)ã‚’åŸºæº–ã«è¨ˆç®— |
| æŠ˜ã‚ŠãŸãŸã¿ãŒå‹•ä½œã—ãªã„ | rexUIã®è¨­å®šãƒŸã‚¹ | ScrollablePanel + Accordionã®è¨­å®šç¢ºèª |
| ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ | `destroy()` æœªå®Ÿè£… | ã™ã¹ã¦ã®GameObjectsã‚’ç ´æ£„ |

### 9.4 åº§æ¨™ãƒ»ã‚µã‚¤ã‚ºå‚è€ƒå€¤

```typescript
// ç”»é¢ã‚µã‚¤ã‚º
const SCREEN_WIDTH = 1280;
const SCREEN_HEIGHT = 720;

// ãƒ˜ãƒƒãƒ€ãƒ¼
const HEADER_HEIGHT = 60;
const HEADER_Y = 0;

// ã‚µã‚¤ãƒ‰ãƒãƒ¼
const SIDEBAR_WIDTH = 200;
const SIDEBAR_X = 0;
const SIDEBAR_Y = HEADER_HEIGHT;

// ãƒ•ãƒƒã‚¿ãƒ¼
const FOOTER_HEIGHT = 160;
const FOOTER_Y = SCREEN_HEIGHT - FOOTER_HEIGHT;

// ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢
const CONTENT_X = SIDEBAR_WIDTH;
const CONTENT_Y = HEADER_HEIGHT;
const CONTENT_WIDTH = SCREEN_WIDTH - SIDEBAR_WIDTH;
const CONTENT_HEIGHT = SCREEN_HEIGHT - HEADER_HEIGHT - FOOTER_HEIGHT;
```

---

**æœ€çµ‚æ›´æ–°**: 2026-01-18
**ä½œæˆè€…**: Claude (Zundamon)
