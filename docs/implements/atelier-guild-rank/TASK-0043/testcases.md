# TDDテストケース一覧: 依頼詳細モーダル・受注アニメーション

**タスクID**: TASK-0043
**作成日**: 2026-01-20
**対象要件**: `docs/implements/atelier-guild-rank/TASK-0043/requirements.md`

---

## テスト対象ファイル

1. **QuestDetailModal.spec.ts** - 依頼詳細モーダルコンポーネントのテスト
2. **QuestAcceptPhaseUI.spec.ts** - 追加テストケース（モーダル連携）

---

## 1. QuestDetailModal.spec.ts

### 1.1 正常系テストケース

#### TC-001: モーダル初期化

| 項目 | 内容 |
|------|------|
| テストケースID | TC-001 |
| テストケース名 | 正常なconfigでモーダルが初期化される |
| テスト対象 | `constructor()` |
| 前提条件（Given） | 有効なQuestDetailModalConfigが用意されている |
| 操作（When） | `new QuestDetailModal(scene, config)` を呼び出す |
| 期待結果（Then） | エラーなくインスタンスが作成される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-001 |

#### TC-002: モーダルUI作成

| 項目 | 内容 |
|------|------|
| テストケースID | TC-002 |
| テストケース名 | create()でオーバーレイとパネルが作成される |
| テスト対象 | `create()` |
| 前提条件（Given） | QuestDetailModalがインスタンス化されている |
| 操作（When） | `create()` を呼び出す |
| 期待結果（Then） | オーバーレイ（depth: 900）とパネル（depth: 1000）が作成される |
| 優先度 | 高 |
| 対応要件 | FR-001, FR-002, NFR-002 |

#### TC-003: 依頼者情報表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-003 |
| テストケース名 | 依頼者名が正しく表示される |
| テスト対象 | `createContent()` |
| 前提条件（Given） | QuestDetailModalが作成済み、依頼者名「村人」のQuestが設定されている |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 「村人」が表示される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-002 |

#### TC-004: 依頼内容表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-004 |
| テストケース名 | 依頼内容（アイテム名×数量）が正しく表示される |
| テスト対象 | `createContent()`, `formatQuestRequirements()` |
| 前提条件（Given） | QuestDetailModalが作成済み |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 依頼条件が「アイテム名 ×数量 (品質以上)」の形式で表示される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-002 |

#### TC-005: 期限表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-005 |
| テストケース名 | 期限が「〜日以内」の形式で表示される |
| テスト対象 | `createContent()` |
| 前提条件（Given） | QuestDetailModalが作成済み、期限が3日のQuestが設定されている |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 「3日以内」が表示される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-002 |

#### TC-006: 報酬詳細表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-006 |
| テストケース名 | 報酬（ゴールド / 貢献度）が正しく表示される |
| テスト対象 | `createContent()` |
| 前提条件（Given） | QuestDetailModalが作成済み、報酬100G/50貢献度のQuestが設定されている |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 「100G」「50貢献度」が表示される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-002 |

#### TC-007: 難易度表示（星5）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-007 |
| テストケース名 | 難易度5で★★★★★が表示される |
| テスト対象 | `formatDifficulty()` |
| 前提条件（Given） | difficulty=5のQuestが設定されている |
| 操作（When） | `formatDifficulty(5)` を呼び出す |
| 期待結果（Then） | 「★★★★★」が返される |
| 優先度 | 中 |
| 対応要件 | FR-009 |

#### TC-008: 難易度表示（星3）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-008 |
| テストケース名 | 難易度3で★★★☆☆が表示される |
| テスト対象 | `formatDifficulty()` |
| 前提条件（Given） | difficulty=3のQuestが設定されている |
| 操作（When） | `formatDifficulty(3)` を呼び出す |
| 期待結果（Then） | 「★★★☆☆」が返される |
| 優先度 | 中 |
| 対応要件 | FR-009 |

#### TC-009: 難易度表示（星1）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-009 |
| テストケース名 | 難易度1で★☆☆☆☆が表示される |
| テスト対象 | `formatDifficulty()` |
| 前提条件（Given） | difficulty=1のQuestが設定されている |
| 操作（When） | `formatDifficulty(1)` を呼び出す |
| 期待結果（Then） | 「★☆☆☆☆」が返される |
| 優先度 | 中 |
| 対応要件 | FR-009 |

#### TC-010: 「受注する」ボタン表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-010 |
| テストケース名 | 「受注する」ボタンが表示される |
| テスト対象 | `createButtons()` |
| 前提条件（Given） | QuestDetailModalが作成済み |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 「受注する」ボタンがインタラクティブに表示される |
| 優先度 | 高 |
| 対応要件 | FR-001 |

#### TC-011: 「閉じる」ボタン表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-011 |
| テストケース名 | 「閉じる」ボタンが表示される |
| テスト対象 | `createButtons()` |
| 前提条件（Given） | QuestDetailModalが作成済み |
| 操作（When） | モーダルの内容を確認する |
| 期待結果（Then） | 「閉じる」ボタンがインタラクティブに表示される |
| 優先度 | 高 |
| 対応要件 | FR-001 |

---

### 1.2 アニメーションテストケース

#### TC-101: モーダル開くアニメーション

| 項目 | 内容 |
|------|------|
| テストケースID | TC-101 |
| テストケース名 | create()で開くアニメーションが再生される |
| テスト対象 | `playOpenAnimation()` |
| 前提条件（Given） | QuestDetailModalがインスタンス化されている |
| 操作（When） | `create()` を呼び出す |
| 期待結果（Then） | オーバーレイのフェードイン（alpha 0→0.7, 200ms）とパネルのスケールイン（scale 0.8→1, 300ms, Back.easeOut）が再生される |
| 優先度 | 高 |
| 対応要件 | FR-003 |

#### TC-102: モーダル閉じるアニメーション（閉じるボタン）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-102 |
| テストケース名 | 「閉じる」ボタンクリックで閉じるアニメーションが再生される |
| テスト対象 | `playCloseAnimation()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | 「閉じる」ボタンをクリックする |
| 期待結果（Then） | パネルのスケールアウト（scale 1→0.8, 200ms）とオーバーレイのフェードアウト（alpha 0.7→0, 200ms）が再生され、アニメーション完了後にonCloseコールバックが呼ばれる |
| 優先度 | 高 |
| 対応要件 | FR-004, AC-004 |

#### TC-103: モーダル閉じるアニメーション（オーバーレイクリック）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-103 |
| テストケース名 | オーバーレイクリックで閉じるアニメーションが再生される |
| テスト対象 | `playCloseAnimation()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | オーバーレイ部分をクリックする |
| 期待結果（Then） | 閉じるアニメーションが再生され、onCloseコールバックが呼ばれる |
| 優先度 | 高 |
| 対応要件 | FR-002, FR-004, AC-005 |

#### TC-104: ESCキーでモーダルを閉じる

| 項目 | 内容 |
|------|------|
| テストケースID | TC-104 |
| テストケース名 | ESCキー押下で閉じるアニメーションが再生される |
| テスト対象 | `setupKeyboardEvents()`, `handleEscKey()` |
| 前提条件（Given） | QuestDetailModalが表示中、ESCキーイベントリスナーが設定されている |
| 操作（When） | ESCキーを押す |
| 期待結果（Then） | 閉じるアニメーションが再生される |
| 優先度 | 高 |
| 対応要件 | FR-005, AC-006 |

#### TC-105: 受注成功アニメーション

| 項目 | 内容 |
|------|------|
| テストケースID | TC-105 |
| テストケース名 | 「受注する」ボタンクリックで受注成功アニメーションが再生される |
| テスト対象 | `playAcceptAnimation()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | 「受注する」ボタンをクリックする |
| 期待結果（Then） | 「受注完了！」テキスト（緑色、32px）が表示され、スケールアップ後に消失、パネル縮小、アニメーション完了後にonAcceptコールバックが呼ばれる |
| 優先度 | 高 |
| 対応要件 | FR-006, AC-003 |

#### TC-106: 受注完了テキストのdepth

| 項目 | 内容 |
|------|------|
| テストケースID | TC-106 |
| テストケース名 | 「受注完了！」テキストがdepth 1100で表示される |
| テスト対象 | `playAcceptAnimation()` |
| 前提条件（Given） | 受注成功アニメーション再生中 |
| 操作（When） | 「受注完了！」テキストのdepthを確認する |
| 期待結果（Then） | depthが1100に設定されている |
| 優先度 | 中 |
| 対応要件 | NFR-002 |

---

### 1.3 インタラクションテストケース

#### TC-201: 受注ボタンクリックでonAcceptコールバック

| 項目 | 内容 |
|------|------|
| テストケースID | TC-201 |
| テストケース名 | 「受注する」ボタンクリックでonAcceptが呼ばれる |
| テスト対象 | `createButtons()` |
| 前提条件（Given） | QuestDetailModalが表示中、onAcceptコールバックが設定されている |
| 操作（When） | 「受注する」ボタンをクリックする |
| 期待結果（Then） | onAcceptコールバックが1回呼ばれ、引数にquestが渡される |
| 優先度 | 高 |
| 対応要件 | AC-003 |

#### TC-202: 閉じるボタンクリックでonCloseコールバック

| 項目 | 内容 |
|------|------|
| テストケースID | TC-202 |
| テストケース名 | 「閉じる」ボタンクリックでonCloseが呼ばれる |
| テスト対象 | `createButtons()`, `close()` |
| 前提条件（Given） | QuestDetailModalが表示中、onCloseコールバックが設定されている |
| 操作（When） | 「閉じる」ボタンをクリックする |
| 期待結果（Then） | 閉じるアニメーション完了後にonCloseコールバックが1回呼ばれる |
| 優先度 | 高 |
| 対応要件 | AC-004 |

#### TC-203: アニメーション中の重複クリック防止（受注ボタン）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-203 |
| テストケース名 | アニメーション中の「受注する」ボタンクリックは無視される |
| テスト対象 | `isAnimating()` |
| 前提条件（Given） | モーダルが開くアニメーション再生中（isAnimating=true） |
| 操作（When） | 「受注する」ボタンをクリックする |
| 期待結果（Then） | クリックが無視され、onAcceptは呼ばれない |
| 優先度 | 高 |
| 対応要件 | FR-008, AC-007 |

#### TC-204: アニメーション中の重複クリック防止（閉じるボタン）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-204 |
| テストケース名 | アニメーション中の「閉じる」ボタンクリックは無視される |
| テスト対象 | `isAnimating()` |
| 前提条件（Given） | 閉じるアニメーション再生中（isAnimating=true） |
| 操作（When） | 「閉じる」ボタンをクリックする |
| 期待結果（Then） | クリックが無視され、アニメーションは1回のみ実行される |
| 優先度 | 高 |
| 対応要件 | FR-008 |

#### TC-205: アニメーション中の重複クリック防止（オーバーレイ）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-205 |
| テストケース名 | アニメーション中のオーバーレイクリックは無視される |
| テスト対象 | `isAnimating()` |
| 前提条件（Given） | アニメーション再生中（isAnimating=true） |
| 操作（When） | オーバーレイをクリックする |
| 期待結果（Then） | クリックが無視される |
| 優先度 | 中 |
| 対応要件 | FR-008 |

#### TC-206: アニメーション中のESCキー無視

| 項目 | 内容 |
|------|------|
| テストケースID | TC-206 |
| テストケース名 | アニメーション中のESCキー押下は無視される |
| テスト対象 | `handleEscKey()`, `isAnimating()` |
| 前提条件（Given） | アニメーション再生中（isAnimating=true） |
| 操作（When） | ESCキーを押す |
| 期待結果（Then） | キー入力が無視される |
| 優先度 | 中 |
| 対応要件 | FR-008 |

#### TC-207: アニメーション完了後のisAnimating状態

| 項目 | 内容 |
|------|------|
| テストケースID | TC-207 |
| テストケース名 | アニメーション完了後にisAnimatingがfalseになる |
| テスト対象 | `isAnimating()`, `setAnimating()` |
| 前提条件（Given） | アニメーション再生中（isAnimating=true） |
| 操作（When） | アニメーションが完了する |
| 期待結果（Then） | `isAnimating()` がfalseを返す |
| 優先度 | 中 |
| 対応要件 | FR-008 |

---

### 1.4 リソース管理テストケース

#### TC-301: destroy()でGameObjects破棄

| 項目 | 内容 |
|------|------|
| テストケースID | TC-301 |
| テストケース名 | destroy()ですべてのGameObjectsが破棄される |
| テスト対象 | `destroy()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | `destroy()` を呼び出す |
| 期待結果（Then） | オーバーレイ、パネル、テキスト、ボタンのすべてのdestroy()が呼ばれる |
| 優先度 | 高 |
| 対応要件 | FR-010, AC-009 |

#### TC-302: destroy()でESCキーリスナー解除

| 項目 | 内容 |
|------|------|
| テストケースID | TC-302 |
| テストケース名 | destroy()でESCキーイベントリスナーが解除される |
| テスト対象 | `destroy()` |
| 前提条件（Given） | QuestDetailModalが表示中、ESCキーリスナーが設定されている |
| 操作（When） | `destroy()` を呼び出す |
| 期待結果（Then） | ESCキーの'down'イベントリスナーがoffされる |
| 優先度 | 高 |
| 対応要件 | FR-010 |

#### TC-303: destroy()でTweenキャンセル

| 項目 | 内容 |
|------|------|
| テストケースID | TC-303 |
| テストケース名 | destroy()で進行中のTweenがキャンセルされる |
| テスト対象 | `destroy()` |
| 前提条件（Given） | アニメーション再生中 |
| 操作（When） | `destroy()` を呼び出す |
| 期待結果（Then） | 進行中のTweenがキャンセルされ、リソースが解放される |
| 優先度 | 中 |
| 対応要件 | FR-010 |

#### TC-304: 既に閉じているモーダルでclose()呼び出し

| 項目 | 内容 |
|------|------|
| テストケースID | TC-304 |
| テストケース名 | 既に閉じているモーダルでclose()を呼び出してもエラーにならない |
| テスト対象 | `close()` |
| 前提条件（Given） | モーダルが既にdestroy()されている |
| 操作（When） | `close()` を呼び出す |
| 期待結果（Then） | 何も起きず、エラーもスローされない |
| 優先度 | 中 |
| 対応要件 | ERR-007 |

---

### 1.5 異常系テストケース

#### TC-401: configがnullの場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-401 |
| テストケース名 | configがnullの場合にエラーがスローされる |
| テスト対象 | `constructor()` |
| 前提条件（Given） | configがnull |
| 操作（When） | `new QuestDetailModal(scene, null)` を呼び出す |
| 期待結果（Then） | エラーがスローされ、メッセージに「config」が含まれる |
| 優先度 | 高 |
| 対応要件 | ERR-001 |

#### TC-402: config.questがnullの場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-402 |
| テストケース名 | config.questがnullの場合にエラーがスローされる |
| テスト対象 | `constructor()` |
| 前提条件（Given） | config.questがnull |
| 操作（When） | `new QuestDetailModal(scene, { quest: null, onAccept, onClose })` を呼び出す |
| 期待結果（Then） | エラーがスローされ、メッセージに「quest」が含まれる |
| 優先度 | 高 |
| 対応要件 | ERR-002 |

#### TC-403: config.onAcceptが関数でない場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-403 |
| テストケース名 | config.onAcceptが関数でない場合にエラーがスローされる |
| テスト対象 | `constructor()` |
| 前提条件（Given） | config.onAcceptが文字列 |
| 操作（When） | `new QuestDetailModal(scene, { quest, onAccept: 'string', onClose })` を呼び出す |
| 期待結果（Then） | エラーがスローされ、メッセージに「onAccept」が含まれる |
| 優先度 | 高 |
| 対応要件 | ERR-003 |

#### TC-404: config.onCloseが関数でない場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-404 |
| テストケース名 | config.onCloseが関数でない場合にエラーがスローされる |
| テスト対象 | `constructor()` |
| 前提条件（Given） | config.onCloseが数値 |
| 操作（When） | `new QuestDetailModal(scene, { quest, onAccept, onClose: 123 })` を呼び出す |
| 期待結果（Then） | エラーがスローされ、メッセージに「onClose」が含まれる |
| 優先度 | 高 |
| 対応要件 | ERR-004 |

#### TC-405: sceneがnullの場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-405 |
| テストケース名 | sceneがnullの場合にエラーがスローされる |
| テスト対象 | `constructor()` (BaseComponent継承) |
| 前提条件（Given） | sceneがnull |
| 操作（When） | `new QuestDetailModal(null, config)` を呼び出す |
| 期待結果（Then） | エラーがスローされ、メッセージに「scene」が含まれる |
| 優先度 | 高 |
| 対応要件 | ERR-005 |

---

### 1.6 境界値テストケース

#### TC-501: 難易度0の場合

| 項目 | 内容 |
|------|------|
| テストケースID | TC-501 |
| テストケース名 | difficulty=0で☆☆☆☆☆が表示される |
| テスト対象 | `formatDifficulty()` |
| 前提条件（Given） | difficulty=0のQuestが設定されている |
| 操作（When） | `formatDifficulty(0)` を呼び出す |
| 期待結果（Then） | 「☆☆☆☆☆」が返される（または最小値1に丸められる） |
| 優先度 | 低 |
| 対応要件 | FR-009 |

#### TC-502: 難易度6の場合（上限超過）

| 項目 | 内容 |
|------|------|
| テストケースID | TC-502 |
| テストケース名 | difficulty=6で★★★★★が表示される（上限5） |
| テスト対象 | `formatDifficulty()` |
| 前提条件（Given） | difficulty=6のQuestが設定されている |
| 操作（When） | `formatDifficulty(6)` を呼び出す |
| 期待結果（Then） | 「★★★★★」が返される（最大値5に丸められる） |
| 優先度 | 低 |
| 対応要件 | FR-009 |

#### TC-503: 長いflavorTextの依頼

| 項目 | 内容 |
|------|------|
| テストケースID | TC-503 |
| テストケース名 | 長いflavorTextでもエラーなく表示される |
| テスト対象 | `createContent()` |
| 前提条件（Given） | 非常に長いflavorText（500文字以上）を持つQuestが設定されている |
| 操作（When） | `create()` を呼び出す |
| 期待結果（Then） | エラーなくモーダルが表示され、テキストは折り返しまたは省略される |
| 優先度 | 低 |
| 対応要件 | FR-001 |

---

## 2. QuestAcceptPhaseUI.spec.ts 追加テストケース

### 2.1 モーダル連携テストケース

#### TC-601: カードクリック時のモーダル表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-601 |
| テストケース名 | 依頼カードクリックでQuestDetailModalが表示される |
| テスト対象 | `onCardClick()`, `openQuestDetailModal()` |
| 前提条件（Given） | QuestAcceptPhaseUIが作成済み、依頼カードが表示されている |
| 操作（When） | 依頼カードをクリックする |
| 期待結果（Then） | QuestDetailModalが表示される |
| 優先度 | 高 |
| 対応要件 | FR-001, AC-001 |

#### TC-602: モーダル受注後のイベント発行

| 項目 | 内容 |
|------|------|
| テストケースID | TC-602 |
| テストケース名 | モーダルで受注するとQUEST_ACCEPTEDイベントが発行される |
| テスト対象 | `onAcceptQuest()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | モーダルの「受注する」ボタンをクリックする |
| 期待結果（Then） | EventBus.emit(GameEventType.QUEST_ACCEPTED, { quest })が呼ばれる |
| 優先度 | 高 |
| 対応要件 | AC-003 |

#### TC-603: モーダル閉じた後のカード状態

| 項目 | 内容 |
|------|------|
| テストケースID | TC-603 |
| テストケース名 | モーダルを閉じた後もカードは残っている |
| テスト対象 | `closeQuestDetailModal()` |
| 前提条件（Given） | QuestDetailModalが表示中 |
| 操作（When） | モーダルの「閉じる」ボタンをクリックする |
| 期待結果（Then） | モーダルが閉じ、依頼カードはそのまま残っている |
| 優先度 | 中 |
| 対応要件 | AC-004 |

---

### 2.2 カード移動アニメーションテストケース

#### TC-701: 受注後のカード移動アニメーション

| 項目 | 内容 |
|------|------|
| テストケースID | TC-701 |
| テストケース名 | 受注後にカードがサイドバーへ移動するアニメーションが再生される |
| テスト対象 | `animateCardToSidebar()` |
| 前提条件（Given） | 依頼を受注した（QUEST_ACCEPTEDイベント発行後） |
| 操作（When） | 受注成功アニメーションが完了する |
| 期待結果（Then） | カードがX=80pxへ移動し、scale=0.6になるアニメーション（400ms, Power2）が再生される |
| 優先度 | 高 |
| 対応要件 | FR-007, AC-008 |

#### TC-702: カード移動後のサイドバーリスト更新

| 項目 | 内容 |
|------|------|
| テストケースID | TC-702 |
| テストケース名 | カード移動アニメーション完了後にサイドバーリストが更新される |
| テスト対象 | `updateAcceptedList()` |
| 前提条件（Given） | カード移動アニメーション再生中 |
| 操作（When） | アニメーションが完了する |
| 期待結果（Then） | サイドバーの受注済みリストに依頼が追加される |
| 優先度 | 中 |
| 対応要件 | FR-007 |

#### TC-703: 複数依頼受注時のカード配置

| 項目 | 内容 |
|------|------|
| テストケースID | TC-703 |
| テストケース名 | 複数の依頼を受注すると、カードが縦に並んで配置される |
| テスト対象 | `animateCardToSidebar()` |
| 前提条件（Given） | 既に1件の依頼を受注済み |
| 操作（When） | 2件目の依頼を受注する |
| 期待結果（Then） | 2件目のカードが1件目の下に配置される（targetYが異なる） |
| 優先度 | 中 |
| 対応要件 | FR-007 |

---

## 3. 統合テストケース

#### TC-801: モーダル表示→受注→カード移動の一連フロー

| 項目 | 内容 |
|------|------|
| テストケースID | TC-801 |
| テストケース名 | カードクリック→モーダル表示→受注→カード移動の一連の動作 |
| テスト対象 | `QuestAcceptPhaseUI`, `QuestDetailModal` |
| 前提条件（Given） | QuestAcceptPhaseUIが作成済み、依頼が3件表示されている |
| 操作（When） | 1. 依頼カードをクリック、2. モーダルで「受注する」をクリック |
| 期待結果（Then） | 1. モーダルが表示、2. 受注成功アニメーション再生、3. カードがサイドバーへ移動、4. QUEST_ACCEPTEDイベント発行 |
| 優先度 | 高 |
| 対応要件 | AC-001, AC-003, AC-008 |

#### TC-802: モーダル表示→閉じる→再度表示

| 項目 | 内容 |
|------|------|
| テストケースID | TC-802 |
| テストケース名 | モーダルを閉じた後に再度開ける |
| テスト対象 | `QuestAcceptPhaseUI`, `QuestDetailModal` |
| 前提条件（Given） | 依頼カードが表示されている |
| 操作（When） | 1. カードクリック、2. 「閉じる」クリック、3. 同じカードを再度クリック |
| 期待結果（Then） | 再度モーダルが正常に表示される |
| 優先度 | 中 |
| 対応要件 | AC-001, AC-004 |

---

## テストカバレッジ目標

| カテゴリ | テストケース数 | カバレッジ目標 |
|---------|--------------|--------------|
| 正常系 | 11 | 90%+ |
| アニメーション | 7 | 80%+ |
| インタラクション | 7 | 90%+ |
| リソース管理 | 4 | 90%+ |
| 異常系 | 5 | 80%+ |
| 境界値 | 3 | 70%+ |
| モーダル連携 | 3 | 80%+ |
| カード移動 | 3 | 80%+ |
| 統合 | 2 | 80%+ |
| **合計** | **45** | **80%+** |

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|----------|---------|
| 2026-01-20 | 1.0.0 | 初版作成 |
