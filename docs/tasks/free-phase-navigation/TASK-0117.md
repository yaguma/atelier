# TASK-0117: QuestAcceptPhaseUI変更

**タスクID**: TASK-0117
**タスクタイプ**: TDD
**推定工数**: 8時間
**フェーズ**: Phase 3 - Presentation層 UI実装
**信頼性レベル**: 🟡 *REQ-005・architecture.md・dataflow.md セクション6から妥当な推測*

## 関連文書

- **概要**: [📋 overview.md](overview.md)
- **要件定義**: [📋 requirements.md](../../spec/free-phase-navigation/requirements.md) - REQ-005
- **設計文書**: [📐 architecture.md](../../design/free-phase-navigation/architecture.md)
- **データフロー**: [🔄 dataflow.md](../../design/free-phase-navigation/dataflow.md) - セクション6

## タスク概要

QuestAcceptPhaseUIを掲示板+訪問の併用表示に変更する。掲示板依頼と訪問依頼をタブまたはセクションで切り替え表示し、それぞれからの受注機能を実装。

## 依存タスク

- **前提タスク**: [TASK-0109: QuestService - 掲示板方式対応](TASK-0109.md), [TASK-0110: GameFlowManager - 掲示板連携統合](TASK-0110.md)
- **後続タスク**: [TASK-0118: 統合テスト - フェーズ自由遷移](TASK-0118.md)

## 完了条件

- [ ] 掲示板依頼リストが表示される
- [ ] 訪問依頼リストが表示される
- [ ] 掲示板/訪問の切り替えUIがある
- [ ] 各依頼から受注操作ができる
- [ ] 受注上限（3件）チェックが動作する
- [ ] テストが全て通る

---

## 実装詳細

### 1. 掲示板・訪問切り替えUI 🟡

**信頼性**: 🟡 *REQ-005から妥当な推測（具体的なUI構成は推測）*

**実装ファイル**: `src/shared/presentation/ui/phases/QuestAcceptPhaseUI.ts`

掲示板と訪問者の切り替えをタブまたはボタンで実装。

### 2. 掲示板依頼リスト 🔵

**信頼性**: 🔵 *REQ-005-01「掲示板には依頼が累積的に掲載」より*

IGameStateのboardQuestsを表示。各依頼カードから受注操作。

### 3. 訪問依頼リスト 🔵

**信頼性**: 🔵 *REQ-005-02「訪問依頼は数日ごとに更新」より*

IGameStateのvisitorQuestsを表示。各依頼カードから受注操作。

---

## 単体テスト要件

### テストケース1: 掲示板依頼の表示 🔵

**Given**: boardQuestsに3件の依頼
**When**: 表示
**Then**: 3件の掲示板依頼が表示される

### テストケース2: 訪問依頼の表示 🔵

**Given**: visitorQuestsに2件の依頼
**When**: 表示
**Then**: 2件の訪問依頼が表示される

### テストケース3: 受注上限チェック 🔵

**Given**: 既に3件受注済み
**When**: 新規依頼を受注しようとする
**Then**: 受注不可メッセージが表示される

---

## 実装手順

1. `/tsumiki:tdd-requirements TASK-0117` - 詳細要件定義
2. `/tsumiki:tdd-testcases` - テストケース作成
3. `/tsumiki:tdd-red` - テスト実装（失敗）
4. `/tsumiki:tdd-green` - 最小実装
5. `/tsumiki:tdd-refactor` - リファクタリング
6. `/tsumiki:tdd-verify-complete` - 品質確認

---

## 注意事項

- 既存のQuestAcceptPhaseUIの構造を理解した上で修正
- 既存の依頼カードUIを再利用
- 掲示板と訪問の依頼を視覚的に区別する（アイコン/色など）

---

## 信頼性レベルサマリー

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 実装詳細 | 2 | 1 | 0 | 3 |
| 単体テスト | 3 | 0 | 0 | 3 |

### 全体評価

- **総項目数**: 6項目
- 🔵 **青信号**: 5項目 (83%)
- 🟡 **黄信号**: 1項目 (17%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: ✅ 高品質
