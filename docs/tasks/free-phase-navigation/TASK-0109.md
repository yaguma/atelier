# TASK-0109: QuestService - æ²ç¤ºæ¿æ–¹å¼å¯¾å¿œ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0109
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 8æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - Applicationå±¤ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *REQ-005ãƒ»architecture.mdã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [ğŸ“‹ requirements.md](../../spec/free-phase-navigation/requirements.md) - REQ-005
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture.md](../../design/free-phase-navigation/architecture.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

æ—¢å­˜QuestServiceã®generateDailyQuests()ã‚’æ²ç¤ºæ¿ä¾é ¼ç”Ÿæˆã¨è¨ªå•ä¾é ¼ç”Ÿæˆã«åˆ†é›¢ã™ã‚‹ã€‚QuestBoardServiceã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹å½¢ã«å¤‰æ›´ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0104: QuestBoardServiceå®Ÿè£…](TASK-0104.md)
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0110: GameFlowManager - æ²ç¤ºæ¿é€£æºçµ±åˆ](TASK-0110.md), [TASK-0117: QuestAcceptPhaseUIå¤‰æ›´](TASK-0117.md)

## å®Œäº†æ¡ä»¶

- [ ] generateDailyQuests()ãŒæ²ç¤ºæ¿ç”¨ã¨è¨ªå•ç”¨ã«åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹
- [ ] generateBoardQuests()ãŒæ²ç¤ºæ¿ä¾é ¼ã‚’ç”Ÿæˆã™ã‚‹
- [ ] generateVisitorQuests()ãŒè¨ªå•ä¾é ¼ã‚’ç”Ÿæˆã™ã‚‹
- [ ] updateDeadlines()ãŒæ²ç¤ºæ¿ä¾é ¼ã®æœŸé™åˆ‡ã‚Œå‡¦ç†ã«ã‚‚å¯¾å¿œ
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šã‚‹
- [ ] æ–°è¦ãƒ†ã‚¹ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹

---

## å®Ÿè£…è©³ç´°

### 1. generateDailyQuests()ã®åˆ†é›¢ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã€ŒgenerateDailyQuests() â†’ æ²ç¤ºæ¿æ›´æ–°ã¨è¨ªå•æ›´æ–°ã«åˆ†é›¢ã€ã‚ˆã‚Š*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/features/quest/services/quest-service.ts`

```typescript
generateBoardQuests(rank: GuildRank, vacancies: number): Quest[];
generateVisitorQuests(rank: GuildRank): Quest[];
```

### 2. updateDeadlines()ã®æ‹¡å¼µ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã€ŒupdateDeadlines() â†’ æ²ç¤ºæ¿ä¾é ¼ã®æœŸé™åˆ‡ã‚Œå‡¦ç†ã‚’è¿½åŠ ã€ã‚ˆã‚Š*

æ²ç¤ºæ¿ä¾é ¼ã®æœŸé™ç®¡ç†ã‚‚updateDeadlines()ã§å‡¦ç†ã™ã‚‹ã€‚

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: æ²ç¤ºæ¿ä¾é ¼ã®ç”Ÿæˆ ğŸ”µ

**Given**: rank=D, vacancies=2
**When**: generateBoardQuests()
**Then**: 2ä»¶ã®æ²ç¤ºæ¿ç”¨ä¾é ¼ãŒç”Ÿæˆã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: è¨ªå•ä¾é ¼ã®ç”Ÿæˆ ğŸ”µ

**Given**: rank=D
**When**: generateVisitorQuests()
**Then**: è¨ªå•ä¾é ¼ãŒç”Ÿæˆã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: æ—¢å­˜generateDailyQuests()ã¨ã®å¾Œæ–¹äº’æ› ğŸ”µ

**Given**: æ—¢å­˜ã®å‘¼ã³å‡ºã—ãƒ‘ã‚¿ãƒ¼ãƒ³
**When**: æ—§ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚ŒãŸå ´åˆ
**Then**: å†…éƒ¨ã§æ–°ãƒ¡ã‚½ãƒƒãƒ‰ã«å§”è­²ï¼ˆã¾ãŸã¯æ®µéšçš„å»ƒæ­¢ï¼‰

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0109` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- æ—¢å­˜ã®generateDailyQuests()ã‚’ç›´ã¡ã«å‰Šé™¤ã—ãªã„ï¼ˆæ®µéšçš„ç§»è¡Œï¼‰
- æ²ç¤ºæ¿ã¨è¨ªå•ã§ä¾é ¼ã®æ€§è³ªãŒç•°ãªã‚‹å ´åˆã‚’è€ƒæ…®

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 2 | 0 | 0 | 2 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 3 | 0 | 0 | 3 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 5é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 5é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: âœ… é«˜å“è³ª
