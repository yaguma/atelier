# TASK-0110: GameFlowManager - æ²ç¤ºæ¿é€£æºçµ±åˆ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0110
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 8æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - Applicationå±¤ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *REQ-005ãƒ»dataflow.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³6ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [ğŸ“‹ requirements.md](../../spec/free-phase-navigation/requirements.md) - REQ-005
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture.md](../../design/free-phase-navigation/architecture.md)
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: [ğŸ”„ dataflow.md](../../design/free-phase-navigation/dataflow.md) - ã‚»ã‚¯ã‚·ãƒ§ãƒ³6

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

GameFlowManagerã®startDay()å†…ã§QuestBoardService.updateBoard()ã‚’å‘¼ã³å‡ºã—ã€æ²ç¤ºæ¿ã®æ›´æ–°å‡¦ç†ã‚’çµ±åˆã™ã‚‹ã€‚endDay()å†…ã§ã®æ²ç¤ºæ¿æœŸé™æ›´æ–°ã‚‚å®Ÿè£…ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0108: GameFlowManager - startDay()å¤‰æ›´](TASK-0108.md), [TASK-0109: QuestService - æ²ç¤ºæ¿æ–¹å¼å¯¾å¿œ](TASK-0109.md)
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0117: QuestAcceptPhaseUIå¤‰æ›´](TASK-0117.md)

## å®Œäº†æ¡ä»¶

- [ ] startDay()å†…ã§QuestBoardService.updateBoard()ãŒå‘¼ã°ã‚Œã‚‹
- [ ] endDay()å†…ã§æ²ç¤ºæ¿ä¾é ¼ã®æœŸé™æ›´æ–°ãŒè¡Œã‚ã‚Œã‚‹
- [ ] æ²ç¤ºæ¿çŠ¶æ…‹ãŒIGameStateã«æ­£ã—ãåæ˜ ã•ã‚Œã‚‹
- [ ] ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šã‚‹

---

## å®Ÿè£…è©³ç´°

### 1. startDay()ã¸ã®æ²ç¤ºæ¿æ›´æ–°çµ±åˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *dataflow.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.1ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/shared/services/game-flow/game-flow-manager.ts`

startDay()å†…ã§ä»¥ä¸‹ã‚’è¿½åŠ :
1. QuestBoardService.updateBoard()å‘¼ã³å‡ºã—
2. çµæœã‚’IGameStateã«åæ˜ 

### 2. endDay()ã¸ã®æ²ç¤ºæ¿æœŸé™å‡¦ç†çµ±åˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *dataflow.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³3.3ã€Œæ²ç¤ºæ¿æ›´æ–°ã€ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

endDay()å‡¦ç†ãƒªã‚¹ãƒˆã«æ²ç¤ºæ¿æ›´æ–°ã‚’è¿½åŠ ã€‚

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: startDay()ã§æ²ç¤ºæ¿ãŒæ›´æ–°ã•ã‚Œã‚‹ ğŸŸ¡

**Given**: æ²ç¤ºæ¿ã«æœŸé™åˆ‡ã‚Œä¾é ¼ã‚ã‚Š
**When**: startDay()
**Then**: æœŸé™åˆ‡ã‚Œä¾é ¼ãŒé™¤å»ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: endDay()ã§æ²ç¤ºæ¿çŠ¶æ…‹ãŒä¿å­˜ã•ã‚Œã‚‹ ğŸŸ¡

**Given**: æ²ç¤ºæ¿ã«ä¾é ¼ã‚ã‚Š
**When**: endDay()
**Then**: IGameStateã®questBoardç³»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ›´æ–°ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: è‡ªå‹•æ—¥é€²è¡Œã§ã‚‚æ²ç¤ºæ¿ãŒæ›´æ–°ã•ã‚Œã‚‹ ğŸŸ¡

**Given**: APè¶…éã§2æ—¥åˆ†å‡¦ç†
**When**: processAPOverflow()
**Then**: å„æ—¥ã®startDay()ã§æ²ç¤ºæ¿ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0110` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- QuestBoardServiceã®ä¾å­˜æ³¨å…¥ã‚’GameFlowManagerã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- æ—¢å­˜ã®startDay()/endDay()ã®ãƒ†ã‚¹ãƒˆã«å½±éŸ¿ãŒãªã„ã‹ç¢ºèª

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 0 | 2 | 0 | 2 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 0 | 3 | 0 | 3 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 5é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 0é …ç›® (0%)
- ğŸŸ¡ **é»„ä¿¡å·**: 5é …ç›® (100%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: âš ï¸ è¦æ”¹å–„

**æ¨æ¸¬ãŒå¤šã„é …ç›®**: æ²ç¤ºæ¿é€£æºã®å…·ä½“çš„ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨å‡¦ç†é †åº
