# TASK-0232: DeliveryContainerè¨­è¨ˆ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0232
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ãƒ•ã‚§ãƒ¼ã‚ºã‚³ãƒ³ãƒ†ãƒŠãƒ»ãƒ¡ã‚¤ãƒ³ç”»é¢å®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *è¨­è¨ˆæ›¸ã«è¨˜è¼‰*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [overview.md](./overview.md)
- **UIè¨­è¨ˆ**: [ui-design/overview.md](../../design/atelier-guild-rank-phaser/ui-design/overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ç´å“ãƒ•ã‚§ãƒ¼ã‚ºã‚³ãƒ³ãƒ†ãƒŠã®åŸºæœ¬è¨­è¨ˆã‚’è¡Œã†ã€‚ä¾é ¼ãƒªã‚¹ãƒˆè¡¨ç¤ºã€ç´å“å¯èƒ½ãªä¾é ¼ã®é¸æŠã€å ±é…¬è¡¨ç¤ºã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0213, TASK-0214, TASK-0231
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0233

## å®Œäº†æ¡ä»¶

- [ ] IDeliveryContainerã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] DeliveryContainerOptionsãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆä¾é ¼ãƒªã‚¹ãƒˆã€è©³ç´°ãƒ‘ãƒãƒ«ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼‰ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹
- [ ] BasePhaseContainerã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹

---

## å®Ÿè£…è©³ç´°

### 1. DeliveryContainerãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®šæ•° ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *UIè¨­è¨ˆæ›¸*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/ui/phase/DeliveryContainerConstants.ts`

```typescript
export const DeliveryContainerLayout = {
  // å…¨ä½“ã‚µã‚¤ã‚º
  WIDTH: 800,
  HEIGHT: 500,
  PADDING: 20,

  // å—æ³¨ä¾é ¼ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢
  QUEST_LIST_AREA: {
    X: 20,
    Y: 60,
    WIDTH: 350,
    HEIGHT: 350,
  },

  // ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ«
  DETAIL_PANEL: {
    X: 390,
    Y: 60,
    WIDTH: 390,
    HEIGHT: 350,
  },

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢
  ACTION_AREA: {
    Y: 430,
    BUTTON_SPACING: 20,
  },

  // ç´å“å¯èƒ½ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
  DELIVERABLE_INDICATOR_SIZE: 16,
} as const;
```

### 2. IDeliveryContainerã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ•ã‚§ãƒ¼ã‚ºã‚³ãƒ³ãƒ†ãƒŠè¨­è¨ˆ*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/ui/phase/IDeliveryContainer.ts`

```typescript
import { Quest } from '../../../../domain/quest/Quest';
import { Item } from '../../../../domain/item/Item';
import { IPhaseContainer } from './IPhaseContainer';

export interface DeliveryResult {
  quest: Quest;
  deliveredItems: Item[];
  rewards: {
    gold: number;
    exp: number;
    rewardCards?: any[];
  };
}

export interface DeliveryContainerOptions {
  scene: Phaser.Scene;
  eventBus: EventBus;
  x?: number;
  y?: number;
  onDeliveryComplete?: (result: DeliveryResult) => void;
  onSkip?: () => void;
}

export interface IDeliveryContainer extends IPhaseContainer {
  // ä¾é ¼è¨­å®š
  setAcceptedQuests(quests: Quest[]): void;
  getAcceptedQuests(): Quest[];

  // ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè¨­å®šï¼ˆç´å“å¯å¦åˆ¤å®šç”¨ï¼‰
  setInventory(items: Item[]): void;

  // é¸æŠ
  getSelectedQuest(): Quest | null;
  selectQuest(quest: Quest): void;

  // ç´å“åˆ¤å®š
  canDeliver(quest: Quest): boolean;
  getDeliverableQuests(): Quest[];

  // æ“ä½œ
  deliver(): void;
}
```

### 3. DeliveryContaineråŸºæœ¬å®Ÿè£… ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ç´å“ãƒ•ã‚§ãƒ¼ã‚ºã‚³ãƒ³ãƒ†ãƒŠ*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/ui/phase/DeliveryContainer.ts`

```typescript
import Phaser from 'phaser';
import { BasePhaseContainer } from './BasePhaseContainer';
import { IDeliveryContainer, DeliveryContainerOptions, DeliveryResult } from './IDeliveryContainer';
import { DeliveryContainerLayout } from './DeliveryContainerConstants';
import { Quest } from '../../../../domain/quest/Quest';
import { Item } from '../../../../domain/item/Item';
import { QuestPanel } from '../quest/QuestPanel';
import { RewardCardSelector } from '../reward/RewardCardSelector';
import { EventBus } from '../../core/EventBus';
import { Colors } from '../../config/ColorPalette';
import { TextStyles } from '../../config/TextStyles';

interface QuestListItemData {
  container: Phaser.GameObjects.Container;
  quest: Quest;
  deliverable: boolean;
}

export class DeliveryContainer extends BasePhaseContainer implements IDeliveryContainer {
  private acceptedQuests: Quest[] = [];
  private inventory: Item[] = [];
  private selectedQuest: Quest | null = null;

  // UI Components
  private questListItems: QuestListItemData[] = [];
  private questPanel?: QuestPanel;
  private deliverButton?: Phaser.GameObjects.Container;
  private skipButton?: Phaser.GameObjects.Container;
  private emptyStateText?: Phaser.GameObjects.Text;

  private onDeliveryComplete?: (result: DeliveryResult) => void;
  private onSkip?: () => void;

  constructor(options: DeliveryContainerOptions) {
    super({
      scene: options.scene,
      eventBus: options.eventBus,
      x: options.x ?? 0,
      y: options.y ?? 0,
      width: DeliveryContainerLayout.WIDTH,
      height: DeliveryContainerLayout.HEIGHT,
    });

    this.onDeliveryComplete = options.onDeliveryComplete;
    this.onSkip = options.onSkip;

    this.createBackground();
    this.createTitle('ğŸ“¦ ç´å“ãƒ•ã‚§ãƒ¼ã‚º');
    this.createLayout();
    this.createActionButtons();
  }

  private createLayout(): void {
    const { QUEST_LIST_AREA, DETAIL_PANEL } = DeliveryContainerLayout;

    // ä¾é ¼ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢ãƒ©ãƒ™ãƒ«
    this.createAreaLabel(QUEST_LIST_AREA.X, QUEST_LIST_AREA.Y - 20, 'ğŸ“‹ å—æ³¨ä¸­ã®ä¾é ¼');

    // ä¾é ¼ãƒªã‚¹ãƒˆèƒŒæ™¯
    const listBg = this.scene.add.graphics();
    listBg.fillStyle(0x1a1a3a, 0.8);
    listBg.fillRoundedRect(
      QUEST_LIST_AREA.X,
      QUEST_LIST_AREA.Y,
      QUEST_LIST_AREA.WIDTH,
      QUEST_LIST_AREA.HEIGHT,
      8
    );
    listBg.lineStyle(1, 0x3a3a5a);
    listBg.strokeRoundedRect(
      QUEST_LIST_AREA.X,
      QUEST_LIST_AREA.Y,
      QUEST_LIST_AREA.WIDTH,
      QUEST_LIST_AREA.HEIGHT,
      8
    );
    this.container.add(listBg);

    // è©³ç´°ãƒ‘ãƒãƒ«
    this.questPanel = new QuestPanel(this.scene, {
      x: DETAIL_PANEL.X,
      y: DETAIL_PANEL.Y,
      width: DETAIL_PANEL.WIDTH,
      height: DETAIL_PANEL.HEIGHT,
      showAcceptButton: false,
    });
    this.container.add(this.questPanel.container);
  }

  private createAreaLabel(x: number, y: number, text: string): void {
    const label = this.scene.add.text(x, y, text, {
      ...TextStyles.body,
      fontSize: '13px',
      color: '#aaaaaa',
    });
    this.container.add(label);
  }

  private createActionButtons(): void {
    const { ACTION_AREA, WIDTH } = DeliveryContainerLayout;
    const centerX = WIDTH / 2;

    // ç´å“ãƒœã‚¿ãƒ³
    this.deliverButton = this.createButton(
      centerX + 60,
      ACTION_AREA.Y,
      'ğŸ“¦ ç´å“ã™ã‚‹',
      () => this.deliver(),
      true
    );
    this.deliverButton.setAlpha(0.5);
    this.container.add(this.deliverButton);

    // ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³
    this.skipButton = this.createButton(
      centerX - 60,
      ACTION_AREA.Y,
      'ã‚¹ã‚­ãƒƒãƒ—',
      () => this.handleSkip(),
      false
    );
    this.container.add(this.skipButton);
  }

  setAcceptedQuests(quests: Quest[]): void {
    this.acceptedQuests = quests;
    this.selectedQuest = null;
    this.updateQuestList();
    this.questPanel?.setQuest(null);
    this.updateDeliverButtonState();
  }

  getAcceptedQuests(): Quest[] {
    return [...this.acceptedQuests];
  }

  setInventory(items: Item[]): void {
    this.inventory = items;
    this.updateQuestList(); // ç´å“å¯å¦ã‚’å†è¨ˆç®—
  }

  private updateQuestList(): void {
    // æ—¢å­˜ã®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’ç ´æ£„
    this.questListItems.forEach(item => item.container.destroy());
    this.questListItems = [];

    // ç©ºçŠ¶æ…‹
    if (this.acceptedQuests.length === 0) {
      this.showEmptyState();
      return;
    }

    this.hideEmptyState();

    const { QUEST_LIST_AREA } = DeliveryContainerLayout;
    const itemHeight = 70;
    const spacing = 10;

    this.acceptedQuests.forEach((quest, index) => {
      const y = QUEST_LIST_AREA.Y + 10 + index * (itemHeight + spacing);
      const itemData = this.createQuestListItem(quest, QUEST_LIST_AREA.X + 10, y);
      this.questListItems.push(itemData);
      this.container.add(itemData.container);
    });
  }

  private createQuestListItem(quest: Quest, x: number, y: number): QuestListItemData {
    const itemWidth = DeliveryContainerLayout.QUEST_LIST_AREA.WIDTH - 20;
    const itemHeight = 70;
    const itemContainer = this.scene.add.container(x, y);

    const deliverable = this.canDeliver(quest);

    // èƒŒæ™¯
    const bg = this.scene.add.graphics();
    bg.fillStyle(deliverable ? 0x2a4a2a : 0x2a2a4a, 0.9);
    bg.fillRoundedRect(0, 0, itemWidth, itemHeight, 8);
    bg.lineStyle(1, deliverable ? 0x4a8a4a : 0x4a4a6a);
    bg.strokeRoundedRect(0, 0, itemWidth, itemHeight, 8);
    itemContainer.add(bg);

    // ç´å“å¯èƒ½ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
    const indicator = this.scene.add.text(10, 10, deliverable ? 'âœ…' : 'âŒ', {
      fontSize: '16px',
    });
    itemContainer.add(indicator);

    // ä¾é ¼å
    const nameText = this.scene.add.text(40, 10, quest.name, {
      ...TextStyles.body,
      fontSize: '14px',
      fontStyle: 'bold',
    });
    itemContainer.add(nameText);

    // æœŸé™
    const deadlineText = this.scene.add.text(40, 35, `æ®‹ã‚Š ${quest.remainingDays} æ—¥`, {
      ...TextStyles.body,
      fontSize: '11px',
      color: quest.remainingDays <= 3 ? '#ff4444' : '#aaaaaa',
    });
    itemContainer.add(deadlineText);

    // å ±é…¬
    const rewardText = this.scene.add.text(itemWidth - 10, 25, `${quest.reward.gold}G`, {
      ...TextStyles.body,
      fontSize: '12px',
      color: '#ffd700',
    }).setOrigin(1, 0);
    itemContainer.add(rewardText);

    // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
    itemContainer.setInteractive(
      new Phaser.Geom.Rectangle(0, 0, itemWidth, itemHeight),
      Phaser.Geom.Rectangle.Contains
    );

    itemContainer.on('pointerover', () => {
      bg.clear();
      bg.fillStyle(deliverable ? 0x3a5a3a : 0x3a3a5a, 0.9);
      bg.fillRoundedRect(0, 0, itemWidth, itemHeight, 8);
      bg.lineStyle(1, deliverable ? 0x5aaa5a : 0x5a5a7a);
      bg.strokeRoundedRect(0, 0, itemWidth, itemHeight, 8);
    });

    itemContainer.on('pointerout', () => {
      bg.clear();
      const isSelected = this.selectedQuest === quest;
      bg.fillStyle(isSelected ? Colors.accent : (deliverable ? 0x2a4a2a : 0x2a2a4a), isSelected ? 0.3 : 0.9);
      bg.fillRoundedRect(0, 0, itemWidth, itemHeight, 8);
      bg.lineStyle(1, isSelected ? Colors.accent : (deliverable ? 0x4a8a4a : 0x4a4a6a));
      bg.strokeRoundedRect(0, 0, itemWidth, itemHeight, 8);
    });

    itemContainer.on('pointerdown', () => {
      this.selectQuest(quest);
    });

    itemContainer.setData('bg', bg);

    return {
      container: itemContainer,
      quest,
      deliverable,
    };
  }

  private showEmptyState(): void {
    if (this.emptyStateText) return;

    const { QUEST_LIST_AREA } = DeliveryContainerLayout;
    this.emptyStateText = this.scene.add.text(
      QUEST_LIST_AREA.X + QUEST_LIST_AREA.WIDTH / 2,
      QUEST_LIST_AREA.Y + QUEST_LIST_AREA.HEIGHT / 2,
      'å—æ³¨ä¸­ã®ä¾é ¼ã¯ã‚ã‚Šã¾ã›ã‚“',
      {
        ...TextStyles.body,
        fontSize: '14px',
        color: '#666666',
      }
    ).setOrigin(0.5);
    this.container.add(this.emptyStateText);
  }

  private hideEmptyState(): void {
    if (this.emptyStateText) {
      this.emptyStateText.destroy();
      this.emptyStateText = undefined;
    }
  }

  getSelectedQuest(): Quest | null {
    return this.selectedQuest;
  }

  selectQuest(quest: Quest): void {
    this.selectedQuest = quest;

    // ãƒªã‚¹ãƒˆã®è¡¨ç¤ºæ›´æ–°
    this.questListItems.forEach(item => {
      const bg = item.container.getData('bg') as Phaser.GameObjects.Graphics;
      const isSelected = item.quest === quest;
      const deliverable = item.deliverable;

      bg.clear();
      bg.fillStyle(isSelected ? Colors.accent : (deliverable ? 0x2a4a2a : 0x2a2a4a), isSelected ? 0.3 : 0.9);
      bg.fillRoundedRect(0, 0, DeliveryContainerLayout.QUEST_LIST_AREA.WIDTH - 20, 70, 8);
      bg.lineStyle(isSelected ? 2 : 1, isSelected ? Colors.accent : (deliverable ? 0x4a8a4a : 0x4a4a6a));
      bg.strokeRoundedRect(0, 0, DeliveryContainerLayout.QUEST_LIST_AREA.WIDTH - 20, 70, 8);
    });

    // è©³ç´°ãƒ‘ãƒãƒ«æ›´æ–°
    this.questPanel?.setQuest(quest);

    // ãƒœã‚¿ãƒ³çŠ¶æ…‹æ›´æ–°
    this.updateDeliverButtonState();

    this.eventBus.emit('delivery:quest:selected', { quest });
  }

  canDeliver(quest: Quest): boolean {
    // ä¾é ¼ã®è¦æ±‚ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã™ã¹ã¦æŒã£ã¦ã„ã‚‹ã‹ç¢ºèª
    if (!quest.requiredItems || quest.requiredItems.length === 0) {
      return true;
    }

    return quest.requiredItems.every(required => {
      const inventoryCount = this.inventory.filter(
        item => item.name === required.name || item.id === required.itemId
      ).length;
      return inventoryCount >= required.quantity;
    });
  }

  getDeliverableQuests(): Quest[] {
    return this.acceptedQuests.filter(q => this.canDeliver(q));
  }

  private updateDeliverButtonState(): void {
    const canDeliver = this.selectedQuest && this.canDeliver(this.selectedQuest);
    if (this.deliverButton) {
      this.deliverButton.setAlpha(canDeliver ? 1 : 0.5);
    }
  }

  async deliver(): Promise<void> {
    if (!this.selectedQuest || !this.canDeliver(this.selectedQuest)) {
      return;
    }

    const quest = this.selectedQuest;

    // æ“ä½œç„¡åŠ¹åŒ–
    this.setEnabled(false);

    // ç´å“ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    await this.playDeliveryAnimation();

    // çµæœç”Ÿæˆ
    const result: DeliveryResult = {
      quest,
      deliveredItems: this.getRequiredItems(quest),
      rewards: {
        gold: quest.reward.gold,
        exp: quest.reward.exp,
        rewardCards: quest.reward.cards,
      },
    };

    // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
    this.eventBus.emit('delivery:complete', result);

    // å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠï¼ˆã‚ã‚Œã°ï¼‰
    if (result.rewards.rewardCards && result.rewards.rewardCards.length > 0) {
      await this.showRewardCardSelection(result.rewards.rewardCards);
    }

    // æˆåŠŸè¡¨ç¤º
    await this.showDeliverySuccess(result);

    // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    if (this.onDeliveryComplete) {
      this.onDeliveryComplete(result);
    }
  }

  private getRequiredItems(quest: Quest): Item[] {
    // ä¾é ¼ã®è¦æ±‚ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‹ã‚‰å–å¾—
    const items: Item[] = [];
    quest.requiredItems?.forEach(required => {
      const matching = this.inventory.filter(
        item => item.name === required.name || item.id === required.itemId
      ).slice(0, required.quantity);
      items.push(...matching);
    });
    return items;
  }

  private async playDeliveryAnimation(): Promise<void> {
    // ç´å“ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆTASK-0233ã§è©³ç´°å®Ÿè£…ï¼‰
    return new Promise(resolve => {
      this.scene.time.delayedCall(1000, resolve);
    });
  }

  private async showRewardCardSelection(cards: any[]): Promise<void> {
    // å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠï¼ˆTASK-0233ã§è©³ç´°å®Ÿè£…ï¼‰
    return new Promise(resolve => {
      const selector = new RewardCardSelector({
        scene: this.scene,
        cards: cards,
        title: 'ğŸ å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ',
        onSelect: (card) => {
          this.eventBus.emit('delivery:reward:selected', { card });
          resolve();
        },
      });
    });
  }

  private async showDeliverySuccess(result: DeliveryResult): Promise<void> {
    // æˆåŠŸè¡¨ç¤ºï¼ˆTASK-0233ã§è©³ç´°å®Ÿè£…ï¼‰
    return new Promise(resolve => {
      this.scene.time.delayedCall(1000, resolve);
    });
  }

  private handleSkip(): void {
    this.eventBus.emit('delivery:skip', {});
    if (this.onSkip) {
      this.onSkip();
    }
  }

  private setEnabled(enabled: boolean): void {
    if (this.deliverButton) {
      this.deliverButton.setAlpha(enabled ? 1 : 0.5);
    }
    if (this.skipButton) {
      this.skipButton.setAlpha(enabled ? 1 : 0.5);
    }
  }

  enter(): void {
    super.enter();
    this.selectedQuest = null;
    this.questPanel?.setQuest(null);
  }

  exit(): void {
    super.exit();
  }

  destroy(): void {
    this.questListItems.forEach(item => item.container.destroy());
    this.questPanel?.destroy();
    super.destroy();
  }
}
```

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ã‚³ãƒ³ãƒ†ãƒŠåˆæœŸåŒ– ğŸ”µ

**Given**: DeliveryContainerã‚’åˆæœŸåŒ–
**When**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
**Then**: ã‚³ãƒ³ãƒ†ãƒŠãŒä½œæˆã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: ä¾é ¼ãƒªã‚¹ãƒˆè¨­å®š ğŸ”µ

**Given**: DeliveryContainerãŒã‚ã‚‹
**When**: setAcceptedQuests(quests)ã‚’å‘¼ã¶
**Then**: ä¾é ¼ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: ç´å“å¯å¦åˆ¤å®š ğŸ”µ

**Given**: ä¾é ¼ã®è¦æ±‚ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã«ã‚ã‚‹
**When**: canDeliver(quest)ã‚’å‘¼ã¶
**Then**: trueãŒè¿”ã‚‹

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0232` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- QuestPanelã®å†åˆ©ç”¨
- ç´å“å¯å¦ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¤å®š
- ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã¨ã®é€£æº

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 3é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 3é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
