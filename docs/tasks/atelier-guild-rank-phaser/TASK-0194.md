# TASK-0194: CardViewãƒ†ã‚¹ãƒˆ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0194
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - åŸºæœ¬ã‚·ãƒ¼ãƒ³ãƒ»å…±é€šUIå®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬ã«åŸºã¥ã*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [overview.md](./overview.md)
- **UIè¨­è¨ˆ**: [ui-design/overview.md](../../design/atelier-guild-rank-phaser/ui-design/overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

CardViewé–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0193
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0195, TASK-0231

## å®Œäº†æ¡ä»¶

- [ ] GatheringCardViewã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] RecipeCardViewã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] EnhancementCardViewã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] CardTooltipã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

---

## å®Ÿè£…è©³ç´°

### 1. CardViewãƒ†ã‚¹ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å®Ÿè£…ã‚’æ¤œè¨¼*

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/presentation/ui/card/CardView.test.ts`

```typescript
import { describe, it, expect, beforeEach, vi } from 'vitest';
import { CardState, CardStateStyles } from '../../../../../src/presentation/phaser/ui/card/CardState';
import { CardSize } from '../../../../../src/presentation/phaser/ui/card/CardConstants';
import { getCardTypeDisplayOption } from '../../../../../src/presentation/phaser/ui/card/CardTypeOptions';

describe('CardViewé–¢é€£', () => {
  describe('CardState', () => {
    it('å…¨çŠ¶æ…‹ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      const states: CardState[] = ['normal', 'selected', 'disabled', 'hover', 'used'];
      states.forEach(state => {
        expect(CardStateStyles[state]).toBeDefined();
        expect(CardStateStyles[state].backgroundColor).toBeTypeOf('number');
        expect(CardStateStyles[state].borderColor).toBeTypeOf('number');
        expect(CardStateStyles[state].alpha).toBeLessThanOrEqual(1);
        expect(CardStateStyles[state].scale).toBeGreaterThan(0);
      });
    });

    it('selectedçŠ¶æ…‹ã¯normalã‚ˆã‚Šå¤§ãã„ã‚¹ã‚±ãƒ¼ãƒ«ã‚’æŒã¤', () => {
      expect(CardStateStyles.selected.scale).toBeGreaterThan(CardStateStyles.normal.scale);
    });

    it('disabledçŠ¶æ…‹ã¯ä½ã„alphaå€¤ã‚’æŒã¤', () => {
      expect(CardStateStyles.disabled.alpha).toBeLessThan(CardStateStyles.normal.alpha);
    });
  });

  describe('CardSize', () => {
    it('STANDARD, SMALL, LARGEã‚µã‚¤ã‚ºãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(CardSize.STANDARD).toBeDefined();
      expect(CardSize.SMALL).toBeDefined();
      expect(CardSize.LARGE).toBeDefined();
    });

    it('å„ã‚µã‚¤ã‚ºã«width, heightãŒã‚ã‚‹', () => {
      Object.values(CardSize).forEach(size => {
        expect(size.width).toBeGreaterThan(0);
        expect(size.height).toBeGreaterThan(0);
      });
    });

    it('LARGEã¯STANDARDã‚ˆã‚Šå¤§ãã„', () => {
      expect(CardSize.LARGE.width).toBeGreaterThan(CardSize.STANDARD.width);
      expect(CardSize.LARGE.height).toBeGreaterThan(CardSize.STANDARD.height);
    });
  });

  describe('CardTypeOptions', () => {
    it('å…¨ã‚«ãƒ¼ãƒ‰ç¨®åˆ¥ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå–å¾—ã§ãã‚‹', () => {
      const types = ['gathering', 'recipe', 'enhancement'] as const;
      types.forEach(type => {
        const option = getCardTypeDisplayOption(type);
        expect(option.backgroundColor).toBeTypeOf('number');
        expect(option.borderColor).toBeTypeOf('number');
        expect(option.iconKey).toBeTypeOf('string');
        expect(option.labelColor).toBeTypeOf('string');
      });
    });

    it('å„ç¨®åˆ¥ã§ç•°ãªã‚‹è‰²ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹', () => {
      const gathering = getCardTypeDisplayOption('gathering');
      const recipe = getCardTypeDisplayOption('recipe');
      const enhancement = getCardTypeDisplayOption('enhancement');

      expect(gathering.backgroundColor).not.toBe(recipe.backgroundColor);
      expect(recipe.backgroundColor).not.toBe(enhancement.backgroundColor);
    });
  });
});

describe('CardViewçµ±åˆ', () => {
  // Phaserã‚·ãƒ¼ãƒ³ã®ãƒ¢ãƒƒã‚¯ãŒå¿…è¦ãªãƒ†ã‚¹ãƒˆ
  // å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§å®Ÿè¡Œ

  describe('GatheringCardView', () => {
    it.skip('ã‚«ãƒ¼ãƒ‰ãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã‚‹', () => {
      // Phaserã‚·ãƒ¼ãƒ³ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆ
    });

    it.skip('ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹', () => {
      // ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('RecipeCardView', () => {
    it.skip('å¿…è¦ç´ æãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // è¡¨ç¤ºå†…å®¹ã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('EnhancementCardView', () => {
    it.skip('åŠ¹æœã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // è¡¨ç¤ºå†…å®¹ã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('CardTooltip', () => {
    it.skip('show/hideãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
      // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®è¡¨ç¤º/éè¡¨ç¤ºãƒ†ã‚¹ãƒˆ
    });
  });
});
```

### 2. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ãƒ³ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *æ‰‹å‹•ç¢ºèªç”¨*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/scenes/CardViewTestScene.ts`

```typescript
import { BaseGameScene, SceneInitData } from './BaseGameScene';
import { GatheringCardView } from '../ui/card/GatheringCardView';
import { RecipeCardView } from '../ui/card/RecipeCardView';
import { EnhancementCardView } from '../ui/card/EnhancementCardView';
import { CardTooltip } from '../ui/card/CardTooltip';
// ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

export class CardViewTestScene extends BaseGameScene {
  private tooltip!: CardTooltip;

  constructor() {
    super('CardViewTestScene' as any);
  }

  protected onInit(data?: SceneInitData): void {}
  protected onPreload(): void {}

  protected onCreate(data?: SceneInitData): void {
    this.tooltip = new CardTooltip(this);

    // å„ç¨®ã‚«ãƒ¼ãƒ‰ã‚’ä¸¦ã¹ã¦è¡¨ç¤º
    // çŠ¶æ…‹å¤‰æ›´ãƒœã‚¿ãƒ³ã‚’é…ç½®
    // ãƒ›ãƒãƒ¼/ã‚¯ãƒªãƒƒã‚¯ã®å‹•ä½œç¢ºèª
  }

  protected setupEventListeners(): void {}
}
```

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0194` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- Phaserã‚·ãƒ¼ãƒ³ã‚’å¿…è¦ã¨ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ãƒ¢ãƒƒã‚¯æ–¹æ³•
- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ç¢ºèªç”¨ã‚·ãƒ¼ãƒ³ã®æ´»ç”¨
- ãƒ¢ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 2é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 0é …ç›® (0%)
- ğŸŸ¡ **é»„ä¿¡å·**: 2é …ç›® (100%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: ä¸­å“è³ª
