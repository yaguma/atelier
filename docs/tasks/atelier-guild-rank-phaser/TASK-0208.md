# TASK-0208: SidebarUIãƒ†ã‚¹ãƒˆ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0208
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - åŸºæœ¬ã‚·ãƒ¼ãƒ³ãƒ»å…±é€šUIå®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬ã«åŸºã¥ã*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [overview.md](./overview.md)
- **UIè¨­è¨ˆ**: [ui-design/overview.md](../../design/atelier-guild-rank-phaser/ui-design/overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

SidebarUIé–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0207
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0209

## å®Œäº†æ¡ä»¶

- [ ] SidebarConstantsã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ä¾é ¼ãƒªã‚¹ãƒˆã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚°ãƒªãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

---

## å®Ÿè£…è©³ç´°

### 1. SidebarConstantsãƒ†ã‚¹ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å®šæ•°ã®æ¤œè¨¼*

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/presentation/ui/sidebar/SidebarUI.test.ts`

```typescript
import { describe, it, expect } from 'vitest';
import { SidebarLayout, SidebarColors } from '../../../../../src/presentation/phaser/ui/sidebar/SidebarConstants';

describe('SidebarConstants', () => {
  describe('SidebarLayout', () => {
    it('ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®åŸºæœ¬ã‚µã‚¤ã‚ºãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarLayout.WIDTH).toBeGreaterThan(0);
      expect(SidebarLayout.HEIGHT).toBeGreaterThan(0);
    });

    it('ä½ç½®ãŒç”»é¢å³å´ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹', () => {
      // 1280å¹…ã®ç”»é¢ã§å³å´ã«é…ç½®ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      expect(SidebarLayout.X).toBeGreaterThan(640);
    });

    it('ã‚¿ãƒ–ã‚µã‚¤ã‚ºãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarLayout.TAB_HEIGHT).toBeGreaterThan(0);
      expect(SidebarLayout.TAB_WIDTH).toBeGreaterThan(0);
    });

    it('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarLayout.CONTENT_Y).toBeGreaterThan(0);
      expect(SidebarLayout.CONTENT_HEIGHT).toBeGreaterThan(0);
    });

    it('ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚µã‚¤ã‚ºãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarLayout.ITEM_HEIGHT).toBeGreaterThan(0);
      expect(SidebarLayout.ITEM_SPACING).toBeGreaterThanOrEqual(0);
    });

    it('2ã¤ã®ã‚¿ãƒ–ãŒæ¨ªã«åã¾ã‚‹å¹…ã«ãªã£ã¦ã„ã‚‹', () => {
      const totalTabWidth = SidebarLayout.TAB_WIDTH * 2 + SidebarLayout.PADDING * 2;
      expect(totalTabWidth).toBeLessThanOrEqual(SidebarLayout.WIDTH);
    });
  });

  describe('SidebarColors', () => {
    it('èƒŒæ™¯è‰²ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarColors.BACKGROUND).toBeTypeOf('number');
      expect(SidebarColors.BACKGROUND_ALPHA).toBeGreaterThan(0);
      expect(SidebarColors.BACKGROUND_ALPHA).toBeLessThanOrEqual(1);
    });

    it('ã‚¿ãƒ–ã®è‰²ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹', () => {
      expect(SidebarColors.TAB_ACTIVE).toBeTypeOf('number');
      expect(SidebarColors.TAB_INACTIVE).toBeTypeOf('number');
    });

    it('ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã¯éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚ˆã‚Šæ˜ã‚‹ã„', () => {
      // è‰²ã®æ˜ã‚‹ã•ã‚’æ¯”è¼ƒï¼ˆç°¡æ˜“çš„ã«æ•°å€¤ã§åˆ¤å®šï¼‰
      expect(SidebarColors.TAB_ACTIVE).toBeGreaterThan(SidebarColors.TAB_INACTIVE);
    });
  });
});

describe('SidebarUI', () => {
  // Phaserã‚·ãƒ¼ãƒ³ã®ãƒ¢ãƒƒã‚¯ãŒå¿…è¦ãªãƒ†ã‚¹ãƒˆ

  describe('ã‚¿ãƒ–æ©Ÿèƒ½', () => {
    it.skip('åˆæœŸçŠ¶æ…‹ã§ä¾é ¼ã‚¿ãƒ–ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–', () => {
      // Phaserã‚·ãƒ¼ãƒ³ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆ
    });

    it.skip('setActiveTab("inventory")ã§ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹', () => {
      // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯ã§åˆ‡ã‚Šæ›¿ãˆãŒã§ãã‚‹', () => {
      // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('ä¾é ¼ãƒªã‚¹ãƒˆ', () => {
    it.skip('setQuestsã§ä¾é ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // ä¾é ¼è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ä¾é ¼ã‚¯ãƒªãƒƒã‚¯ã§onQuestSelectãŒå‘¼ã°ã‚Œã‚‹', () => {
      // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('highlightQuestã§æŒ‡å®šã—ãŸä¾é ¼ãŒãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã‚‹', () => {
      // ãƒã‚¤ãƒ©ã‚¤ãƒˆã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ç·Šæ€¥ä¾é ¼ã¯èµ¤ã„ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã§è¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª', () => {
    it.skip('setInventoryã§ã‚¢ã‚¤ãƒ†ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§è¡¨ç¤ºã‚¢ã‚¤ãƒ†ãƒ ãŒçµã‚Šè¾¼ã¾ã‚Œã‚‹', () => {
      // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ã‚¢ã‚¤ãƒ†ãƒ ã‚¯ãƒªãƒƒã‚¯ã§onItemSelectãŒå‘¼ã°ã‚Œã‚‹', () => {
      // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('å“è³ªã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒæ­£ã—ã„è‰²ã§è¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // å“è³ªè¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«', () => {
    it.skip('scrollToTopã§ãƒªã‚¹ãƒˆå…ˆé ­ã«ç§»å‹•ã™ã‚‹', () => {
      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('scrollToItemã§æŒ‡å®šã‚¢ã‚¤ãƒ†ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // ã‚¢ã‚¤ãƒ†ãƒ ã¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
    });
  });
});
```

### 2. QuestListItemãƒ†ã‚¹ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ä¾é ¼ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ *

```typescript
describe('QuestListItem', () => {
  describe('è¡¨ç¤ºå†…å®¹', () => {
    it.skip('ä¾é ¼åãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // åå‰è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('æ®‹ã‚Šæ—¥æ•°ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // æœŸé™è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('å ±é…¬ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // å ±é…¬è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼', () => {
    it.skip('å®Œäº†å¯èƒ½ãªä¾é ¼ã¯ç·‘è‰²', () => {
      // å®Œäº†å¯èƒ½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ç·Šæ€¥ä¾é ¼ã¯èµ¤è‰²', () => {
      // ç·Šæ€¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('é€šå¸¸ä¾é ¼ã¯é’è‰²', () => {
      // é€šå¸¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('æœŸé™è¡¨ç¤ºã®è‰²', () => {
    it.skip('æœŸé™åˆ‡ã‚Œã¯èµ¤', () => {});
    it.skip('æ®‹ã‚Š3æ—¥ä»¥å†…ã¯èµ¤', () => {});
    it.skip('æ®‹ã‚Š7æ—¥ä»¥å†…ã¯ã‚ªãƒ¬ãƒ³ã‚¸', () => {});
    it.skip('ãã‚Œä»¥å¤–ã¯ã‚°ãƒ¬ãƒ¼', () => {});
  });
});
```

### 3. InventoryGridItemãƒ†ã‚¹ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚¢ã‚¤ãƒ†ãƒ *

```typescript
describe('InventoryGridItem', () => {
  describe('è¡¨ç¤ºå†…å®¹', () => {
    it.skip('ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('å€‹æ•°ãŒ2ä»¥ä¸Šã®å ´åˆãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // å€‹æ•°ãƒãƒƒã‚¸ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ç´ æã®å ´åˆå“è³ªã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // å“è³ªè¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });
  });

  describe('ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³', () => {
    it.skip('ãƒ›ãƒãƒ¼ã§èƒŒæ™¯è‰²ãŒå¤‰ã‚ã‚‹', () => {
      // ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('ã‚¯ãƒªãƒƒã‚¯ã§onClickãŒå‘¼ã°ã‚Œã‚‹', () => {
      // ã‚¯ãƒªãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
    });

    it.skip('é¸æŠçŠ¶æ…‹ã§æ ç·šãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      // é¸æŠè¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
    });
  });
});
```

### 4. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒ¼ãƒ³ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *æ‰‹å‹•ç¢ºèªç”¨*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/scenes/SidebarUITestScene.ts`

```typescript
import { BaseGameScene, SceneInitData } from './BaseGameScene';
import { SidebarUI } from '../ui/sidebar/SidebarUI';
import { UIFactory } from '../ui/common/UIFactory';
// ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

export class SidebarUITestScene extends BaseGameScene {
  private sidebarUI!: SidebarUI;

  constructor() {
    super('SidebarUITestScene' as any);
  }

  protected onInit(data?: SceneInitData): void {}
  protected onPreload(): void {}

  protected onCreate(data?: SceneInitData): void {
    const uiFactory = new UIFactory(this);

    // SidebarUIç”Ÿæˆ
    this.sidebarUI = new SidebarUI(this, uiFactory, {
      onQuestSelect: (quest) => console.log(`Quest selected: ${quest.name}`),
      onItemSelect: (item) => console.log(`Item selected: ${item.id}`),
    });

    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è¨­å®š
    this.sidebarUI.setQuests(this.createTestQuests());
    this.sidebarUI.setInventory(this.createTestInventory());

    // ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³é…ç½®
    this.createTestButtons();
  }

  private createTestQuests(): Quest[] {
    // ãƒ¢ãƒƒã‚¯ä¾é ¼ç”Ÿæˆ
    return [];
  }

  private createTestInventory(): InventoryItem[] {
    // ãƒ¢ãƒƒã‚¯ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç”Ÿæˆ
    return [];
  }

  private createTestButtons(): void {
    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
    // ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒœã‚¿ãƒ³
    // ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒœã‚¿ãƒ³
  }

  protected setupEventListeners(): void {}
}
```

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0208` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ™‚ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¿æŒ
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã®ä¿æŒ
- ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®ç¶²ç¾…æ€§

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 4é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 0é …ç›® (0%)
- ğŸŸ¡ **é»„ä¿¡å·**: 4é …ç›® (100%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: ä¸­å“è³ª
