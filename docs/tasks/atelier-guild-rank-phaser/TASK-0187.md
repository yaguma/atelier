# TASK-0187: TitleSceneã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³å®Ÿè£…

**ã‚¿ã‚¹ã‚¯ID**: TASK-0187
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - åŸºæœ¬ã‚·ãƒ¼ãƒ³ãƒ»å…±é€šUIå®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *è¨­è¨ˆæ›¸ã«æ˜ç¢ºãªè¨˜è¼‰ã‚ã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [overview.md](./overview.md)
- **UIè¨­è¨ˆ**: [ui-design/overview.md](../../design/atelier-guild-rank-phaser/ui-design/overview.md)
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: [dataflow.md](../../design/atelier-guild-rank-phaser/dataflow.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã®ã€Œã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã€‚ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ç„¡åŠ¹åŒ–ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0186
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0188

## å®Œäº†æ¡ä»¶

- [x] ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [x] ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ç„¡åŠ¹åŒ–ã•ã‚Œã‚‹
- [x] ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã‚‹
- [x] ã‚¯ãƒªãƒƒã‚¯å¾Œã«MainSceneã¸é·ç§»ã™ã‚‹

---

## å®Ÿè£…è©³ç´°

### 1. ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³å®Ÿè£… ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ•ãƒ­ãƒ¼ãŒè¨­è¨ˆæ›¸ã«è¨˜è¼‰*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/scenes/TitleScene.ts` ã«è¿½åŠ 

```typescript
import Label from 'phaser3-rex-plugins/templates/ui/label/Label';

// TitleSceneã‚¯ãƒ©ã‚¹å†…

private continueButton!: Label;
private hasSaveData = false;

protected onInit(data?: SceneInitData): void {
  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ç¢ºèª
  this.hasSaveData = this.checkSaveData();
}

private createMenuButtons(): void {
  // æ–°è¦ã‚²ãƒ¼ãƒ ãƒœã‚¿ãƒ³ï¼ˆTASK-0186ã§å®Ÿè£…æ¸ˆã¿ï¼‰
  this.newGameButton = this.uiFactory.createButton({
    x: 0,
    y: 0,
    text: 'æ–°è¦ã‚²ãƒ¼ãƒ ',
    width: 200,
    height: 50,
    onClick: () => this.onNewGameClick(),
  });
  this.menuContainer.add(this.newGameButton);

  // ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³
  this.continueButton = this.uiFactory.createButton({
    x: 0,
    y: 70,
    text: 'ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼',
    width: 200,
    height: 50,
    onClick: () => this.onContinueClick(),
    disabled: !this.hasSaveData,
  });
  this.menuContainer.add(this.continueButton);

  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã®ãƒ’ãƒ³ãƒˆ
  if (!this.hasSaveData) {
    this.add.text(
      this.cameras.main.centerX,
      530,
      'ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“',
      { ...TextStyles.bodySmall, color: '#888888' }
    ).setOrigin(0.5);
  }
}

private checkSaveData(): boolean {
  // LocalStorageã«ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  try {
    const saveData = localStorage.getItem('atelier-guild-rank-save');
    return saveData !== null;
  } catch {
    return false;
  }
}

private onContinueClick(): void {
  if (!this.hasSaveData) return;

  // SEå†ç”Ÿ
  if (this.cache.audio.exists(AudioKeys.SE_CLICK)) {
    this.sound.play(AudioKeys.SE_CLICK);
  }

  // BGMåœæ­¢
  this.sound.stopAll();

  // ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
  this.eventBus.emitVoid(UIActionEvents.CONTINUE_CLICKED);

  // MainSceneã¸é·ç§»ï¼ˆãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ©ã‚°ä»˜ãï¼‰
  SceneManager.getInstance().goTo(SceneKeys.MAIN, {
    isNewGame: false,
    loadSave: true,
  });
}
```

### 2. ãƒœã‚¿ãƒ³çŠ¶æ…‹æ›´æ–°ãƒ¡ã‚½ãƒƒãƒ‰ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *UIFactoryé€£æº*

```typescript
// ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿çŠ¶æ…‹ãŒå¤‰ã‚ã£ãŸå ´åˆã®æ›´æ–°
public updateContinueButtonState(): void {
  this.hasSaveData = this.checkSaveData();
  this.uiFactory.setButtonEnabled(this.continueButton, this.hasSaveData);
}
```

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ãƒœã‚¿ãƒ³è¡¨ç¤º ğŸ”µ

**Given**: TitleSceneãŒä½œæˆã•ã‚ŒãŸ
**When**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèªã™ã‚‹
**Then**: ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒå­˜åœ¨ã™ã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãªã—ã§ç„¡åŠ¹åŒ– ğŸ”µ

**Given**: ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒãªã„
**When**: TitleSceneãŒä½œæˆã•ã‚Œã‚‹
**Then**: ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒç„¡åŠ¹çŠ¶æ…‹ã§ã‚ã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚ã‚Šã§æœ‰åŠ¹åŒ– ğŸ”µ

**Given**: ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹
**When**: TitleSceneãŒä½œæˆã•ã‚Œã‚‹
**Then**: ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹çŠ¶æ…‹ã§ã‚ã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ ğŸ”µ

**Given**: ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒæœ‰åŠ¹
**When**: ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
**Then**: CONTINUE_CLICKEDã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã‚‹

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0187` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- LocalStorageã‚¢ã‚¯ã‚»ã‚¹ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ç„¡åŠ¹çŠ¶æ…‹ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¡¨ç¾
- ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç ´ææ™‚ã®å‡¦ç†

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 2é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 2é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
