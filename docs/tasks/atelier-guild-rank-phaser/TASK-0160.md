# TASK-0160: ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ•ã‚£ã‚°å®šç¾©

**ã‚¿ã‚¹ã‚¯ID**: TASK-0160
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: DIRECT
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 1 - PhaseråŸºç›¤ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *è¨­è¨ˆæ›¸ã«æ˜ç¢ºãªè¨˜è¼‰ã‚ã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [overview.md](./overview.md)
- **è¦ä»¶å®šç¾©**: [requirements.md](../../spec/atelier-guild-rank/requirements.md)
- **è¨­è¨ˆæ–‡æ›¸**: [architecture.md](../../design/atelier-guild-rank-phaser/architecture.md)
- **ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ **: [core-systems.md](../../design/atelier-guild-rank-phaser/core-systems.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

Phaserã‚²ãƒ¼ãƒ ã®åŸºæœ¬è¨­å®šï¼ˆè§£åƒåº¦ã€ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç­‰ï¼‰ã‚’å®šç¾©ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0159
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0161, TASK-0162, TASK-0163, TASK-0164, TASK-0172

## å®Œäº†æ¡ä»¶

- [x] GameConfigå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [x] è§£åƒåº¦è¨­å®šï¼ˆ1280x720ï¼‰ãŒæ­£ã—ã„
- [x] rexUIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [x] ã‚·ãƒ¼ãƒ³ç™»éŒ²ã®ä»•çµ„ã¿ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹
- [x] ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆãŒå¯èƒ½

---

## å®Ÿè£…è©³ç´°

### 1. ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ•ã‚£ã‚°å®šç¾© ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã«æ˜è¨˜*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/config/GameConfig.ts`

```typescript
import Phaser from 'phaser';
import RexUIPlugin from 'phaser3-rex-plugins/templates/ui/ui-plugin';

export const GAME_WIDTH = 1280;
export const GAME_HEIGHT = 720;

export const createGameConfig = (scenes: Phaser.Types.Scenes.SceneType[]): Phaser.Types.Core.GameConfig => ({
  type: Phaser.AUTO,
  width: GAME_WIDTH,
  height: GAME_HEIGHT,
  parent: 'game-container',
  backgroundColor: '#1a1a2e',
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
  plugins: {
    scene: [
      {
        key: 'rexUI',
        plugin: RexUIPlugin,
        mapping: 'rexUI'
      }
    ]
  },
  scene: scenes,
  physics: {
    default: 'arcade',
    arcade: {
      debug: import.meta.env.VITE_DEBUG === 'true'
    }
  }
});
```

### 2. ã‚·ãƒ¼ãƒ³ã‚­ãƒ¼å®šæ•° ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ui-design/overview.mdã«æ˜è¨˜*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/config/SceneKeys.ts`

```typescript
export const SceneKeys = {
  BOOT: 'BootScene',
  TITLE: 'TitleScene',
  MAIN: 'MainScene',
  SHOP: 'ShopScene',
  RANK_UP: 'RankUpScene',
  GAME_OVER: 'GameOverScene',
  GAME_CLEAR: 'GameClearScene',
} as const;

export type SceneKey = typeof SceneKeys[keyof typeof SceneKeys];
```

### 3. ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç®¡ç† ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *æ¨™æº–çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/phaser/PhaserGame.ts`

```typescript
import Phaser from 'phaser';
import { createGameConfig } from './config/GameConfig';

export class PhaserGame {
  private static instance: Phaser.Game | null = null;

  public static create(scenes: Phaser.Types.Scenes.SceneType[]): Phaser.Game {
    if (this.instance) {
      this.instance.destroy(true);
    }
    this.instance = new Phaser.Game(createGameConfig(scenes));
    return this.instance;
  }

  public static getInstance(): Phaser.Game | null {
    return this.instance;
  }

  public static destroy(): void {
    if (this.instance) {
      this.instance.destroy(true);
      this.instance = null;
    }
  }
}
```

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:direct-setup TASK-0160` - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Ÿè¡Œ
2. `/tsumiki:direct-verify` - å‹•ä½œç¢ºèª

---

## æ³¨æ„äº‹é …

- è§£åƒåº¦ã¯16:9ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’ç¶­æŒ
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã¯å°†æ¥ã®èª²é¡Œã¨ã—ã¦ä¿ç•™
- ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã¯ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 3é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 3é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
