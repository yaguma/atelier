# TASK-0144: ãƒ©ãƒ³ã‚¯ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿®æ­£

**ã‚¿ã‚¹ã‚¯ID**: TASK-0144
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 2æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 6 - ãƒã‚°ä¿®æ­£ãƒ»ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *ãƒ†ã‚¹ãƒˆçµæœã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../atelier-guild-rank-overview.md)
- **è¦ä»¶å®šç¾©**: [ğŸ“‹ requirements.md](../../spec/atelier-guild-rank/requirements.md)
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture.md](../../design/atelier-guild-rank/architecture.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ranks.jsonã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨æ•´åˆæ€§ã‚’å–ã‚‹ã€‚ç¾åœ¨13ä»¶ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã‚‹ä¸»è¦åŸå› ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: ãªã—
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0145, TASK-0146

## å®Œäº†æ¡ä»¶

- [ ] ranks.jsonã«`maxPromotionGauge`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ï¼ˆç¾åœ¨ã®`requiredContribution`ã®å€¤ã‚’ä½¿ç”¨ï¼‰
- [ ] Sãƒ©ãƒ³ã‚¯ã®`dayLimit`ã‚’é©åˆ‡ãªå€¤ï¼ˆ999ã¾ãŸã¯-1ã§ç„¡åˆ¶é™ã‚’è¡¨ç¾ï¼‰ã«ä¿®æ­£
- [ ] RankMaster.test.tsã®4ä»¶ã®ãƒ†ã‚¹ãƒˆãŒé€šé
- [ ] æ—¢å­˜ã®ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£å¸¸ã«å‹•ä½œ

---

## å®Ÿè£…è©³ç´°

### 1. ranks.jsonã®ä¿®æ­£ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ†ã‚¹ãƒˆçµæœRankMaster.test.tsã‚ˆã‚Šæ˜ç¢º*

**ä¿®æ­£å†…å®¹**:
- `requiredContribution` â†’ `maxPromotionGauge` ã«ãƒªãƒãƒ¼ãƒ 
- Sãƒ©ãƒ³ã‚¯ã® `dayLimit: 0` â†’ `dayLimit: 999`ï¼ˆã¾ãŸã¯ç„¡åˆ¶é™ã‚’è¡¨ã™å€¤ï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `atelier-guild-rank-html/data/master/ranks.json`

### 2. å‹å®šç¾©ã¨ã®æ•´åˆæ€§ç¢ºèª ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *src/domain/rank/Rank.tså‚ç…§*

IGuildRankã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«åˆã‚ã›ã¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’çµ±ä¸€:
```typescript
export interface IGuildRank {
  id: GuildRank;
  name: string;
  maxPromotionGauge: number;  // æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æœ€å¤§å€¤
  dayLimit: number;           // åˆ¶é™æ—¥æ•°ï¼ˆæ­£ã®æ•°ï¼‰
  specialRules: ISpecialRule[];
  promotionTest: IPromotionTest | null;
  unlockedGatheringCards: string[];
  unlockedRecipeCards: string[];
}
```

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *RankMaster.test.ts:18-29ã‚ˆã‚Š*

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/domain/RankMaster.test.ts`

- maxPromotionGaugeãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª
- dayLimitãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: å€¤ã®æ¤œè¨¼ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *RankMaster.test.ts:48-66ã‚ˆã‚Š*

- æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æœ€å¤§å€¤ãŒæ­£ã®æ•°ã§ã‚ã‚‹
- åˆ¶é™æ—¥æ•°ãŒæ­£ã®æ•°ã§ã‚ã‚‹
- ãƒ©ãƒ³ã‚¯ãŒä¸ŠãŒã‚‹ã»ã©æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æœ€å¤§å€¤ãŒå¢—åŠ ã™ã‚‹å‚¾å‘

---

## å®Ÿè£…æ‰‹é †

1. `/tsumiki:tdd-requirements TASK-0144` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åå¤‰æ›´ã«ã‚ˆã‚Šã€ranks.jsonã‚’èª­ã¿è¾¼ã‚€å…¨ã¦ã®ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§
- æ—¢å­˜ã®ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã¨ã®äº’æ›æ€§ã‚’ç¢ºèª

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 4é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 4é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
