# TASK-0060: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æ•´ç†

**ã‚¿ã‚¹ã‚¯ID**: TASK-0060
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: DIRECT
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 7 - Presentationå±¤ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»çµæœã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../overview.md)
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture-overview.md](../../design/atelier-guild-rank/architecture-overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

Presentationå±¤ã®é‡è¤‡ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ•´ç†ãƒ»çµ±åˆã™ã‚‹ã€‚`/scenes`ã¨`/ui/scenes`ã®é‡è¤‡ã‚’è§£æ¶ˆã—ã€æ˜ç¢ºãªè²¬å‹™åˆ†é›¢ã«åŸºã¥ã„ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ç¢ºç«‹ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0055](TASK-0055.md), [TASK-0056](TASK-0056.md), [TASK-0057](TASK-0057.md), [TASK-0058](TASK-0058.md)
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: ãªã—ï¼ˆPhase 7æœ€çµ‚ã‚¿ã‚¹ã‚¯ï¼‰

## å®Œäº†æ¡ä»¶

- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãŒçµ±ä¸€ã•ã‚Œã¦ã„ã‚‹
- [ ] é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ãŒè§£æ¶ˆã•ã‚Œã¦ã„ã‚‹
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒå…¨ã¦æ›´æ–°ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šéã™ã‚‹
- [ ] ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹

---

## å®Ÿè£…è©³ç´°

### 1. ç¾çŠ¶ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ åˆ†æ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»çµæœ*

ç¾åœ¨ã®å•é¡Œç‚¹ï¼š
```
src/presentation/
â”œâ”€â”€ scenes/                    â† Phaserã‚·ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ BootScene.ts
â”‚   â”œâ”€â”€ TitleScene.ts          â† é‡è¤‡
â”‚   â”œâ”€â”€ MainScene.ts
â”‚   â”œâ”€â”€ GameOverScene.ts
â”‚   â””â”€â”€ GameClearScene.ts
â””â”€â”€ ui/
    â”œâ”€â”€ scenes/                â† UIã‚·ãƒ¼ãƒ³ï¼ˆé‡è¤‡ï¼‰
    â”‚   â”œâ”€â”€ RankUpScene.ts     â† é‡è¤‡
    â”‚   â”œâ”€â”€ ShopScene.ts       â† é‡è¤‡
    â”‚   â””â”€â”€ TitleScene.ts      â† é‡è¤‡
    â”œâ”€â”€ components/
    â”œâ”€â”€ phases/
    â””â”€â”€ main/
```

### 2. æ–°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è¨­è¨ˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Clean Architectureã«åŸºã¥ãæ¨æ¸¬*

ææ¡ˆã™ã‚‹çµ±åˆæ§‹é€ ï¼š
```
src/presentation/
â”œâ”€â”€ scenes/                    â† å…¨Phaserã‚·ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ BootScene.ts
â”‚   â”œâ”€â”€ TitleScene.ts
â”‚   â”œâ”€â”€ MainScene.ts
â”‚   â”œâ”€â”€ ShopScene.ts
â”‚   â”œâ”€â”€ RankUpScene.ts
â”‚   â”œâ”€â”€ GameOverScene.ts
â”‚   â”œâ”€â”€ GameClearScene.ts
â”‚   â””â”€â”€ components/            â† ã‚·ãƒ¼ãƒ³å›ºæœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ title/
â”‚       â”‚   â”œâ”€â”€ TitleLogo.ts
â”‚       â”‚   â”œâ”€â”€ TitleMenu.ts
â”‚       â”‚   â””â”€â”€ SaveSlotSelector.ts
â”‚       â”œâ”€â”€ shop/
â”‚       â”‚   â”œâ”€â”€ ShopHeader.ts
â”‚       â”‚   â”œâ”€â”€ ShopItemList.ts
â”‚       â”‚   â””â”€â”€ ShopPurchaseDialog.ts
â”‚       â””â”€â”€ rankup/
â”‚           â”œâ”€â”€ RankUpHeader.ts
â”‚           â”œâ”€â”€ RankUpRequirements.ts
â”‚           â””â”€â”€ RankUpTestPanel.ts
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ components/            â† å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Button.ts
â”‚   â”‚   â”œâ”€â”€ CardUI.ts
â”‚   â”‚   â”œâ”€â”€ Dialog.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ phases/                â† MainSceneãƒ•ã‚§ãƒ¼ã‚ºUI
â”‚   â”‚   â”œâ”€â”€ QuestAcceptPhaseUI.ts
â”‚   â”‚   â”œâ”€â”€ GatheringPhaseUI.ts
â”‚   â”‚   â”œâ”€â”€ AlchemyPhaseUI.ts
â”‚   â”‚   â”œâ”€â”€ DeliveryPhaseUI.ts
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”œâ”€â”€ main/                  â† MainSceneå…±é€šUI
â”‚   â”‚   â”œâ”€â”€ HeaderUI.ts
â”‚   â”‚   â”œâ”€â”€ SidebarUI.ts
â”‚   â”‚   â””â”€â”€ FooterUI.ts
â”‚   â””â”€â”€ utils/                 â† UIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â”œâ”€â”€ UIBackgroundBuilder.ts
â”‚       â”œâ”€â”€ HoverAnimationMixin.ts
â”‚       â”œâ”€â”€ BorderLineFactory.ts
â”‚       â””â”€â”€ AnimationPresets.ts
â”œâ”€â”€ types/                     â† å‹å®šç¾©
â”‚   â””â”€â”€ rexui.d.ts
â””â”€â”€ theme.ts                   â† ãƒ†ãƒ¼ãƒå®šæ•°
```

### 3. ç§»è¡Œæ‰‹é † ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *æ¨™æº–çš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ‰‹é †*

#### Step 1: æ–°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
```bash
mkdir -p src/presentation/scenes/components/{title,shop,rankup}
```

#### Step 2: ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ï¼ˆui/scenes â†’ scenesï¼‰
```bash
# RankUpScene.tsã®çµ±åˆ
mv src/presentation/ui/scenes/RankUpScene.ts src/presentation/scenes/RankUpScene.ts

# ShopScene.tsã®çµ±åˆ
mv src/presentation/ui/scenes/ShopScene.ts src/presentation/scenes/ShopScene.ts

# é‡è¤‡TitleScene.tsã®å‰Šé™¤ï¼ˆå°ã•ã„æ–¹ã‚’å‰Šé™¤ï¼‰
rm src/presentation/scenes/TitleScene.ts  # æ—§ç‰ˆã‚’å‰Šé™¤
mv src/presentation/ui/scenes/TitleScene.ts src/presentation/scenes/TitleScene.ts
```

#### Step 3: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•
```bash
# TASK-0055ã€œ0058ã§ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é©åˆ‡ãªå ´æ‰€ã«é…ç½®
mv src/presentation/ui/scenes/components/RankUp*.ts src/presentation/scenes/components/rankup/
mv src/presentation/ui/scenes/components/Shop*.ts src/presentation/scenes/components/shop/
mv src/presentation/ui/scenes/components/Title*.ts src/presentation/scenes/components/title/
```

#### Step 4: ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤
```bash
rmdir src/presentation/ui/scenes
```

### 4. ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹æ›´æ–° ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä½œæ¥­*

**æ›´æ–°å¯¾è±¡**:
- å…¨ã‚·ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
- DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®š
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
- index.tsã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

```typescript
// Before
import { RankUpScene } from '@presentation/ui/scenes/RankUpScene';

// After
import { RankUpScene } from '@presentation/scenes/RankUpScene';
```

### 5. ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ç¢ºèªãƒ»æ›´æ–° ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç¢ºèªå¯èƒ½*

**tsconfig.json**:
```json
{
  "compilerOptions": {
    "paths": {
      "@presentation/*": ["src/presentation/*"],
      "@presentation/scenes/*": ["src/presentation/scenes/*"],
      "@presentation/ui/*": ["src/presentation/ui/*"]
    }
  }
}
```

**vite.config.ts**:
```typescript
resolve: {
  alias: {
    '@presentation': path.resolve(__dirname, './src/presentation'),
  },
},
```

### 6. å‰Šé™¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰æ¨æ¸¬*

| ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|------|
| `src/presentation/ui/scenes/` | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªçµ±åˆã«ã‚ˆã‚Šä¸è¦ |
| å¤ã„TitleScene.ts | æ–°ç‰ˆã«çµ±åˆ |
| é‡è¤‡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | çµ±åˆã«ã‚ˆã‚Šä¸è¦ |

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®æ¤œè¨¼ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§æ¤œè¨¼*

**Given**: æ›´æ–°ã•ã‚ŒãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹
**When**: TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
**Then**: ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: ãƒ“ãƒ«ãƒ‰æ¤œè¨¼ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã§æ¤œè¨¼*

**Given**: æ›´æ–°ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
**When**: `pnpm build`ã‚’å®Ÿè¡Œ
**Then**: ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: æ—¢å­˜ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã§æ¤œè¨¼*

**Given**: æ›´æ–°ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
**When**: `pnpm test`ã‚’å®Ÿè¡Œ
**Then**: å…¨ãƒ†ã‚¹ãƒˆãŒé€šéã™ã‚‹

---

## çµ±åˆãƒ†ã‚¹ãƒˆè¦ä»¶

### çµ±åˆãƒ†ã‚¹ãƒˆ1: ã‚·ãƒ¼ãƒ³é·ç§» ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**ãƒ†ã‚¹ãƒˆå†…å®¹**: å…¨ã‚·ãƒ¼ãƒ³é–“ã®é·ç§»ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
**æœŸå¾…çµæœ**: Title â†’ Main â†’ Shop â†’ RankUp â†’ GameOver/GameClear ã®é·ç§»ãŒæ­£å¸¸

---

## å®Ÿè£…æ‰‹é †

### DIRECTã‚¿ã‚¹ã‚¯ã®å ´åˆ

1. `/tsumiki:direct-setup` - ç›´æ¥å®Ÿè£…ãƒ»è¨­å®š
2. `/tsumiki:direct-verify` - å‹•ä½œç¢ºèªãƒ»å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•å‰ã«å¿…ãšgitã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã™ã‚‹
- ç§»å‹•ã¯ã‚¢ãƒˆãƒŸãƒƒã‚¯ã«è¡Œã„ã€ä¸­é–“çŠ¶æ…‹ã§ãƒ“ãƒ«ãƒ‰ãŒå£Šã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹
- CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ãƒ‘ã‚¹è¨­å®šã‚‚ç¢ºèªã™ã‚‹
- IDEã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚‹

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

### é …ç›®åˆ¥ä¿¡é ¼æ€§

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 2 | 4 | 0 | 6 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 3 | 0 | 0 | 3 |
| çµ±åˆãƒ†ã‚¹ãƒˆ | 0 | 1 | 0 | 1 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 10é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 5é …ç›® (50%)
- ğŸŸ¡ **é»„ä¿¡å·**: 5é …ç›® (50%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ªï¼ˆæ¨™æº–çš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä½œæ¥­ï¼‰
