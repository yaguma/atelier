# TASK-0055: RankUpSceneãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**ã‚¿ã‚¹ã‚¯ID**: TASK-0055
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 7 - Presentationå±¤ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»çµæœã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../overview.md)
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture-overview.md](../../design/atelier-guild-rank/architecture-overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

1,011è¡Œã®RankUpScene.tsã‚’è²¬å‹™ã”ã¨ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã™ã‚‹ã€‚anyå‹ã‚’é©åˆ‡ãªå‹å®šç¾©ã«ç½®ãæ›ãˆã€å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’æ´»ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰é‡è¤‡ã‚’å‰Šæ¸›ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0053](TASK-0053.md), [TASK-0054](TASK-0054.md)
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0059](TASK-0059.md), [TASK-0060](TASK-0060.md)

## å®Œäº†æ¡ä»¶

- [ ] RankUpScene.tsãŒ400è¡Œä»¥ä¸‹ã«ãªã£ã¦ã„ã‚‹
- [ ] 3ã¤ä»¥ä¸Šã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹
- [ ] anyå‹ãŒå…¨ã¦é©åˆ‡ãªå‹ã«ç½®ãæ›ã‚ã£ã¦ã„ã‚‹
- [ ] å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆTASK-0053, 0054ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šéã™ã‚‹
- [ ] æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ80%ä»¥ä¸Š

---

## å®Ÿè£…è©³ç´°

### 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²è¨ˆç”» ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

ç¾åœ¨ã®1,011è¡Œã‚’ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã™ã‚‹ï¼š

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ | æ¨å®šè¡Œæ•° |
|---------------|------|---------|
| RankUpScene.ts | ã‚·ãƒ¼ãƒ³ç®¡ç†ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ | 200è¡Œ |
| RankUpHeader.ts | ãƒ˜ãƒƒãƒ€ãƒ¼è¡¨ç¤ºï¼ˆç¾åœ¨ãƒ©ãƒ³ã‚¯ãƒ»ç›®æ¨™ï¼‰ | 150è¡Œ |
| RankUpRequirements.ts | æ˜‡æ ¼æ¡ä»¶ä¸€è¦§è¡¨ç¤º | 200è¡Œ |
| RankUpTestPanel.ts | è©¦é¨“é–‹å§‹ãƒ»çµæœè¡¨ç¤º | 200è¡Œ |
| RankUpRewards.ts | å ±é…¬ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º | 150è¡Œ |

### 2. RankUpScene.tsï¼ˆãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³ï¼‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/ui/scenes/RankUpScene.ts`

```typescript
import { RankUpHeader } from './components/RankUpHeader';
import { RankUpRequirements } from './components/RankUpRequirements';
import { RankUpTestPanel } from './components/RankUpTestPanel';
import { RankUpRewards } from './components/RankUpRewards';

export class RankUpScene extends Phaser.Scene {
  private header: RankUpHeader;
  private requirements: RankUpRequirements;
  private testPanel: RankUpTestPanel;
  private rewards: RankUpRewards;

  // rexUIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å‹å®šç¾©
  private rexUI: RexUIPlugin;

  create(): void {
    this.initializeComponents();
    this.setupEventListeners();
    this.updateDisplay();
  }

  private initializeComponents(): void {
    this.header = new RankUpHeader(this);
    this.requirements = new RankUpRequirements(this);
    this.testPanel = new RankUpTestPanel(this);
    this.rewards = new RankUpRewards(this);
  }

  // ... çµ±åˆãƒ­ã‚¸ãƒƒã‚¯
}
```

### 3. RankUpHeader ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/ui/scenes/components/RankUpHeader.ts`

```typescript
import { Colors } from '@presentation/theme';
import { UIBackgroundBuilder } from '@presentation/ui/utils';

export class RankUpHeader {
  private scene: Phaser.Scene;
  private container: Phaser.GameObjects.Container;

  constructor(scene: Phaser.Scene) {
    this.scene = scene;
    this.create();
  }

  private create(): void {
    const background = new UIBackgroundBuilder(this.scene)
      .setPosition(0, 0)
      .setSize(800, 100)
      .setFill(Colors.background.primary)
      .build();

    // ãƒ˜ãƒƒãƒ€ãƒ¼UIæ§‹ç¯‰
  }

  updateRank(currentRank: string, targetRank: string): void {
    // ãƒ©ãƒ³ã‚¯è¡¨ç¤ºæ›´æ–°
  }
}
```

### 4. anyå‹ã®ç½®ãæ›ãˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

ç¾åœ¨ã®anyå‹ã‚’é©åˆ‡ãªå‹ã«ç½®ãæ›ãˆã‚‹ï¼š

```typescript
// Before
private startTestButton: any;
private backButton: any;
private rexUI: any;

// After
import type { RexUIPlugin } from '@presentation/types/rexui';
import type { Button } from '@presentation/ui/components/Button';

private startTestButton: Phaser.GameObjects.Container;
private backButton: Phaser.GameObjects.Container;
private rexUI: RexUIPlugin;
```

### 5. å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ´»ç”¨ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *TASK-0053, TASK-0054ã§ä½œæˆæ¸ˆã¿*

```typescript
import { Colors, AnimationPresets } from '@presentation/theme';
import { UIBackgroundBuilder, applyHoverAnimation } from '@presentation/ui/utils';

// èƒŒæ™¯ä½œæˆ
const bg = new UIBackgroundBuilder(this)
  .setFill(Colors.background.primary)
  .setBorder(Colors.border.primary)
  .build();

// ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
applyHoverAnimation(button, this, AnimationPresets.button.hover);
```

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: RankUpSceneã®åˆæœŸåŒ– ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: RankUpSceneã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: create()ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
**Then**: å…¨ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã‚‹

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/presentation/scenes/RankUpScene.test.ts`

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: RankUpHeaderè¡¨ç¤º ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: RankUpHeaderã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: updateRank()ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
**Then**: ãƒ©ãƒ³ã‚¯è¡¨ç¤ºãŒæ›´æ–°ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: RankUpRequirementsä¸€è¦§ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: RankUpRequirementsã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: æ¡ä»¶ãƒªã‚¹ãƒˆãŒæ¸¡ã•ã‚Œã‚‹
**Then**: æ¡ä»¶ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: RankUpTestPanelæ“ä½œ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: RankUpTestPanelã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: è©¦é¨“é–‹å§‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
**Then**: onStartTestã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹

---

## çµ±åˆãƒ†ã‚¹ãƒˆè¦ä»¶

### çµ±åˆãƒ†ã‚¹ãƒˆ1: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“é€£æº ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**ãƒ†ã‚¹ãƒˆå†…å®¹**: åˆ†å‰²å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ­£ã—ãé€£æºã™ã‚‹ã“ã¨
**æœŸå¾…çµæœ**: æ˜‡æ ¼è©¦é¨“ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ

1. `/tsumiki:tdd-requirements TASK-0055` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- æ—¢å­˜ã®å‹•ä½œã‚’å£Šã•ãªã„ã‚ˆã†ã€æ®µéšçš„ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²å¾Œã‚‚ã‚·ãƒ¼ãƒ³é–“ã®é·ç§»ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- rexUIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®äº’æ›æ€§ã‚’ç¶­æŒã™ã‚‹

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

### é …ç›®åˆ¥ä¿¡é ¼æ€§

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 1 | 4 | 0 | 5 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 0 | 4 | 0 | 4 |
| çµ±åˆãƒ†ã‚¹ãƒˆ | 0 | 1 | 0 | 1 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 10é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 1é …ç›® (10%)
- ğŸŸ¡ **é»„ä¿¡å·**: 9é …ç›® (90%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: è¦æ”¹å–„ï¼ˆå®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰æ§‹é€ ã«åŸºã¥ãè©³ç´°è¨­è¨ˆãŒå¿…è¦ï¼‰
