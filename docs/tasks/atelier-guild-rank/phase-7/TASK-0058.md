# TASK-0058: TitleSceneãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**ã‚¿ã‚¹ã‚¯ID**: TASK-0058
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 7 - Presentationå±¤ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»çµæœã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../overview.md)
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture-overview.md](../../design/atelier-guild-rank/architecture-overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

819è¡Œã®TitleScene.tsã‚’è²¬å‹™ã”ã¨ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã™ã‚‹ã€‚ã‚¿ã‚¤ãƒˆãƒ«ãƒ­ã‚´ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆé¸æŠãªã©ã®æ©Ÿèƒ½ã‚’ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†é›¢ã—ã€å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’æ´»ç”¨ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0053](TASK-0053.md), [TASK-0054](TASK-0054.md)
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0060](TASK-0060.md)

## å®Œäº†æ¡ä»¶

- [ ] TitleScene.tsãŒ400è¡Œä»¥ä¸‹ã«ãªã£ã¦ã„ã‚‹
- [ ] 3ã¤ä»¥ä¸Šã®ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹
- [ ] å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆTASK-0053, 0054ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šéã™ã‚‹
- [ ] æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ80%ä»¥ä¸Š

---

## å®Ÿè£…è©³ç´°

### 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²è¨ˆç”» ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

ç¾åœ¨ã®819è¡Œã‚’ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²ã™ã‚‹ï¼š

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ | æ¨å®šè¡Œæ•° |
|---------------|------|---------|
| TitleScene.ts | ã‚·ãƒ¼ãƒ³ç®¡ç†ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ | 200è¡Œ |
| TitleLogo.ts | ã‚¿ã‚¤ãƒˆãƒ«ãƒ­ã‚´è¡¨ç¤ºãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | 100è¡Œ |
| TitleMenu.ts | ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆé–‹å§‹/ç¶šã/è¨­å®šï¼‰ | 150è¡Œ |
| SaveSlotSelector.ts | ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆé¸æŠUI | 200è¡Œ |
| SettingsPanel.ts | è¨­å®šç”»é¢ | 150è¡Œ |

### 2. TitleScene.tsï¼ˆãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³ï¼‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/scenes/TitleScene.ts`

```typescript
import { TitleLogo } from './components/TitleLogo';
import { TitleMenu } from './components/TitleMenu';
import { SaveSlotSelector } from './components/SaveSlotSelector';
import { SettingsPanel } from './components/SettingsPanel';

export class TitleScene extends Phaser.Scene {
  private logo: TitleLogo;
  private menu: TitleMenu;
  private saveSlotSelector: SaveSlotSelector;
  private settingsPanel: SettingsPanel;

  create(): void {
    this.createBackground();
    this.initializeComponents();
    this.playIntroAnimation();
  }

  private initializeComponents(): void {
    this.logo = new TitleLogo(this);
    this.menu = new TitleMenu(this);
    this.saveSlotSelector = new SaveSlotSelector(this);
    this.settingsPanel = new SettingsPanel(this);

    this.setupMenuCallbacks();
  }

  private setupMenuCallbacks(): void {
    this.menu.onNewGame(() => this.saveSlotSelector.show('new'));
    this.menu.onContinue(() => this.saveSlotSelector.show('load'));
    this.menu.onSettings(() => this.settingsPanel.show());
  }

  private playIntroAnimation(): void {
    this.logo.playIntro();
    this.menu.fadeIn();
  }
}
```

### 3. TitleLogo ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/scenes/components/TitleLogo.ts`

```typescript
import { AnimationPresets } from '@presentation/ui/utils/AnimationPresets';

export class TitleLogo {
  private scene: Phaser.Scene;
  private container: Phaser.GameObjects.Container;
  private logoImage: Phaser.GameObjects.Image;
  private subtitleText: Phaser.GameObjects.Text;

  constructor(scene: Phaser.Scene) {
    this.scene = scene;
    this.create();
  }

  private create(): void {
    this.container = this.scene.add.container(
      this.scene.cameras.main.centerX,
      200
    );

    this.logoImage = this.scene.add.image(0, 0, 'title-logo');
    this.subtitleText = this.scene.add.text(0, 100, 'ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ãƒ‡ãƒƒã‚­æ§‹ç¯‰RPG', {
      fontSize: '24px',
      color: '#ffffff',
    });

    this.container.add([this.logoImage, this.subtitleText]);
  }

  playIntro(): void {
    this.container.setAlpha(0);
    this.container.setScale(0.8);

    this.scene.tweens.add({
      targets: this.container,
      alpha: 1,
      scale: 1,
      duration: 800,
      ease: 'Back.easeOut',
    });
  }
}
```

### 4. TitleMenu ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/scenes/components/TitleMenu.ts`

```typescript
import { Colors } from '@presentation/theme';
import { UIBackgroundBuilder, applyHoverAnimation } from '@presentation/ui/utils';

export class TitleMenu {
  private scene: Phaser.Scene;
  private container: Phaser.GameObjects.Container;
  private buttons: Map<string, Phaser.GameObjects.Container> = new Map();

  constructor(scene: Phaser.Scene) {
    this.scene = scene;
    this.create();
  }

  private create(): void {
    this.container = this.scene.add.container(
      this.scene.cameras.main.centerX,
      this.scene.cameras.main.centerY + 100
    );

    this.createButton('newGame', 'ã¯ã˜ã‚ã‹ã‚‰', 0);
    this.createButton('continue', 'ã¤ã¥ãã‹ã‚‰', 70);
    this.createButton('settings', 'è¨­å®š', 140);
  }

  private createButton(key: string, label: string, yOffset: number): void {
    const bg = new UIBackgroundBuilder(this.scene)
      .setSize(200, 50)
      .setFill(Colors.ui.button.normal)
      .setBorder(Colors.border.primary)
      .build();

    const text = this.scene.add.text(0, 0, label, {
      fontSize: '20px',
      color: '#ffffff',
    }).setOrigin(0.5);

    const button = this.scene.add.container(0, yOffset, [bg, text]);
    applyHoverAnimation(button, this.scene);

    this.buttons.set(key, button);
    this.container.add(button);
  }

  onNewGame(callback: () => void): void {
    this.buttons.get('newGame')?.setInteractive().on('pointerdown', callback);
  }

  onContinue(callback: () => void): void {
    this.buttons.get('continue')?.setInteractive().on('pointerdown', callback);
  }

  onSettings(callback: () => void): void {
    this.buttons.get('settings')?.setInteractive().on('pointerdown', callback);
  }

  fadeIn(): void {
    this.container.setAlpha(0);
    this.scene.tweens.add({
      targets: this.container,
      alpha: 1,
      duration: 500,
      delay: 500,
    });
  }
}
```

### 5. SaveSlotSelector ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹èª¿æŸ»ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/scenes/components/SaveSlotSelector.ts`

```typescript
export class SaveSlotSelector {
  private scene: Phaser.Scene;
  private container: Phaser.GameObjects.Container;
  private mode: 'new' | 'load' = 'new';

  show(mode: 'new' | 'load'): void {
    this.mode = mode;
    this.updateSlots();
    this.container.setVisible(true);
  }

  hide(): void {
    this.container.setVisible(false);
  }

  onSlotSelect(callback: (slotIndex: number) => void): void {
    // ã‚¹ãƒ­ãƒƒãƒˆé¸æŠã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
  }
}
```

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: TitleSceneã®åˆæœŸåŒ– ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: TitleSceneã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: create()ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
**Then**: å…¨ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: TitleLogoã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: TitleLogoã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: playIntro()ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
**Then**: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³+ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†ç”Ÿã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: TitleMenuãƒœã‚¿ãƒ³æ“ä½œ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: TitleMenuã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: ã€Œã¯ã˜ã‚ã‹ã‚‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
**Then**: onNewGameã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: SaveSlotSelectorè¡¨ç¤º ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**Given**: SaveSlotSelectorã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
**When**: show('new')ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
**Then**: æ–°è¦ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã§ã‚¹ãƒ­ãƒƒãƒˆé¸æŠUIãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## çµ±åˆãƒ†ã‚¹ãƒˆè¦ä»¶

### çµ±åˆãƒ†ã‚¹ãƒˆ1: ã‚¿ã‚¤ãƒˆãƒ«â†’ã‚²ãƒ¼ãƒ é–‹å§‹ãƒ•ãƒ­ãƒ¼ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *å¦¥å½“ãªæ¨æ¸¬*

**ãƒ†ã‚¹ãƒˆå†…å®¹**: ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã‹ã‚‰ã‚²ãƒ¼ãƒ é–‹å§‹ã¾ã§ã®ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨
**æœŸå¾…çµæœ**: ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆé¸æŠå¾Œã€MainSceneã«é·ç§»ã™ã‚‹

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ

1. `/tsumiki:tdd-requirements TASK-0058` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- ã‚¤ãƒ³ãƒˆãƒ­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç¶­æŒã™ã‚‹
- ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿/æ›¸ãè¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ã¯ãƒªãƒã‚¸ãƒˆãƒªã«å§”è­²ã™ã‚‹
- ã‚·ãƒ¼ãƒ³é·ç§»ã®æ—¢å­˜å‹•ä½œã‚’å£Šã•ãªã„

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

### é …ç›®åˆ¥ä¿¡é ¼æ€§

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 0 | 5 | 0 | 5 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 0 | 4 | 0 | 4 |
| çµ±åˆãƒ†ã‚¹ãƒˆ | 0 | 1 | 0 | 1 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 10é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 0é …ç›® (0%)
- ğŸŸ¡ **é»„ä¿¡å·**: 10é …ç›® (100%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: è¦æ”¹å–„ï¼ˆå®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰æ§‹é€ ã«åŸºã¥ãè©³ç´°è¨­è¨ˆãŒå¿…è¦ï¼‰
