# TASK-0023: æŽ¡å–ãƒ•ã‚§ãƒ¼ã‚ºUIï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆæŽ¡å–ï¼‰

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**ãƒ•ã‚§ãƒ¼ã‚º**: 3 - UIå±¤
**è¦‹ç©æ™‚é–“**: 4æ™‚é–“ï¼ˆåŠæ—¥ï¼‰
**ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0020, TASK-0021, TASK-0011

---

## 1. ã‚¿ã‚¹ã‚¯æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **ã‚¿ã‚¹ã‚¯ID** | TASK-0023 |
| **ã‚¿ã‚¹ã‚¯å** | æŽ¡å–ãƒ•ã‚§ãƒ¼ã‚ºUIï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆæŽ¡å–ï¼‰ |
| **ã‚«ãƒ†ã‚´ãƒª** | UIå±¤ |
| **å„ªå…ˆåº¦** | æœ€é«˜ |
| **æ‹…å½“ãƒ¬ã‚¤ãƒ¤ãƒ¼** | Presentation |

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ðŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«è¨˜è¼‰
- ðŸŸ¡ **é»„ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰å¦¥å½“ãªæŽ¨æ¸¬
- ðŸ”´ **èµ¤ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«ãªã„æŽ¨æ¸¬

---

## 2. å®Ÿè£…å†…å®¹

### 2.1 ãƒ‰ãƒ©ãƒ•ãƒˆæŽ¡å–ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ðŸ”µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ðŸŒ¿ æŽ¡å–ãƒ•ã‚§ãƒ¼ã‚º                              â”‚
â”‚                                                                 â”‚
â”‚   æ®‹ã‚Šé¸æŠžå›žæ•°: 3/3                                             â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ ðŸŒ¿ è–¬è‰ â”‚  â”‚ ðŸª¨ é‰„é‰± â”‚  â”‚ ðŸ„ ã‚­ãƒŽã‚³â”‚                        â”‚
â”‚   â”‚  Cå“è³ª  â”‚  â”‚  Bå“è³ª  â”‚  â”‚  Då“è³ª  â”‚                        â”‚
â”‚   â”‚ [é¸æŠž]  â”‚  â”‚ [é¸æŠž]  â”‚  â”‚ [é¸æŠž]  â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ ðŸ’Ž å®çŸ³ â”‚  â”‚ ðŸ¦´ éª¨   â”‚  â”‚ ðŸŒ¸ èŠ±   â”‚                        â”‚
â”‚   â”‚  Aå“è³ª  â”‚  â”‚  Cå“è³ª  â”‚  â”‚  Bå“è³ª  â”‚                        â”‚
â”‚   â”‚ [é¸æŠž]  â”‚  â”‚ [é¸æŠž]  â”‚  â”‚ [é¸æŠž]  â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â”‚   ç²å¾—ç´ æ: [è–¬è‰C] [é‰„é‰±B]                                      â”‚
â”‚                                                                 â”‚
â”‚                                            [æŽ¡å–çµ‚äº†]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 GatheringPhaseUI ðŸ”µ

`src/presentation/ui/phases/GatheringPhaseUI.ts`:

```typescript
export class GatheringPhaseUI extends BaseComponent {
  private materialPool: MaterialSlotUI[] = [];
  private gatheredDisplay!: Phaser.GameObjects.Container;
  private remainingText!: Phaser.GameObjects.Text;

  constructor(scene: Phaser.Scene, private gatheringService: IGatheringService) {
    super(scene, 160, 80);
  }

  create(): void {
    this.createTitle();
    this.createRemainingCounter();
    this.createMaterialPool();
    this.createGatheredDisplay();
    this.createEndButton();
  }

  private createMaterialPool(): void {
    // 6ã¤ã®ç´ æã‚¹ãƒ­ãƒƒãƒˆã‚’2è¡Œ3åˆ—ã§é…ç½®
  }

  updatePool(pool: MaterialPool): void {
    // ãƒ—ãƒ¼ãƒ«è¡¨ç¤ºã‚’æ›´æ–°
    this.materialPool.forEach((slot, index) => {
      if (index < pool.materials.length) {
        slot.setMaterial(pool.materials[index]);
        slot.setInteractive(true);
      } else {
        slot.setEmpty();
        slot.setInteractive(false);
      }
    });

    this.remainingText.setText(
      `æ®‹ã‚Šé¸æŠžå›žæ•°: ${pool.maxSelections - pool.currentSelections}/${pool.maxSelections}`
    );
  }

  private onMaterialSelect(index: number): void {
    const material = this.gatheringService.selectMaterial(index);
    this.addToGathered(material);
    this.updatePool(this.gatheringService.getCurrentPool());

    // é¸æŠžä¸Šé™ãƒã‚§ãƒƒã‚¯
    if (this.gatheringService.getRemainingSelections() <= 0) {
      this.endGathering();
    }
  }
}
```

### 2.3 ç´ æã‚¹ãƒ­ãƒƒãƒˆUI ðŸ”µ

`src/presentation/ui/components/MaterialSlotUI.ts`:

- ç´ æã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º
- å“è³ªãƒãƒƒã‚¸è¡¨ç¤º
- é¸æŠžå¯èƒ½/ä¸å¯èƒ½çŠ¶æ…‹
- é¸æŠžã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 2.4 ç²å¾—ç´ æè¡¨ç¤º ðŸ”µ

- ç²å¾—ã—ãŸç´ æã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

---

## 3. å—ã‘å…¥ã‚ŒåŸºæº–

### 3.1 å¿…é ˆæ¡ä»¶ ðŸ”µ

- [ ] ç´ æãƒ—ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ç´ æã‚’é¸æŠžã§ãã‚‹
- [ ] é¸æŠžå¾Œã«ãƒ—ãƒ¼ãƒ«ãŒæ›´æ–°ã•ã‚Œã‚‹
- [ ] ç²å¾—ç´ æãŒè¡¨ç¤ºã•ã‚Œã‚‹

### 3.2 æŽ¨å¥¨æ¡ä»¶ ðŸŸ¡

- [ ] é¸æŠžã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] å“è³ªã«å¿œã˜ãŸè¦–è¦šåŠ¹æžœ

---

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 4.1 çµ±åˆãƒ†ã‚¹ãƒˆ

| ãƒ†ã‚¹ãƒˆID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæžœ |
|---------|----------|----------|
| T-0023-01 | ãƒ—ãƒ¼ãƒ«è¡¨ç¤º | 6ã¤ã®ç´ æè¡¨ç¤º |
| T-0023-02 | ç´ æé¸æŠž | ãƒ—ãƒ¼ãƒ«ã‹ã‚‰å‰Šé™¤ã€ç²å¾—ã«è¿½åŠ  |
| T-0023-03 | é¸æŠžä¸Šé™ | ä¸Šé™åˆ°é”ã§é¸æŠžä¸å¯ |
| T-0023-04 | æŽ¡å–çµ‚äº† | æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§» |

---

## 5. æˆæžœç‰©

| æˆæžœç‰© | ãƒ‘ã‚¹ |
|--------|------|
| ãƒ•ã‚§ãƒ¼ã‚ºUI | `/src/presentation/ui/phases/GatheringPhaseUI.ts` |
| ç´ æã‚¹ãƒ­ãƒƒãƒˆ | `/src/presentation/ui/components/MaterialSlotUI.ts` |

---

## é–¢é€£æ–‡æ›¸

- **æŽ¡å–ãƒ•ã‚§ãƒ¼ã‚ºè¨­è¨ˆ**: [../../design/atelier-guild-rank/ui-design/screens/gathering.md](../../design/atelier-guild-rank/ui-design/screens/gathering.md)
- **ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹è¨­è¨ˆ**: [../../design/atelier-guild-rank/game-mechanics.md](../../design/atelier-guild-rank/game-mechanics.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-16 | 1.0.0 | åˆç‰ˆä½œæˆ |
