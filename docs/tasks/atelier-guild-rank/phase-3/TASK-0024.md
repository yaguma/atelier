# TASK-0024: èª¿åˆãƒ•ã‚§ãƒ¼ã‚ºUI

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**ãƒ•ã‚§ãƒ¼ã‚º**: 3 - UIå±¤
**è¦‹ç©æ™‚é–“**: 4æ™‚é–“ï¼ˆåŠæ—¥ï¼‰
**ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0020, TASK-0021, TASK-0012

---

## 1. ã‚¿ã‚¹ã‚¯æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **ã‚¿ã‚¹ã‚¯ID** | TASK-0024 |
| **ã‚¿ã‚¹ã‚¯å** | èª¿åˆãƒ•ã‚§ãƒ¼ã‚ºUI |
| **ã‚«ãƒ†ã‚´ãƒª** | UIå±¤ |
| **å„ªå…ˆåº¦** | æœ€é«˜ |
| **æ‹…å½“ãƒ¬ã‚¤ãƒ¤ãƒ¼** | Presentation |

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. å®Ÿè£…å†…å®¹

### 2.1 èª¿åˆç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ğŸ”µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ§ª èª¿åˆãƒ•ã‚§ãƒ¼ã‚º                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚    ãƒ¬ã‚·ãƒ”ä¸€è¦§       â”‚    â”‚       èª¿åˆã‚¨ãƒªã‚¢               â”‚â”‚
â”‚  â”‚                     â”‚    â”‚                                 â”‚â”‚
â”‚  â”‚  â–¶ å›å¾©è–¬          â”‚    â”‚   ç´ æã‚¹ãƒ­ãƒƒãƒˆ:                 â”‚â”‚
â”‚  â”‚    æ¤ç‰©Ã—1          â”‚    â”‚   [   ] + [   ] + [   ]         â”‚â”‚
â”‚  â”‚                     â”‚    â”‚                                 â”‚â”‚
â”‚  â”‚  â–· çˆ†å¼¾            â”‚    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚â”‚
â”‚  â”‚    é‰±ç‰©Ã—1, ç«è–¬Ã—1   â”‚    â”‚                                 â”‚â”‚
â”‚  â”‚                     â”‚    â”‚   å®Œæˆäºˆæ¸¬: å›å¾©è–¬ (Bå“è³ª)      â”‚â”‚
â”‚  â”‚  â–· é‹¼ã®å‰£          â”‚    â”‚                                 â”‚â”‚
â”‚  â”‚    é‰±ç‰©Ã—2          â”‚    â”‚   [èª¿åˆã™ã‚‹]                    â”‚â”‚
â”‚  â”‚                     â”‚    â”‚                                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  æ‰€æŒç´ æ: [è–¬è‰C] [è–¬è‰B] [é‰„é‰±A] [èŠ±D]                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 AlchemyPhaseUI ğŸ”µ

`src/presentation/ui/phases/AlchemyPhaseUI.ts`:

```typescript
export class AlchemyPhaseUI extends BaseComponent {
  private recipeList!: ScrollablePanel;
  private materialSlots: MaterialSlotUI[] = [];
  private previewText!: Phaser.GameObjects.Text;
  private craftButton!: Button;

  private selectedRecipe: ItemMaster | null = null;
  private selectedMaterials: MaterialInstance[] = [];

  constructor(
    scene: Phaser.Scene,
    private alchemyService: IAlchemyService,
    private inventoryService: IInventoryService,
  ) {
    super(scene, 160, 80);
  }

  create(): void {
    this.createTitle();
    this.createRecipeList();
    this.createAlchemyArea();
    this.createMaterialInventory();
    this.createCraftButton();
  }

  private createRecipeList(): void {
    // èª¿åˆå¯èƒ½ãªãƒ¬ã‚·ãƒ”ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º
    const recipes = this.alchemyService.getAvailableRecipes(
      this.inventoryService.getMaterials()
    );

    // rexUIã®ScrollablePanelã§è¡¨ç¤º
  }

  private onRecipeSelect(recipe: ItemMaster): void {
    this.selectedRecipe = recipe;
    this.selectedMaterials = [];
    this.updateMaterialSlots();
    this.updatePreview();
  }

  private onMaterialDrop(slot: number, material: MaterialInstance): void {
    this.selectedMaterials[slot] = material;
    this.updatePreview();
  }

  private updatePreview(): void {
    if (!this.selectedRecipe || !this.canCraft()) {
      this.previewText.setText('ç´ æã‚’é¸æŠã—ã¦ãã ã•ã„');
      this.craftButton.setEnabled(false);
      return;
    }

    const quality = this.alchemyService.previewQuality(
      this.selectedRecipe.id,
      this.selectedMaterials
    );
    this.previewText.setText(
      `å®Œæˆäºˆæ¸¬: ${this.selectedRecipe.name} (${quality}å“è³ª)`
    );
    this.craftButton.setEnabled(true);
  }

  private onCraft(): void {
    const item = this.alchemyService.craft(
      this.selectedRecipe!.id,
      this.selectedMaterials
    );
    // ç´ ææ¶ˆè²»ã€ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ 
    this.showCraftResult(item);
    this.reset();
  }
}
```

### 2.3 ãƒ¬ã‚·ãƒ”é¸æŠãƒªã‚¹ãƒˆ ğŸ”µ

- èª¿åˆå¯èƒ½ãƒ¬ã‚·ãƒ”ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- å¿…è¦ç´ æã®è¡¨ç¤º
- é¸æŠçŠ¶æ…‹ã®å¼·èª¿

### 2.4 ç´ æãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ— ğŸŸ¡

- ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‹ã‚‰èª¿åˆã‚¹ãƒ­ãƒƒãƒˆã¸ãƒ‰ãƒ©ãƒƒã‚°
- ã‚¹ãƒ­ãƒƒãƒˆé–“ã®ç´ æå…¥ã‚Œæ›¿ãˆ
- ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§è‡ªå‹•é…ç½®

---

## 3. å—ã‘å…¥ã‚ŒåŸºæº–

### 3.1 å¿…é ˆæ¡ä»¶ ğŸ”µ

- [ ] ãƒ¬ã‚·ãƒ”ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ç´ æã‚’é…ç½®ã§ãã‚‹
- [ ] å®Œæˆå“è³ªãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œã‚‹
- [ ] èª¿åˆãŒå®Ÿè¡Œã§ãã‚‹

### 3.2 æ¨å¥¨æ¡ä»¶ ğŸŸ¡

- [ ] ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—
- [ ] èª¿åˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

---

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 4.1 çµ±åˆãƒ†ã‚¹ãƒˆ

| ãƒ†ã‚¹ãƒˆID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|---------|----------|----------|
| T-0024-01 | ãƒ¬ã‚·ãƒ”è¡¨ç¤º | èª¿åˆå¯èƒ½ãƒ¬ã‚·ãƒ”è¡¨ç¤º |
| T-0024-02 | ç´ æé…ç½® | ã‚¹ãƒ­ãƒƒãƒˆã«é…ç½® |
| T-0024-03 | å“è³ªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ | æ­£ã—ã„å“è³ªè¡¨ç¤º |
| T-0024-04 | èª¿åˆå®Ÿè¡Œ | ã‚¢ã‚¤ãƒ†ãƒ ç”Ÿæˆã€ç´ ææ¶ˆè²» |

---

## 5. æˆæœç‰©

| æˆæœç‰© | ãƒ‘ã‚¹ |
|--------|------|
| ãƒ•ã‚§ãƒ¼ã‚ºUI | `/src/presentation/ui/phases/AlchemyPhaseUI.ts` |
| ãƒ¬ã‚·ãƒ”ãƒªã‚¹ãƒˆ | `/src/presentation/ui/components/RecipeListUI.ts` |

---

## é–¢é€£æ–‡æ›¸

- **èª¿åˆãƒ•ã‚§ãƒ¼ã‚ºè¨­è¨ˆ**: [../../design/atelier-guild-rank/ui-design/screens/alchemy.md](../../design/atelier-guild-rank/ui-design/screens/alchemy.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-16 | 1.0.0 | åˆç‰ˆä½œæˆ |
