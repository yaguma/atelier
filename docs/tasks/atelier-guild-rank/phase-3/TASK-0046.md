# TASK-0046: MainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…ï¼ˆå†å®Ÿè£…ï¼‰

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-21
**ãƒ•ã‚§ãƒ¼ã‚º**: 3 - UIå±¤
**è¦‹ç©æ™‚é–“**: 4æ™‚é–“ï¼ˆåŠæ—¥ï¼‰
**ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0018, TASK-0017
**ã‚¿ã‚¤ãƒ—**: TDD

---

## 1. ã‚¿ã‚¹ã‚¯æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **ã‚¿ã‚¹ã‚¯ID** | TASK-0046 |
| **ã‚¿ã‚¹ã‚¯å** | MainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…ï¼ˆå†å®Ÿè£…ï¼‰ |
| **ã‚«ãƒ†ã‚´ãƒª** | UIå±¤ |
| **å„ªå…ˆåº¦** | æœ€é«˜ |
| **æ‹…å½“ãƒ¬ã‚¤ãƒ¤ãƒ¼** | Presentation |

### èƒŒæ™¯

TASK-0020ï¼ˆMainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰ã¯å®Œäº†ã¨ãƒãƒ¼ã‚¯ã•ã‚Œã¦ã„ãŸãŒã€å®Ÿéš›ã«ã¯MainScene.tsã¯ã‚¹ã‚¿ãƒ–å®Ÿè£…ã®ã¾ã¾ã§ã‚ã‚‹ã€‚
æœ¬ã‚¿ã‚¹ã‚¯ã¯TASK-0020ã®å†…å®¹ã‚’å†å®Ÿè£…ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. å®Ÿè£…å†…å®¹

### 2.1 MainSceneç”»é¢æ§‹æˆ ğŸ”µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ˜ãƒƒãƒ€ãƒ¼: [ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯: E] [è²¢çŒ®åº¦: 0/100] [æ‰€æŒé‡‘: 500G]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ã‚µã‚¤ãƒ‰ãƒãƒ¼â”‚     ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢                    â”‚
â”‚  â”‚          â”‚     ï¼ˆå„ãƒ•ã‚§ãƒ¼ã‚ºUIãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰        â”‚
â”‚  â”‚ ä¾é ¼å—æ³¨ â”‚                                               â”‚
â”‚  â”‚   æ¡å–   â”‚     QuestAcceptPhaseUI                        â”‚
â”‚  â”‚   èª¿åˆ   â”‚          or                                   â”‚
â”‚  â”‚   ç´å“   â”‚     GatheringPhaseUI                          â”‚
â”‚  â”‚          â”‚          or                                   â”‚
â”‚  â”‚          â”‚     AlchemyPhaseUI                            â”‚
â”‚  â”‚          â”‚          or                                   â”‚
â”‚  â”‚          â”‚     DeliveryPhaseUI                           â”‚
â”‚  â”‚          â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ•ãƒƒã‚¿ãƒ¼: [ã‚¿ãƒ¼ãƒ³: 1/30] [ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚º: ä¾é ¼å—æ³¨]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 MainSceneå®Ÿè£… ğŸ”µ

`src/presentation/scenes/MainScene.ts`:

```typescript
export class MainScene extends Phaser.Scene {
  // UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  private headerUI!: HeaderUI;
  private sidebarUI!: SidebarUI;
  private footerUI!: FooterUI;
  private contentContainer!: Phaser.GameObjects.Container;

  // ãƒ•ã‚§ãƒ¼ã‚ºUI
  private questAcceptUI!: QuestAcceptPhaseUI;
  private gatheringUI!: GatheringPhaseUI;
  private alchemyUI!: AlchemyPhaseUI;
  private deliveryUI!: DeliveryPhaseUI;

  // ã‚µãƒ¼ãƒ“ã‚¹
  private gameFlowManager!: GameFlowManager;
  private stateManager!: StateManager;

  constructor() {
    super({ key: 'MainScene' });
  }

  create(): void {
    this.initializeServices();
    this.createLayout();
    this.createPhaseUIs();
    this.subscribeToEvents();
    this.showCurrentPhase();
  }

  private initializeServices(): void {
    // ã‚µãƒ¼ãƒ“ã‚¹ã®å–å¾—ãƒ»åˆæœŸåŒ–
  }

  private createLayout(): void {
    this.createHeader();
    this.createSidebar();
    this.createFooter();
    this.createContentArea();
  }

  private createPhaseUIs(): void {
    // å„ãƒ•ã‚§ãƒ¼ã‚ºUIã‚’ä½œæˆï¼ˆéè¡¨ç¤ºçŠ¶æ…‹ï¼‰
  }

  private showPhase(phase: GamePhase): void {
    // å…¨ãƒ•ã‚§ãƒ¼ã‚ºUIã‚’éè¡¨ç¤ºã«ã—ã€æŒ‡å®šãƒ•ã‚§ãƒ¼ã‚ºã®ã¿è¡¨ç¤º
  }

  private updateHeader(): void {
    // ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã‚’æ›´æ–°ï¼ˆãƒ©ãƒ³ã‚¯ã€è²¢çŒ®åº¦ã€æ‰€æŒé‡‘ï¼‰
  }

  private updateFooter(): void {
    // ãƒ•ãƒƒã‚¿ãƒ¼æƒ…å ±ã‚’æ›´æ–°ï¼ˆã‚¿ãƒ¼ãƒ³ã€ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºï¼‰
  }
}
```

### 2.3 HeaderUI ğŸ”µ

```typescript
export class HeaderUI extends BaseComponent {
  private rankText!: Phaser.GameObjects.Text;
  private contributionText!: Phaser.GameObjects.Text;
  private goldText!: Phaser.GameObjects.Text;

  create(): void {
    // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
  }

  update(state: GameState): void {
    // è¡¨ç¤ºæ›´æ–°
  }
}
```

### 2.4 SidebarUI ğŸ”µ

```typescript
export class SidebarUI extends BaseComponent {
  private phaseButtons: Button[] = [];
  private currentPhase: GamePhase;

  create(): void {
    // ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
    // å„ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³ä½œæˆ
  }

  setCurrentPhase(phase: GamePhase): void {
    // ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
  }
}
```

### 2.5 FooterUI ğŸ”µ

```typescript
export class FooterUI extends BaseComponent {
  private turnText!: Phaser.GameObjects.Text;
  private phaseText!: Phaser.GameObjects.Text;

  create(): void {
    // ãƒ•ãƒƒã‚¿ãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
  }

  update(turn: number, maxTurn: number, phase: GamePhase): void {
    // è¡¨ç¤ºæ›´æ–°
  }
}
```

---

## 3. å—ã‘å…¥ã‚ŒåŸºæº–

### 3.1 å¿…é ˆæ¡ä»¶ ğŸ”µ

- [x] MainSceneãŒã‚¹ã‚¿ãƒ–ã§ã¯ãªãã€å®Ÿéš›ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æŒã¤
- [x] ãƒ˜ãƒƒãƒ€ãƒ¼ã«ãƒ©ãƒ³ã‚¯ãƒ»è²¢çŒ®åº¦ãƒ»æ‰€æŒé‡‘ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [x] ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«4ãƒ•ã‚§ãƒ¼ã‚ºã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹
- [x] ãƒ•ãƒƒã‚¿ãƒ¼ã«ã‚¿ãƒ¼ãƒ³æ•°ãƒ»ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [x] ãƒ•ã‚§ãƒ¼ã‚ºåˆ‡ã‚Šæ›¿ãˆæ™‚ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ãŒæ›´æ–°ã•ã‚Œã‚‹
- [x] StateManagerã®çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–ã—ã¦UIæ›´æ–°ã•ã‚Œã‚‹

### 3.2 æ¨å¥¨æ¡ä»¶ ğŸŸ¡

- [ ] ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½
- [ ] ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

---

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 4.1 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

| ãƒ†ã‚¹ãƒˆID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|---------|----------|----------|
| T-0046-01 | MainSceneåˆæœŸåŒ– | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ |
| T-0046-02 | ãƒ˜ãƒƒãƒ€ãƒ¼è¡¨ç¤º | ãƒ©ãƒ³ã‚¯ãƒ»è²¢çŒ®åº¦ãƒ»æ‰€æŒé‡‘ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0046-03 | ã‚µã‚¤ãƒ‰ãƒãƒ¼è¡¨ç¤º | 4ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0046-04 | ãƒ•ãƒƒã‚¿ãƒ¼è¡¨ç¤º | ã‚¿ãƒ¼ãƒ³ãƒ»ãƒ•ã‚§ãƒ¼ã‚ºãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| T-0046-05 | ãƒ•ã‚§ãƒ¼ã‚ºåˆ‡æ›¿ | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæ­£ã—ãåˆ‡ã‚Šæ›¿ã‚ã‚‹ |
| T-0046-06 | çŠ¶æ…‹æ›´æ–° | StateManagerå¤‰æ›´ã§UIæ›´æ–°ã•ã‚Œã‚‹ |

---

## 5. æˆæœç‰©

| æˆæœç‰© | ãƒ‘ã‚¹ |
|--------|------|
| MainScene | `/src/presentation/scenes/MainScene.ts` |
| HeaderUI | `/src/presentation/ui/components/HeaderUI.ts` |
| SidebarUI | `/src/presentation/ui/components/SidebarUI.ts` |
| FooterUI | `/src/presentation/ui/components/FooterUI.ts` |
| ãƒ†ã‚¹ãƒˆ | `/tests/unit/presentation/main-scene.test.ts` |

---

## 6. å‚è€ƒè³‡æ–™

- **TASK-0020**: å…ƒã®MainSceneå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¿ã‚¹ã‚¯å®šç¾©
- **TitleScene.ts**: ã‚·ãƒ¼ãƒ³å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³å‚ç…§
- **GameFlowManager**: ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ç®¡ç†ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **StateManager**: çŠ¶æ…‹ç®¡ç†ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-21 | 1.0.0 | åˆç‰ˆä½œæˆï¼ˆTASK-0020å†å®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼‰ |
