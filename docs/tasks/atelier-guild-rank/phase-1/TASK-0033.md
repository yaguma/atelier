# TASK-0033: pnpmç§»è¡Œã¨Biomeè¨­å®š

**ã‚¿ã‚¹ã‚¯ID**: TASK-0033
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: DIRECT
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 1 - åŸºç›¤æ§‹ç¯‰
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *architecture-overview.md v2.2.0ã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../overview.md)
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture-overview.md](../../../design/atelier-guild-rank/architecture-overview.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’npmã‹ã‚‰pnpmã«ç§»è¡Œã—ã€Biomeï¼ˆçµ±åˆãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼‰ã‚’è¨­å®šã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šé«˜é€Ÿãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¨ä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®Ÿç¾ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0002: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ](TASK-0002.md) âœ…
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0034: Lefthookè¨­å®š](TASK-0034.md), [TASK-0036: Vitestè¨­å®šå¼·åŒ–](TASK-0036.md), [TASK-0037: Playwright E2Eè¨­å®š](TASK-0037.md)

## å®Œäº†æ¡ä»¶

- [ ] pnpm 9.xãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€package-lock.jsonã‹ã‚‰pnpm-lock.yamlã«ç§»è¡Œå®Œäº†
- [ ] Biome 2.xãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€biome.jsonãŒè¨­å®šæ¸ˆã¿
- [ ] `pnpm biome check` ã§ã‚¨ãƒ©ãƒ¼ãªãå®Ÿè¡Œå¯èƒ½
- [ ] `pnpm biome format` ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå®Ÿè¡Œå¯èƒ½
- [ ] æ—¢å­˜ã®ESLint/Prettierè¨­å®šãŒã‚ã‚Œã°å‰Šé™¤æ¸ˆã¿

---

## å®Ÿè£…è©³ç´°

### 1. pnpmç§»è¡Œ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *architecture-overview.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³1.2ã‚ˆã‚Š*

#### 1.1 pnpmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª

```bash
# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
pnpm --version
# ãªã‘ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g pnpm@9
```

#### 1.2 æ—¢å­˜package-lock.jsonã‹ã‚‰ã®ç§»è¡Œ

```bash
# node_modulesã¨æ—¢å­˜lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm -rf node_modules
rm package-lock.json

# pnpmã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install
```

#### 1.3 package.json ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›´æ–°

```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "biome check .",
    "lint:fix": "biome check --write .",
    "format": "biome format --write .",
    "test": "vitest",
    "test:coverage": "vitest --coverage"
  },
  "packageManager": "pnpm@9.15.0"
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `package.json`

### 2. Biomeè¨­å®š ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *architecture-overview.md ã‚»ã‚¯ã‚·ãƒ§ãƒ³1.2ã‚ˆã‚Š*

#### 2.1 Biomeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm add -D @biomejs/biome
```

#### 2.2 biome.jsonä½œæˆ

```json
{
  "$schema": "https://biomejs.dev/schemas/2.0.0/schema.json",
  "organizeImports": {
    "enabled": true
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noExplicitAny": "warn"
      },
      "complexity": {
        "noForEach": "off"
      }
    }
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "space",
    "indentWidth": 2,
    "lineWidth": 100
  },
  "javascript": {
    "formatter": {
      "quoteStyle": "single",
      "semicolons": "always",
      "trailingCommas": "es5"
    }
  },
  "files": {
    "ignore": [
      "node_modules",
      "dist",
      "*.min.js",
      "coverage"
    ]
  }
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `biome.json`

### 3. æ—¢å­˜Lintè¨­å®šã®å‰Šé™¤ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ã«ã‚ˆã‚‹*

æ—¢å­˜ã®ESLint/PrettierãŒã‚ã‚Œã°å‰Šé™¤ï¼š

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
rm -f .eslintrc* .prettierrc* .eslintignore .prettierignore

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‰Šé™¤
pnpm remove eslint prettier @typescript-eslint/eslint-plugin @typescript-eslint/parser
```

### 4. VSCodeè¨­å®šï¼ˆæ¨å¥¨ï¼‰ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *é–‹ç™ºç’°å¢ƒã®æ¨™æº–çš„ãªè¨­å®š*

`.vscode/settings.json`:

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "biomejs.biome",
  "[typescript]": {
    "editor.defaultFormatter": "biomejs.biome"
  },
  "[json]": {
    "editor.defaultFormatter": "biomejs.biome"
  }
}
```

`.vscode/extensions.json`:

```json
{
  "recommendations": [
    "biomejs.biome"
  ]
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `.vscode/settings.json`, `.vscode/extensions.json`

---

## ãƒ†ã‚¹ãƒˆè¦ä»¶

### å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *æ¨™æº–çš„ãªå‹•ä½œç¢ºèª*

1. **pnpmå‹•ä½œç¢ºèª**
   - `pnpm install` ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹
   - `pnpm dev` ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹
   - `pnpm build` ã§ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹

2. **Biomeå‹•ä½œç¢ºèª**
   - `pnpm biome check .` ã§lint/formatãƒã‚§ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹
   - `pnpm biome check --write .` ã§è‡ªå‹•ä¿®æ­£ãŒé©ç”¨ã•ã‚Œã‚‹
   - `pnpm biome format --write .` ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒé©ç”¨ã•ã‚Œã‚‹

---

## å®Ÿè£…æ‰‹é †

### DIRECTã‚¿ã‚¹ã‚¯

1. `/tsumiki:direct-setup` - pnpmç§»è¡Œã¨Biomeè¨­å®š
2. `/tsumiki:direct-verify` - å‹•ä½œç¢ºèª

---

## æ³¨æ„äº‹é …

- CI/CDãŒã‚ã‚‹å ´åˆã¯ã€pnpmã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†æ›´æ–°ãŒå¿…è¦
- ãƒãƒ¼ãƒ é–‹ç™ºã®å ´åˆã¯ã€å…¨å“¡ãŒpnpmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- `.npmrc` ãŒã‚ã‚‹å ´åˆã¯pnpmäº’æ›æ€§ã‚’ç¢ºèª

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

### é …ç›®åˆ¥ä¿¡é ¼æ€§

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 2 | 2 | 0 | 4 |
| ãƒ†ã‚¹ãƒˆè¦ä»¶ | 1 | 0 | 0 | 1 |

### å…¨ä½“è©•ä¾¡

- **ç·é …ç›®æ•°**: 5é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 3é …ç›® (60%)
- ğŸŸ¡ **é»„ä¿¡å·**: 2é …ç›® (40%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
