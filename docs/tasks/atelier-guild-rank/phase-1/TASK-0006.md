# TASK-0006: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼å®Ÿè£…

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**ãƒ•ã‚§ãƒ¼ã‚º**: 1 - åŸºç›¤æ§‹ç¯‰
**è¦‹ç©æ™‚é–“**: 4æ™‚é–“ï¼ˆåŠæ—¥ï¼‰
**ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0003

---

## 1. ã‚¿ã‚¹ã‚¯æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **ã‚¿ã‚¹ã‚¯ID** | TASK-0006 |
| **ã‚¿ã‚¹ã‚¯å** | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼å®Ÿè£… |
| **ã‚«ãƒ†ã‚´ãƒª** | åŸºç›¤æ§‹ç¯‰ |
| **å„ªå…ˆåº¦** | é«˜ |
| **æ‹…å½“ãƒ¬ã‚¤ãƒ¤ãƒ¼** | Infrastructure |

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. å®Ÿè£…å†…å®¹

### 2.1 ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ ğŸ”µ

`src/domain/interfaces/master-data-repository.interface.ts`:

```typescript
export interface IMasterDataRepository {
  // ã‚«ãƒ¼ãƒ‰
  getAllCards(): CardMaster[];
  getCardById(id: CardId): CardMaster | undefined;
  getCardsByType(type: CardType): CardMaster[];

  // ç´ æ
  getAllMaterials(): MaterialMaster[];
  getMaterialById(id: MaterialId): MaterialMaster | undefined;
  getMaterialsByCategory(category: MaterialCategory): MaterialMaster[];

  // ã‚¢ã‚¤ãƒ†ãƒ 
  getAllItems(): ItemMaster[];
  getItemById(id: ItemId): ItemMaster | undefined;

  // ãƒ©ãƒ³ã‚¯
  getAllRanks(): GuildRankMaster[];
  getRankByValue(rank: GuildRank): GuildRankMaster | undefined;

  // ä¾é ¼è€…
  getAllClients(): ClientMaster[];
  getClientById(id: ClientId): ClientMaster | undefined;

  // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ
  getAllArtifacts(): ArtifactMaster[];
  getArtifactById(id: ArtifactId): ArtifactMaster | undefined;

  // åˆæœŸåŒ–
  load(): Promise<void>;
  isLoaded(): boolean;
}
```

### 2.2 JSONãƒ­ãƒ¼ãƒ€ãƒ¼ ğŸ”µ

`src/infrastructure/loaders/json-loader.ts`:

```typescript
export class JsonLoader {
  async load<T>(path: string): Promise<T> {
    const response = await fetch(path);
    if (!response.ok) {
      throw new Error(`Failed to load: ${path}`);
    }
    return response.json();
  }
}
```

### 2.3 ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£… ğŸ”µ

`src/infrastructure/repositories/master-data-repository.ts`:

- å„ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®JSONèª­ã¿è¾¼ã¿
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰ï¼ˆIDæ¤œç´¢ç”¨Mapï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹

### 2.4 ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿JSONé…ç½® ğŸ”µ

```
public/assets/data/master/
â”œâ”€â”€ cards.json
â”œâ”€â”€ materials.json
â”œâ”€â”€ items.json
â”œâ”€â”€ ranks.json
â”œâ”€â”€ clients.json
â””â”€â”€ artifacts.json
```

---

## 3. å—ã‘å…¥ã‚ŒåŸºæº–

### 3.1 å¿…é ˆæ¡ä»¶ ğŸ”µ

- [ ] å…¨ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã‚ã‚‹
- [ ] IDæ¤œç´¢ãŒé«˜é€Ÿã«å‹•ä½œã™ã‚‹
- [ ] èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã«é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹

### 3.2 æ¨å¥¨æ¡ä»¶ ğŸŸ¡

- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

---

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 4.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

| ãƒ†ã‚¹ãƒˆID | ãƒ†ã‚¹ãƒˆå†…å®¹ | æœŸå¾…çµæœ |
|---------|----------|----------|
| T-0006-01 | ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼èª­ã¿è¾¼ã¿ | å…¨ã‚«ãƒ¼ãƒ‰å–å¾—å¯èƒ½ |
| T-0006-02 | IDã«ã‚ˆã‚‹æ¤œç´¢ | æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿è¿”å´ |
| T-0006-03 | å­˜åœ¨ã—ãªã„IDæ¤œç´¢ | undefinedè¿”å´ |
| T-0006-04 | èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ | ã‚¨ãƒ©ãƒ¼ã‚’throw |
| T-0006-05 | è¤‡æ•°å›loadå‘¼ã³å‡ºã— | 2å›ç›®ä»¥é™ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½¿ç”¨ |

---

## 5. æˆæœç‰©

| æˆæœç‰© | ãƒ‘ã‚¹ |
|--------|------|
| ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | `/src/domain/interfaces/master-data-repository.interface.ts` |
| JSONãƒ­ãƒ¼ãƒ€ãƒ¼ | `/src/infrastructure/loaders/json-loader.ts` |
| ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£… | `/src/infrastructure/repositories/master-data-repository.ts` |
| ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿JSON | `/public/assets/data/master/*.json` |
| ãƒ†ã‚¹ãƒˆ | `/tests/unit/infrastructure/repositories/master-data-repository.test.ts` |

---

## é–¢é€£æ–‡æ›¸

- **ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ**: [../../design/atelier-guild-rank/data-schema-master-game.md](../../design/atelier-guild-rank/data-schema-master-game.md)
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸**: [../../design/atelier-guild-rank/architecture-overview.md](../../design/atelier-guild-rank/architecture-overview.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-16 | 1.0.0 | åˆç‰ˆä½œæˆ |
