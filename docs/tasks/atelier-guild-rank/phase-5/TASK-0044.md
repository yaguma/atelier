# TASK-0044: å“è³ªã«å¿œã˜ãŸè¦–è¦šåŠ¹æœ

**ã‚¿ã‚¹ã‚¯ID**: TASK-0044
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: DIRECT
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 5 - UIå¼·åŒ–ãƒ»ãƒãƒªãƒƒã‚·ãƒ¥
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ *TASK-0023ã®æ¨å¥¨æ¡ä»¶ã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](../overview.md)
- **å…ƒã‚¿ã‚¹ã‚¯**: [ğŸ“‹ TASK-0023.md](../phase-3/TASK-0023.md) - æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºUIæ¨å¥¨æ¡ä»¶
- **UIè¨­è¨ˆ**: [ğŸ“ ui-design/screens/gathering.md](../../design/atelier-guild-rank/ui-design/screens/gathering.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ç´ æã‚„ã‚¢ã‚¤ãƒ†ãƒ ã®å“è³ªï¼ˆDã€œSï¼‰ã«å¿œã˜ãŸè¦–è¦šåŠ¹æœã‚’å®Ÿè£…ã™ã‚‹ã€‚é«˜å“è³ªã‚¢ã‚¤ãƒ†ãƒ ã«ã¯å…‰å½©åŠ¹æœã‚„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’è¿½åŠ ã—ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå“è³ªã‚’ç›´æ„Ÿçš„ã«èªè­˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0023: æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºUI](../phase-3/TASK-0023.md) âœ…å®Œäº†
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: ãªã—ï¼ˆç‹¬ç«‹ã‚¿ã‚¹ã‚¯ï¼‰

## å®Œäº†æ¡ä»¶

- [ ] å“è³ªã”ã¨ã®æ è‰²å®šç¾©
- [ ] é«˜å“è³ªã‚¢ã‚¤ãƒ†ãƒ ã®å…‰å½©åŠ¹æœ
- [ ] Så“è³ªã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
- [ ] å“è³ªãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«æ”¹å–„
- [ ] å‹•ä½œç¢ºèªå®Œäº†

---

## å®Ÿè£…è©³ç´°

### 1. å“è³ªã”ã¨ã®æ è‰²å®šç¾© ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹è¨­è¨ˆã‹ã‚‰æ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/ui/theme.ts`

```typescript
export const QUALITY_COLORS = {
  D: 0x808080,   // ã‚°ãƒ¬ãƒ¼
  C: 0x00FF00,   // ç·‘
  B: 0x0080FF,   // é’
  A: 0xFFD700,   // ã‚´ãƒ¼ãƒ«ãƒ‰
  S: 0xFF00FF,   // ãƒã‚¼ãƒ³ã‚¿ï¼ˆç´«ï¼‰
} as const;

export const QUALITY_GLOW = {
  D: null,              // ãªã—
  C: null,              // ãªã—
  B: { intensity: 0.3 }, // å¼±ã„å…‰å½©
  A: { intensity: 0.6 }, // ä¸­ç¨‹åº¦ã®å…‰å½©
  S: { intensity: 1.0, particles: true }, // å¼·ã„å…‰å½©ï¼‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
} as const;
```

### 2. å…‰å½©åŠ¹æœï¼ˆGlowï¼‰ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Phaseræ©Ÿèƒ½ã‹ã‚‰æ¨æ¸¬*

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `src/presentation/ui/components/MaterialSlotUI.ts`

```typescript
private applyQualityEffect(quality: Quality): void {
  const color = QUALITY_COLORS[quality];
  const glow = QUALITY_GLOW[quality];

  // æ è‰²ã®è¨­å®š
  this.border.setStrokeStyle(3, color);

  // å…‰å½©åŠ¹æœ
  if (glow) {
    this.glowGraphics.clear();
    this.glowGraphics.fillStyle(color, glow.intensity * 0.3);
    this.glowGraphics.fillCircle(
      this.container.x,
      this.container.y,
      this.slotSize * 0.7
    );
    this.glowGraphics.setBlendMode(Phaser.BlendModes.ADD);

    // è„ˆå‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    this.scene.tweens.add({
      targets: this.glowGraphics,
      alpha: { from: 0.5, to: 1 },
      duration: 1000,
      yoyo: true,
      repeat: -1,
      ease: 'Sine.easeInOut',
    });
  }
}
```

### 3. Så“è³ªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *Phaserãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ©Ÿèƒ½ã‹ã‚‰æ¨æ¸¬*

```typescript
private createSQualityParticles(): void {
  const particles = this.scene.add.particles('sparkle');

  const emitter = particles.createEmitter({
    x: this.container.x,
    y: this.container.y,
    speed: { min: 10, max: 30 },
    angle: { min: 0, max: 360 },
    scale: { start: 0.5, end: 0 },
    alpha: { start: 1, end: 0 },
    lifespan: 1000,
    frequency: 200,
    blendMode: Phaser.BlendModes.ADD,
    tint: QUALITY_COLORS.S,
  });

  this.particleEmitter = emitter;
}

private stopParticles(): void {
  this.particleEmitter?.stop();
}
```

### 4. å“è³ªãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«æ”¹å–„ ğŸŸ¡

**ä¿¡é ¼æ€§**: ğŸŸ¡ *æ—¢å­˜MaterialSlotUIå®Ÿè£…ã‹ã‚‰æ¨æ¸¬*

```typescript
private createQualityBadge(quality: Quality): void {
  const color = QUALITY_COLORS[quality];

  // ãƒãƒƒã‚¸èƒŒæ™¯
  const badge = this.scene.add.graphics();
  badge.fillStyle(color, 1);
  badge.fillRoundedRect(-15, -15, 30, 20, 5);

  // ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ
  const text = this.scene.add.text(0, -5, quality, {
    fontSize: '14px',
    color: quality === 'D' ? '#FFFFFF' : '#000000',
    fontStyle: 'bold',
  }).setOrigin(0.5);

  // Så“è³ªã®å ´åˆã¯ç‰¹åˆ¥ãªã‚¹ã‚¿ã‚¤ãƒ«
  if (quality === 'S') {
    // è™¹è‰²ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    this.scene.tweens.add({
      targets: badge,
      tint: { from: 0xFF00FF, to: 0x00FFFF },
      duration: 2000,
      yoyo: true,
      repeat: -1,
    });
  }

  this.qualityBadge = this.scene.add.container(
    this.slotSize / 2 - 15,
    -this.slotSize / 2 + 15
  );
  this.qualityBadge.add([badge, text]);
}
```

---

## å®Ÿè£…æ‰‹é †

### DIRECTã‚¿ã‚¹ã‚¯ã®å ´åˆ

1. `/tsumiki:direct-setup` - ç›´æ¥å®Ÿè£…ãƒ»è¨­å®š
2. `/tsumiki:direct-verify` - å‹•ä½œç¢ºèªãƒ»å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«æ³¨æ„
- å¤šæ•°ã®ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤ºæ™‚ã¯åŠ¹æœã‚’åˆ¶é™ã™ã‚‹
- è¦–è¦šåŠ¹æœã¯è¨­å®šã§ON/OFFå¯èƒ½ã«ã™ã‚‹ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 4é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 1é …ç›® (25%)
- ğŸŸ¡ **é»„ä¿¡å·**: 3é …ç›® (75%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
