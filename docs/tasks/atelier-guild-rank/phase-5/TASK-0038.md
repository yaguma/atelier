# TASK-0038: フェードイン・アウトアニメーション

**タスクID**: TASK-0038
**タスクタイプ**: DIRECT
**推定工数**: 4時間
**フェーズ**: Phase 5 - UI強化・ポリッシュ
**信頼性レベル**: 🟡 *TASK-0019の推奨条件より*

## 関連文書

- **概要**: [📋 overview.md](../overview.md)
- **元タスク**: [📋 TASK-0019.md](../phase-3/TASK-0019.md) - TitleScene推奨条件
- **設計文書**: [📐 ui-design/screens/title.md](../../design/atelier-guild-rank/ui-design/screens/title.md)

## タスク概要

TitleSceneおよびシーン遷移時のフェードイン・アウトアニメーションを実装する。ゲーム開始時やシーン切り替え時にスムーズな視覚的遷移を提供し、ユーザー体験を向上させる。

## 依存タスク

- **前提タスク**: [TASK-0019: TitleScene実装](../phase-3/TASK-0019.md) ✅完了
- **後続タスク**: なし（独立タスク）

## 完了条件

- [x] TitleSceneのフェードイン実装
- [x] シーン遷移時のフェードアウト実装
- [x] フェード時間の調整可能化
- [x] 動作確認完了

---

## 実装詳細

### 1. フェードインアニメーション 🟡

**信頼性**: 🟡 *既存実装から妥当な推測*

TitleScene表示時に画面全体をフェードインさせる。

**実装ファイル**: `src/presentation/scenes/TitleScene.ts`

```typescript
// フェードイン実装例
private fadeIn(): void {
  this.cameras.main.fadeIn(ANIMATION.FADE_DURATION, 0, 0, 0);
  this.cameras.main.once('camerafadeincomplete', () => {
    this.onFadeInComplete();
  });
}
```

### 2. フェードアウトアニメーション 🟡

**信頼性**: 🟡 *既存実装から妥当な推測*

シーン遷移時に画面全体をフェードアウトさせる。

**実装ファイル**: `src/presentation/scenes/TitleScene.ts`

```typescript
// フェードアウト実装例
private fadeOutToScene(targetScene: string): void {
  this.cameras.main.fadeOut(ANIMATION.FADE_DURATION, 0, 0, 0);
  this.cameras.main.once('camerafadeoutcomplete', () => {
    this.scene.start(targetScene);
  });
}
```

### 3. アニメーション定数定義 🔵

**信頼性**: 🔵 *TitleScene.tsの既存ANIMATION定数を拡張*

**実装ファイル**: `src/presentation/scenes/TitleScene.ts`

```typescript
const ANIMATION = {
  // 既存定義...
  FADE_DURATION: 500, // フェード時間（ms）
  SCENE_TRANSITION_DELAY: 100, // シーン遷移前の待機時間
};
```

---

## 実装手順

### DIRECTタスクの場合

1. `/tsumiki:direct-setup` - 直接実装・設定
2. `/tsumiki:direct-verify` - 動作確認・品質確認

---

## 注意事項

- Phaserのカメラフェード機能を使用する
- フェード中のユーザー入力を無効化する
- フェード完了後にシーン遷移を実行する

---

## 信頼性レベルサマリー

- **総項目数**: 3項目
- 🔵 **青信号**: 1項目 (33%)
- 🟡 **黄信号**: 2項目 (67%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 高品質
