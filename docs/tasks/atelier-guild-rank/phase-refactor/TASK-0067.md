# TASK-0067: shared/components作成（共通UIコンポーネント）

## 基本情報

| 項目 | 値 |
|------|-----|
| **タスクID** | TASK-0067 |
| **タスク名** | shared/components作成（共通UIコンポーネント） |
| **見積時間** | 4時間 |
| **依存タスク** | TASK-0066 |
| **開発タイプ** | TDD |
| **フェーズ** | Phase 2 - shared移行 |
| **状態** | ✅ 完了 |

---

## 概要

### 背景

BaseComponentなどの共通UIコンポーネントは複数のシーン・機能から使用されており、shared/componentsに配置されるべきである。.claude/rules/ui-components.mdの設計方針に基づき、これらをshared層に移動する。

### 目的

BaseComponentやテーマ定義などの共通UIをsrc/shared/components/に移動し、再利用性を高める。

### 現状

- BaseComponent: `src/presentation/ui/scenes/components/BaseComponent.ts`
- テーマ定義: `src/presentation/theme.ts`（または類似パス）

---

## 要件

### 機能要件

| 要件ID | 要件 | 信頼性 |
|--------|------|--------|
| REQ-067-01 | BaseComponentをsrc/shared/components/に移動する | 🔵 |
| REQ-067-02 | テーマ定義（theme.ts）をsrc/shared/に移動する | 🔵 |
| REQ-067-03 | 共通UIユーティリティを移動する | 🔵 |
| REQ-067-04 | インポートパスを@shared/componentsに更新する | 🔵 |
| REQ-067-05 | 旧パスからの参照を全て更新する | 🔵 |

### 非機能要件

| 要件ID | 要件 |
|--------|------|
| NFR-067-01 | 共通コンポーネントのテストがパスすること |
| NFR-067-02 | UIの見た目・動作に変化がないこと |
| NFR-067-03 | 循環参照が発生しないこと |

---

## テストケース

### BaseComponent移行テスト

```typescript
describe('shared/components/BaseComponent', () => {
  describe('移行確認', () => {
    it('@shared/componentsからBaseComponentがインポートできること', () => {});
    it('既存のBaseComponentテストがパスすること', () => {});
  });

  describe('機能確認', () => {
    it('基本的なコンポーネント機能が動作すること', () => {});
    it('継承クラスで正常に動作すること', () => {});
  });
});
```

### テーマ定義テスト

```typescript
describe('shared/theme', () => {
  describe('移行確認', () => {
    it('@shared/themeからTHEMEがインポートできること', () => {});
    it('既存のテーマ定義が全て含まれていること', () => {});
  });

  describe('定義確認', () => {
    it('カラーパレットが定義されていること', () => {});
    it('タイポグラフィが定義されていること', () => {});
    it('スペーシングが定義されていること', () => {});
  });
});
```

---

## 実装計画

### ステップ1: ディレクトリ構造作成（30分）

1. src/shared/components/作成
2. src/shared/theme/作成
3. index.tsファイル作成

### ステップ2: BaseComponent移行（1.5時間）

1. BaseComponentファイルを新ディレクトリにコピー
2. 関連ユーティリティの移動
3. インポートパス更新
4. 旧ファイルから再エクスポート（後方互換性）

### ステップ3: テーマ定義移行（1時間）

1. theme.tsを新ディレクトリにコピー
2. 関連定数の移動
3. インポートパス更新

### ステップ4: テスト実行・確認（1時間）

1. 既存テストの実行
2. UIの視覚的確認
3. インポートエラーの確認・修正
4. 全テストパスの確認

---

## 移行後のディレクトリ構造

```
src/shared/
├── components/
│   ├── index.ts
│   ├── BaseComponent.ts
│   └── utils/
│       └── index.ts
├── theme/
│   ├── index.ts
│   ├── colors.ts
│   ├── typography.ts
│   └── spacing.ts
└── index.ts
```

---

## 対象ファイル

### 移行元

- `src/presentation/ui/scenes/components/BaseComponent.ts` → `src/shared/components/`
- `src/presentation/theme.ts` → `src/shared/theme/`

### 更新対象

- BaseComponent, テーマを使用している全ファイル
- tsconfig.jsonのパスエイリアス設定

---

## 受け入れ条件

- [x] BaseComponentがsrc/shared/components/に移動されている
- [x] テーマ定義がsrc/shared/theme/に移動されている
- [x] @shared/componentsパスエイリアスでインポートできる
- [x] @shared/themeパスエイリアスでインポートできる
- [x] 共通コンポーネントのテストが全てパスする
- [x] UIの見た目・動作に変化がない
- [x] 全テストがパスする
- [x] `pnpm lint`がエラーなしで完了する

---

## 関連ドキュメント

- **TASK-0066**: shared/services作成
- **設計文書**: `.claude/rules/ui-components.md`

---

## 信頼性レベルサマリー

### 項目別信頼性

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 機能要件 | 5 | 0 | 0 | 5 |
| テストケース | 0 | 0 | 0 | 0 |

### 全体評価

- **総項目数**: 5項目
- 🔵 **青信号**: 5項目 (100%) - .claude/rules/ui-components.mdに基づく
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 良好（設計文書に基づく明確な移行方針）

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-09 | 初版作成 |
