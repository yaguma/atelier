# TASK-0074: features/gathering/components作成

## 基本情報

| 項目 | 値 |
|------|-----|
| **タスクID** | TASK-0074 |
| **タスク名** | features/gathering/components作成 |
| **見積時間** | 4時間 |
| **依存タスク** | TASK-0067, TASK-0073 |
| **開発タイプ** | TDD |
| **フェーズ** | Phase 4 - features/gathering機能 |
| **状態** | 🔲 未着手 |

---

## 概要

### 背景

採取機能に関連するUIコンポーネントを`features/gathering/components/`に集約する必要がある。採取フェーズで使用されるUI要素を機能単位で管理する。

### 目的

採取関連UIコンポーネントを`src/features/gathering/components/`に移動し、BaseComponentを継承する構造にする。

### 現状

- MaterialOptionView: `src/presentation/ui/components/`内に存在
- 採取フェーズUI関連コンポーネント: 各所に分散

---

## 要件

### 機能要件

| 要件ID | 要件 | 信頼性 |
|--------|------|--------|
| REQ-074-01 | MaterialOptionViewをfeatures/gathering/components/に移動する | 🔵 |
| REQ-074-02 | 採取フェーズUI関連コンポーネントを移動する | 🔵 |
| REQ-074-03 | BaseComponentを継承する構造に更新する | 🔵 |
| REQ-074-04 | インポートパスを@features/gathering/componentsに更新する | 🔵 |

### 非機能要件

| 要件ID | 要件 |
|--------|------|
| NFR-074-01 | コンポーネントのテストがパスすること |
| NFR-074-02 | UIの見た目・動作に変化がないこと |
| NFR-074-03 | 循環参照が発生しないこと |

---

## テストケース

### コンポーネント移行テスト

```typescript
describe('features/gathering/components', () => {
  describe('MaterialOptionView', () => {
    it('@features/gathering/componentsからMaterialOptionViewがインポートできること', () => {});
    it('BaseComponentを継承していること', () => {});
    it('素材オプション表示が正常に動作すること', () => {});
  });

  describe('GatheringPhaseUI', () => {
    it('採取フェーズUIが正常に表示されること', () => {});
    it('ドラフト選択が動作すること', () => {});
  });

  describe('MaterialDisplay', () => {
    it('獲得素材が正しく表示されること', () => {});
    it('素材のアニメーションが動作すること', () => {});
  });
});
```

---

## 実装計画

### ステップ1: ディレクトリ構造作成（30分）

1. src/features/gathering/components/作成
2. index.tsファイル作成

### ステップ2: コンポーネント移行（2時間）

1. MaterialOptionViewファイルを新ディレクトリにコピー
2. 採取フェーズUI関連コンポーネントを移動
3. BaseComponent継承構造に更新

### ステップ3: インポートパス更新（1時間）

1. 旧パスからの参照を@features/gathering/componentsに更新
2. 旧ファイルから再エクスポート（後方互換性）

### ステップ4: テスト実行・確認（30分）

1. 既存テストの実行
2. UIの視覚的確認
3. 全テストパスの確認

---

## 移行後のディレクトリ構造

```
src/features/gathering/
├── types/
│   └── ...
├── services/
│   └── ...
├── components/
│   ├── index.ts
│   ├── MaterialOptionView.ts
│   ├── GatheringPhaseUI.ts
│   └── MaterialDisplay.ts
└── index.ts
```

---

## 対象ファイル

### 移行元

- `src/presentation/ui/components/MaterialOptionView.ts` → `src/features/gathering/components/MaterialOptionView.ts`
- 採取フェーズ関連UIコンポーネント

### 更新対象

- 採取関連コンポーネントを使用している全シーン
- tsconfig.jsonのパスエイリアス設定

---

## 受け入れ条件

- [ ] MaterialOptionViewがsrc/features/gathering/components/に移動されている
- [ ] 採取フェーズUI関連コンポーネントが移動されている
- [ ] BaseComponentを継承している
- [ ] @features/gathering/componentsパスエイリアスでインポートできる
- [ ] UIの見た目・動作に変化がない
- [ ] 全テストがパスする
- [ ] `pnpm lint`がエラーなしで完了する

---

## 関連ドキュメント

- **TASK-0067**: shared/components作成（共通UIコンポーネント）
- **TASK-0073**: features/gathering/services作成

---

## 信頼性レベルサマリー

### 項目別信頼性

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 機能要件 | 4 | 0 | 0 | 4 |
| テストケース | 0 | 0 | 0 | 0 |

### 全体評価

- **総項目数**: 4項目
- 🔵 **青信号**: 4項目 (100%) - 既存実装に基づく
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 良好（既存実装の移行が中心のため信頼性が高い）

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-09 | 初版作成 |
