# TASK-0088: features/shop/types作成

## 基本情報

| 項目 | 値 |
|------|-----|
| **タスクID** | TASK-0088 |
| **タスク名** | features/shop/types作成 |
| **見積時間** | 4時間 |
| **依存タスク** | TASK-0064 |
| **開発タイプ** | TDD |
| **フェーズ** | Phase 8 - features/shop機能 |
| **状態** | 🔲 未着手 |

---

## 概要

### 背景

ショップ機能はカードやアイテムの購入を担当する機能である。Feature-Based Architectureへの移行に伴い、ショップ関連の型定義を`src/features/shop/types/`に集約する必要がある。

### 目的

ショップ機能の型定義を作成し、IShopServiceインターフェースおよびShopItem関連の型を移動・整理する。

### 現状

- 型定義が複数の場所に分散している可能性
- ショップ固有の型と汎用的な型が混在している可能性

---

## 要件

### 機能要件

| 要件ID | 要件 | 信頼性 |
|--------|------|--------|
| REQ-088-01 | IShopServiceインターフェースを`features/shop/types/`に移動する | 🔵 |
| REQ-088-02 | ShopItem型を定義・移動する | 🔵 |
| REQ-088-03 | ShopInventory型を定義する | 🔵 |
| REQ-088-04 | PurchaseResult型を定義する | 🔵 |
| REQ-088-05 | 型エクスポートのindex.tsを作成する | 🔵 |

### 非機能要件

| 要件ID | 要件 |
|--------|------|
| NFR-088-01 | 既存のテストがすべてパスすること |
| NFR-088-02 | 型定義が正しくエクスポートされていること |
| NFR-088-03 | 循環参照が発生しないこと |

---

## テストケース

### 型エクスポートテスト

```typescript
describe('features/shop/types', () => {
  describe('ShopItem型', () => {
    it('ShopItem型が正しくエクスポートされること', () => {});
    it('必須プロパティ（id, name, price, type）が定義されていること', () => {});
  });

  describe('ShopInventory型', () => {
    it('ShopInventory型が正しくエクスポートされること', () => {});
    it('在庫管理用のプロパティが定義されていること', () => {});
  });

  describe('サービスインターフェース', () => {
    it('IShopServiceが正しくエクスポートされること', () => {});
    it('必要なメソッドシグネチャが定義されていること', () => {});
  });
});
```

---

## 実装計画

### ステップ1: 現状調査（1時間）

1. 既存のショップ関連型定義を確認
2. 既存のサービスインターフェースを確認
3. 依存関係を調査

### ステップ2: 型定義作成（2時間）

1. `src/features/shop/types/`にファイルを作成
2. ShopItem.ts、ShopInventory.tsを作成
3. service-interfaces.tsを作成

### ステップ3: エクスポート整理（1時間）

1. index.tsを作成してエクスポートを集約
2. 既存のインポートパスを更新
3. テスト実行・確認

---

## 対象ファイル

- `src/features/shop/types/ShopItem.ts` - 新規作成
- `src/features/shop/types/ShopInventory.ts` - 新規作成
- `src/features/shop/types/PurchaseResult.ts` - 新規作成
- `src/features/shop/types/service-interfaces.ts` - 新規作成
- `src/features/shop/types/index.ts` - 新規作成

---

## 受け入れ条件

- [ ] IShopServiceインターフェースが`features/shop/types/`に存在する
- [ ] ShopItem型が定義されている
- [ ] ShopInventory型が定義されている
- [ ] PurchaseResult型が定義されている
- [ ] 型がindex.tsから正しくエクスポートされている
- [ ] 全テストがパスする
- [ ] `pnpm lint`がエラーなしで完了する

---

## 関連ドキュメント

- **TASK-0064**: shared/types移行と整理
- **TASK-0089**: features/shop/services作成
- **設計文書**: `.claude/rules/architecture.md`

---

## 信頼性レベルサマリー

### 項目別信頼性

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 機能要件 | 5 | 0 | 0 | 5 |
| テストケース | 0 | 0 | 0 | 0 |

### 全体評価

- **総項目数**: 5項目
- 🔵 **青信号**: 5項目 (100%) - 既存実装に基づく
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 良好（既存実装の移動が中心のため信頼性が高い）

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-09 | 初版作成 |
