# TASK-0063: 既存テストのベースライン確認

**タスクID**: TASK-0063
**タスクタイプ**: DIRECT
**推定工数**: 4時間
**フェーズ**: Phase 1 - 基盤構築
**信頼性レベル**: 🔵 *テスト要件として必須*

## 関連文書

- **概要**: [📋 overview.md](../overview.md)
- **設計文書**: [📐 architecture.md](../../design/atelier-guild-rank/architecture-overview.md)

## タスク概要

リファクタリング前のテスト状態を記録する。全テストを実行してパス状態を確認し、カバレッジレポートを取得する。現在のテストファイル一覧を記録して、リファクタリング後の比較基準とする。

## 依存タスク

- **前提タスク**: なし
- **後続タスク**: なし（他タスクと並行実行可能）

## 完了条件

- [ ] 全テスト実行結果が記録されている
- [ ] カバレッジレポートが取得されている
- [ ] 現在のテストファイル一覧が記録されている
- [ ] 失敗しているテストがある場合は理由を記録
- [ ] ベースラインドキュメントが作成されている

---

## 主要実装項目

### 1. 全テスト実行とパス状態確認 🔵

**信頼性**: 🔵 *テスト要件として必須*

Vitestを使用して全テストを実行し、結果を記録する。

**実行コマンド**:
```bash
cd atelier-guild-rank
pnpm test --run 2>&1 | tee test-baseline-results.txt
```

**記録項目**:
- テスト総数
- パス数
- 失敗数
- スキップ数
- 実行時間

### 2. カバレッジレポート取得 🔵

**信頼性**: 🔵 *テスト要件として必須*

テストカバレッジを取得して記録する。

**実行コマンド**:
```bash
cd atelier-guild-rank
pnpm test:coverage --run
```

**記録項目**:
- Statements カバレッジ率
- Branches カバレッジ率
- Functions カバレッジ率
- Lines カバレッジ率
- 各ディレクトリ/ファイルごとのカバレッジ

### 3. 現在のテストファイル一覧記録 🔵

**信頼性**: 🔵 *テスト要件として必須*

テストファイルの一覧を取得して記録する。

**実行コマンド**:
```bash
cd atelier-guild-rank
find tests -name "*.test.ts" -o -name "*.spec.ts" | sort > test-files-baseline.txt
```

**記録項目**:
- テストファイルパス一覧
- テストファイル総数
- ディレクトリ構造

### 4. ベースラインドキュメント作成 🔵

**信頼性**: 🔵 *テスト要件として必須*

リファクタリング前のテスト状態をドキュメント化する。

**実装ファイル**: `docs/tasks/atelier-guild-rank/phase-refactor/test-baseline.md`

**記録内容**:
```markdown
# テストベースライン

## 実行日時
{日時}

## テスト結果サマリー
- テスト総数: {件}
- パス: {件}
- 失敗: {件}
- スキップ: {件}

## カバレッジサマリー
- Statements: {%}
- Branches: {%}
- Functions: {%}
- Lines: {%}

## テストファイル一覧
{ファイル一覧}

## 備考
{失敗テストがある場合の理由など}
```

---

## 基本的なテスト要件

### ベースライン完全性確認 🔵

**信頼性**: 🔵 *ドキュメントで検証*

- 全ての記録項目が含まれていること
- テスト結果とカバレッジが正確に記録されていること

---

## 実装手順

### DIRECTタスクの場合

1. `/direct-setup` - 直接実装・設定
2. `/direct-verify` - 動作確認・品質確認

---

## 信頼性レベルサマリー

- **総項目数**: 5項目
- 🔵 **青信号**: 5項目 (100%)
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 高品質（テスト要件として必須の作業）
