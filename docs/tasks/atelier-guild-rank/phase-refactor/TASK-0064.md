# TASK-0064: shared/types移行と整理

## 基本情報

| 項目 | 値 |
|------|-----|
| **タスクID** | TASK-0064 |
| **タスク名** | shared/types移行と整理 |
| **見積時間** | 4時間 |
| **依存タスク** | TASK-0062 |
| **開発タイプ** | TDD |
| **フェーズ** | Phase 2 - shared移行 |
| **状態** | 🔲 未着手 |

---

## 概要

### 背景

リファクタリングの一環として、型定義を整理する必要がある。現在のsrc/shared/types/には様々な型が混在しており、各機能固有の型と共通型を明確に分離する必要がある。

### 目的

既存のsrc/shared/typesを新構造に整理し、共通型のみをshared/typesに残す方針を確立する。

### 現状

- src/shared/types/に型定義が存在
- 機能固有の型と共通型が混在している可能性

---

## 要件

### 機能要件

| 要件ID | 要件 | 信頼性 |
|--------|------|--------|
| REQ-064-01 | 既存のsrc/shared/types/はそのまま維持する | 🔵 |
| REQ-064-02 | 各機能固有の型を特定し、後で各featureに移動する準備をする | 🔵 |
| REQ-064-03 | 共通型のみshared/typesに残す方針を確認・文書化する | 🔵 |
| REQ-064-04 | 型エクスポートの一貫性を確保する | 🔵 |

### 非機能要件

| 要件ID | 要件 |
|--------|------|
| NFR-064-01 | 既存のテストがすべてパスすること |
| NFR-064-02 | 型定義が正しくエクスポートされていること |
| NFR-064-03 | 循環参照が発生しないこと |

---

## テストケース

### 型エクスポートテスト

```typescript
describe('shared/types エクスポート', () => {
  describe('インデックスエクスポート', () => {
    it('共通型がindex.tsからエクスポートされること', () => {});
    it('@shared/typesパスエイリアスで型がインポートできること', () => {});
  });

  describe('型分類', () => {
    it('機能固有型が特定・リスト化されていること', () => {});
    it('共通型が明確に定義されていること', () => {});
  });
});
```

---

## 実装計画

### ステップ1: 現状調査（1時間）

1. src/shared/types/内の全型定義を確認
2. 各型の使用箇所を調査
3. 機能固有型と共通型を分類

### ステップ2: 型分類ドキュメント作成（1時間）

1. 共通型リストの作成
2. 機能固有型リストの作成（移動先feature候補付き）
3. 依存関係の整理

### ステップ3: 整理と確認（2時間）

1. インデックスエクスポートの整理
2. 既存テストの実行・確認
3. 型インポートの動作確認

---

## 対象ファイル

- `src/shared/types/` - 調査・整理対象
- `src/shared/types/index.ts` - エクスポート確認・整理

---

## 受け入れ条件

- [ ] 既存のsrc/shared/types/が維持されている
- [ ] 機能固有型と共通型の分類リストが作成されている
- [ ] 型定義が正しくエクスポートされている
- [ ] 全テストがパスする
- [ ] `pnpm lint`がエラーなしで完了する

---

## 関連ドキュメント

- **TASK-0062**: 共有レイヤー基盤作成
- **設計文書**: `.claude/rules/architecture.md`

---

## 信頼性レベルサマリー

### 項目別信頼性

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 機能要件 | 4 | 0 | 0 | 4 |
| テストケース | 0 | 0 | 0 | 0 |

### 全体評価

- **総項目数**: 4項目
- 🔵 **青信号**: 4項目 (100%) - 現在の実装に基づく
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 良好（既存実装の維持が中心のため信頼性が高い）

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-09 | 初版作成 |
