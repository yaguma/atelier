# TASK-0098: 旧ディレクトリ削除

## 基本情報

| 項目 | 値 |
|------|-----|
| **タスクID** | TASK-0098 |
| **タスク名** | 旧ディレクトリ削除 |
| **見積時間** | 4時間 |
| **依存タスク** | TASK-0097 |
| **開発タイプ** | DIRECT |
| **フェーズ** | Phase 11 - クリーンアップと統合 |
| **状態** | ⏸️ ブロック中 |

---

## 概要

### 背景

Feature-Based Architectureへの移行完了後、使用されなくなった旧ディレクトリを削除してコードベースをクリーンに保つ必要がある。

### 目的

使用されなくなった旧ディレクトリ（application, domain, infrastructure, presentation）を削除する。

### 注意

**全テストがパスすることを確認してから削除を実行すること。**

---

## 要件

### 機能要件

| 要件ID | 要件 | 信頼性 |
|--------|------|--------|
| REQ-098-01 | src/application/ ディレクトリを削除する | 🔵 |
| REQ-098-02 | src/domain/ ディレクトリを削除する | 🔵 |
| REQ-098-03 | src/infrastructure/ ディレクトリを削除する | 🔵 |
| REQ-098-04 | src/presentation/ ディレクトリを削除する | 🔵 |
| REQ-098-05 | 削除前に全ファイルが移行済みであることを確認する | 🔵 |

### 非機能要件

| 要件ID | 要件 |
|--------|------|
| NFR-098-01 | 削除前に全テストがパスすること |
| NFR-098-02 | 削除後も全テストがパスすること |
| NFR-098-03 | Gitで削除履歴が追跡可能であること |

---

## 実装計画

### ステップ1: 移行完了確認（1時間）

1. 旧ディレクトリ内の全ファイルをリストアップ
2. 各ファイルが新しい場所に移行済みであることを確認
3. 移行漏れがあれば対処

### ステップ2: テスト実行（1時間）

1. 全ユニットテストを実行
2. E2Eテストを実行
3. ビルドテスト実行

### ステップ3: ディレクトリ削除（1時間）

1. src/application/ 削除
2. src/domain/ 削除
3. src/infrastructure/ 削除
4. src/presentation/ 削除

### ステップ4: 削除後確認（1時間）

1. 全テスト再実行
2. ビルド確認
3. ゲーム動作確認

---

## 対象ファイル

- `src/application/` - 削除対象
- `src/domain/` - 削除対象
- `src/infrastructure/` - 削除対象
- `src/presentation/` - 削除対象

---

## 受け入れ条件

- [ ] 全ファイルが新構造に移行済みであることが確認されている
- [ ] 削除前に全テストがパスしている
- [ ] src/application/ が削除されている
- [ ] src/domain/ が削除されている
- [ ] src/infrastructure/ が削除されている
- [ ] src/presentation/ が削除されている
- [ ] 削除後も全テストがパスする
- [ ] ゲームが正常に動作する

---

## 関連ドキュメント

- **TASK-0097**: scene間のインポート整理（依存）
- **設計文書**: `.claude/rules/architecture.md`

---

## 信頼性レベルサマリー

### 項目別信頼性

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 機能要件 | 5 | 0 | 0 | 5 |
| テストケース | 0 | 0 | 0 | 0 |

### 全体評価

- **総項目数**: 5項目
- 🔵 **青信号**: 5項目 (100%)
- 🟡 **黄信号**: 0項目 (0%)
- 🔴 **赤信号**: 0項目 (0%)

**品質評価**: 良好（テスト確認後の削除作業）

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-09 | 初版作成 |
| 2026-02-12 | ステータスをブロック中に変更。旧ディレクトリに118ファイルが残存し、新構造ファイル36個+テスト62個が旧パスから依存。以下の未移行カテゴリを確認: (1) application/services（全11サービス実装）、(2) domain/entities・interfaces（エンティティ定義・サービスIF）、(3) infrastructure/di・repositories（DIコンテナ・リポジトリ）、(4) presentation/ui（Button/Dialog/DropZone等のUIコンポーネント、theme、rexui型、UIユーティリティ）。features/*/typesはdomain/interfacesからの再エクスポートのみ。完全移行には追加タスク分割が必要。 |
