# PR #358 Review: fix: æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºã§æ¡å–åœ°ã‚’é¸æŠã§ããªã„å•é¡Œã‚’ä¿®æ­£

**ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥**: 2026-03-01
**ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰**: Lite Mode (Quick Review)
**PR URL**: https://github.com/yaguma/atelier/pull/358

---

## Good Points

- **æ ¹æœ¬åŸå› ã®æ­£ç¢ºãªç‰¹å®šã¨ä¿®æ­£**: `showLocationSelectStage()` ã§ `LocationSelectUI.updateLocations()` ãŒå‘¼ã°ã‚Œã¦ã„ãªã‹ã£ãŸå•é¡Œã‚’çš„ç¢ºã«ä¿®æ­£ã—ã€`PhaseManager.initializeGatheringSession()` ã‚‚äºŒæ®µéšãƒ•ãƒ­ãƒ¼ï¼ˆLOCATION_SELECT â†’ DRAFT_SESSIONï¼‰ã«æ­£ã—ãæ›¸ãç›´ã—ã¦ã„ã‚‹ã€‚

---

## Findings

### Warning (2ä»¶)

**[W-01] PhaseManager ã§ `'show' in gatheringUI` ã«ã‚ˆã‚‹å‹ã‚¬ãƒ¼ãƒ‰ãŒè„†å¼±**
- ãƒ•ã‚¡ã‚¤ãƒ«: `src/scenes/helpers/PhaseManager.ts` L253
- `'show' in gatheringUI` ã«ã‚ˆã‚‹ duck typing ãƒã‚§ãƒƒã‚¯ã¯ã€ä»»æ„ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« `show` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Œã°é€šéã™ã‚‹ãŸã‚å‹å®‰å…¨æ€§ãŒä½ã„
- æ¨å¥¨: `gatheringUI instanceof GatheringPhaseUI` ã§åˆ¤å®šã™ã‚‹ã‹ã€`IBasePhaseUI` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã« `show()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹
- æ ¹æ‹ : `.claude/rules/coding-style.md` å‹å®‰å…¨æ€§ã®åŸå‰‡

**[W-02] ãƒ†ã‚¹ãƒˆã§ `as never` ã‚­ãƒ£ã‚¹ãƒˆãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹**
- ãƒ•ã‚¡ã‚¤ãƒ«: `tests/unit/features/gathering/components/GatheringPhaseUI.test.ts` L222, L236, L264 ç­‰
- `cardId: 'gathering-forest' as never` ã¯å‹å®‰å…¨æ€§ã‚’å®Œå…¨ã«ç„¡è¦–ã™ã‚‹ã‚­ãƒ£ã‚¹ãƒˆã€‚`toCardId('gathering-forest')` ã‚’ä½¿ç”¨ã™ã¹ã
- æ ¹æ‹ : `.claude/rules/code-standards.md` `as` ã‚­ãƒ£ã‚¹ãƒˆã¯æœ€å°é™ã«

### Info (2ä»¶)

**[I-01] `setAvailableLocations()` ã®JSDocã‚³ãƒ¡ãƒ³ãƒˆãŒéå‰°**
- ãƒ•ã‚¡ã‚¤ãƒ«: `src/features/gathering/components/GatheringPhaseUI.ts` L458-466
- ã€Œã€æ©Ÿèƒ½æ¦‚è¦ã€‘ã€ã€Œã€å®Ÿè£…æ–¹é‡ã€‘ã€ã€ŒğŸ”µ Issue #354 ä¿®æ­£ã€ã¨ãƒ¡ã‚¿æƒ…å ±ãŒå¤šã„ã€‚Issueå‚ç…§ã¯1è¡Œã§ååˆ†
- æ ¹æ‹ : `.claude/rules/coding-style.md` ã‚³ãƒ¡ãƒ³ãƒˆã¯ã€Œãªãœã€ã‚’èª¬æ˜ã—ã€ã€Œä½•ã‚’ã€ã¯ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾

**[I-02] `wayfinding-and-variety.md` (807è¡Œ) ã¯PR #358ã®ä¿®æ­£ç¯„å›²å¤–**
- ãƒ•ã‚¡ã‚¤ãƒ«: `docs/design/atelier-guild-rank/wayfinding-and-variety.md`
- Issue #354 ã®ä¿®æ­£ã¨ã¯ç›´æ¥é–¢ä¿‚ã—ãªã„è¨­è¨ˆæ›¸ãŒPRã«å«ã¾ã‚Œã¦ã„ã‚‹ã€‚åˆ¥PRã«åˆ†é›¢ã™ã‚‹ã®ãŒæœ›ã¾ã—ã„

---

## Summary

| é‡è¦åº¦ | ä»¶æ•° |
|--------|------|
| Critical | 0 |
| Warning | 2 |
| Info | 2 |

**åˆ¤å®š**: Approve with suggestions - Criticalå•é¡Œãªã—ã€‚Warning 2ä»¶ã¯å“è³ªæ”¹å–„ã®æ¨å¥¨äº‹é …ã€‚
