# リザルト画面 詳細設計

## 基本情報

| 項目 | 値 |
|------|-----|
| 画面ID | SCR-006 |
| 親画面 | 依頼画面 |
| 子画面 | タイトル画面 |

---

## ワイヤーフレーム

### 勝利時

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│                    ╔═══════════════╗                    │
│                    ║   勝利！      ║                    │
│                    ╚═══════════════╝                    │
│                                                         │
│              錬金術師の技は伝説となった...                │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    【プレイ統計】                         │
│                                                         │
│  クリアレベル:      10                                   │
│  達成依頼数:        15                                   │
│  暴発回数:          3                                    │
│  最終デッキ枚数:    25                                   │
│  プレイ時間:        32:15                               │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    【獲得報酬】                          │
│                                                         │
│  名声:              +50   →  累計: 150                  │
│  知識ポイント:      +30   →  累計: 80                   │
│                                                         │
│  🔓 新カード解放: 「炎の精霊」                          │
│  🔓 アセンション2 解放                                  │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    [タイトルへ戻る]                      │
└─────────────────────────────────────────────────────────┘
```

### 敗北時

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│                    ╔═══════════════╗                    │
│                    ║   敗北...     ║                    │
│                    ╚═══════════════╝                    │
│                                                         │
│              工房は爆発により崩壊した...                  │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    【プレイ統計】                         │
│                                                         │
│  到達レベル:        5                                    │
│  達成依頼数:        7                                    │
│  暴発回数:          8  ← 敗因                           │
│  最終デッキ枚数:    18                                   │
│  プレイ時間:        18:42                               │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    【獲得報酬】                          │
│                                                         │
│  名声:              +10   →  累計: 110                  │
│  知識ポイント:      +5    →  累計: 55                   │
│                                                         │
├─────────────────────────────────────────────────────────┤
│           [リトライ]           [タイトルへ戻る]          │
└─────────────────────────────────────────────────────────┘
```

---

## UI要素

| 要素ID | 種類 | 説明 | 状態 |
|--------|------|------|------|
| txt-result | テキスト | 勝利/敗北タイトル | - |
| txt-message | テキスト | フレーバーテキスト | - |
| pnl-stats | パネル | プレイ統計 | - |
| txt-level | テキスト | クリア/到達レベル | - |
| txt-quests | テキスト | 達成依頼数 | - |
| txt-explosions | テキスト | 暴発回数 | - |
| txt-deck | テキスト | 最終デッキ枚数 | - |
| txt-time | テキスト | プレイ時間 | - |
| pnl-rewards | パネル | 獲得報酬 | - |
| txt-fame | テキスト | 獲得名声 | - |
| txt-knowledge | テキスト | 獲得知識ポイント | - |
| pnl-unlocks | パネル | 新規解放アイテム | 解放がある場合のみ表示 |
| btn-retry | ボタン | 同条件でリトライ | 敗北時のみ表示 |
| btn-title | ボタン | タイトルへ戻る | 常に有効 |

---

## 状態遷移

### 初期状態
- 結果演出再生
- BGM切替（勝利BGM/敗北BGM）

### 統計表示状態
- 各統計項目を順次カウントアップ表示

### 報酬表示状態
- 獲得報酬を表示
- 新規解放アイテムがあればハイライト表示

### 完了状態
- ボタン操作可能

---

## アニメーション

| トリガー | アニメーション | 時間 | イージング |
|----------|---------------|------|-----------|
| 画面表示時（勝利） | 紙吹雪エフェクト | 2.0s | - |
| 画面表示時（敗北） | 暗転 + 煙エフェクト | 1.5s | - |
| タイトル表示 | スケールイン + 光 | 0.5s | ease-out |
| 統計項目表示 | 順次フェードイン | 0.2s × n | ease-out |
| 数値表示 | カウントアップ | 0.5s | ease-out |
| 解放アイテム表示 | キラキラエフェクト | 0.5s | - |

---

## イベント

| イベント名 | トリガー | 処理内容 |
|-----------|----------|----------|
| OnRetryClicked | btn-retry押下 | 同じスタイル・シードでゲーム再開 |
| OnTitleClicked | btn-title押下 | タイトル画面へ遷移 |
| OnSkipAnimation | 画面クリック | アニメーションをスキップ |

---

## 報酬計算

### 名声獲得

```
基本名声 = クリアレベル × 5
達成ボーナス = 達成依頼数 × 2
暴発ペナルティ = 暴発回数 × -1
────────────────────────
合計名声 = 基本名声 + 達成ボーナス + 暴発ペナルティ
```

### 知識ポイント獲得

```
基本ポイント = クリアレベル × 3
勝利ボーナス = 勝利時 +20
アセンションボーナス = アセンションLv × 5
────────────────────────
合計ポイント = 基本ポイント + 勝利ボーナス + アセンションボーナス
```

---

## アクセシビリティ

- [x] 勝利/敗北を色だけでなくテキストとアイコンで表現
- [x] アニメーションスキップ可能
- [x] キーボードでボタン操作可能

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|----------|---------|
| 2025-12-20 | 1.0 | 初版作成 |
