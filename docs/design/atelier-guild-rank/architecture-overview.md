# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.0.0
**ä½œæˆæ—¥**: 2026-01-01
**æœ€çµ‚æ›´æ–°**: 2026-02-09
**å¯¾è±¡**: ã‚¢ãƒˆãƒªã‚¨éŒ¬é‡‘è¡“ã‚²ãƒ¼ãƒ ï¼ˆã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ï¼‰Phaserç‰ˆ

# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ - æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã‚’å®šç¾©ã™ã‚‹ã€‚

---

## æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€éŒ¬é‡‘è¡“ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ãƒ‡ãƒƒã‚­æ§‹ç¯‰RPGã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

> éŒ¬é‡‘è¡“å¸«ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ãŒã€æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã¨ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã®ãƒ‡ãƒƒã‚­ã‚’é§†ä½¿ã—ã€
> ä¾é ¼ã‚’é”æˆã—ã¦è²¢çŒ®åº¦ã‚’ç¨¼ãã€ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯ã¨ã„ã†ã€Œæ•µã€ã‚’å€’ã—ã¦ã„ã
> ã€Œæˆ¦ç•¥çš„ãƒ‡ãƒƒã‚­æ§‹ç¯‰ã€ã¨ã€Œãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ã®é”æˆæ„Ÿã€ã‚’å‘³ã‚ã†ã‚²ãƒ¼ãƒ 

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´

- **Feature-Based Architecture** ã«ã‚ˆã‚‹æ©Ÿèƒ½å˜ä½ã®ã‚³ãƒ¼ãƒ‰é…ç½®
- **Functional Core, Imperative Shell** ã«ã‚ˆã‚‹ç´”ç²‹é–¢æ•°ã¨I/Oã®åˆ†é›¢
- **Phaserãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** ã«ã‚ˆã‚‹æ´—ç·´ã•ã‚ŒãŸã‚²ãƒ¼ãƒ UIè¡¨ç¾
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ** ã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«å‡¡ä¾‹

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ãƒ»æ—¢å­˜è¨­è¨ˆæ›¸ã«è©³ç´°è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ãƒ»æ—¢å­˜è¨­è¨ˆã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: æ–°è¦è¿½åŠ ãƒ»å¤‰æ›´

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ ğŸ”µ

### 1.1 ã‚³ã‚¢æŠ€è¡“

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **è¨€èª** | TypeScript | 5.x | å‹å®‰å…¨ãªé–‹ç™º |
| **ã‚²ãƒ¼ãƒ FW** | Phaser | 3.87+ | 2Dã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ |
| **UIãƒ—ãƒ©ã‚°ã‚¤ãƒ³** | rexUI | æœ€æ–° | ã‚²ãƒ¼ãƒ å†…UIï¼ˆCanvasï¼‰ |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS | 4.x | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤UIï¼ˆHTMLï¼‰ |
| **ãƒ“ãƒ«ãƒ‰** | Vite | 6.x | é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ»HMR |

### 1.2 é–‹ç™ºãƒ„ãƒ¼ãƒ«

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸** | pnpm | 9.x | é«˜é€Ÿãƒ»çœå®¹é‡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† |
| **Lint/Format** | Biome | 2.x | çµ±åˆãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ |
| **Git Hooks** | Lefthook | 1.x | ã‚³ãƒŸãƒƒãƒˆå“è³ªç®¡ç† |

### 1.3 ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **Unit Test** | Vitest | 2.x | é«˜é€Ÿãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| **E2E Test** | Playwright | æœ€æ–° | ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | TypeDoc | æœ€æ–° | APIæ–‡æ›¸ç”Ÿæˆ |

### 1.4 ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

| æŠ€è¡“ | ç”¨é€” | è©³ç´° |
|------|------|------|
| localStorage | ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ä¿å­˜ | 3ã‚¹ãƒ­ãƒƒãƒˆå¯¾å¿œã€è‡ªå‹•ã‚»ãƒ¼ãƒ– |
| JSON | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿å½¢å¼ | ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒãƒ³ãƒ‰ãƒ« |

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸ”´

### 2.1 æ¡ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | é©ç”¨ç¯„å›² | èª¬æ˜ |
|---------|---------|------|
| **Feature-Based Architecture** | å…¨ä½“æ§‹é€  | æ©Ÿèƒ½å˜ä½ã§ã®ã‚³ãƒ¼ãƒ‰é…ç½® |
| **Functional Core, Imperative Shell** | ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢ | ç´”ç²‹é–¢æ•°ã¨I/Oã®åˆ†é›¢ |
| **Scene-based Architecture** | Presentation | Phaserã®ã‚·ãƒ¼ãƒ³ç®¡ç†ã‚’æ´»ç”¨ |
| **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ** | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“é€šä¿¡ | EventBusã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡ |

### 2.2 Feature-Based Architecture

ã‚³ãƒ¼ãƒ‰ã‚’æŠ€è¡“çš„ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯ãªãã€**æ©Ÿèƒ½ï¼ˆFeatureï¼‰å˜ä½**ã§æ•´ç†ã™ã‚‹ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ

- **é«˜å‡é›†**: é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒè¿‘ãã«é…ç½®ã•ã‚Œã‚‹
- **ä½çµåˆ**: æ©Ÿèƒ½é–“ã®ä¾å­˜ãŒæ˜ç¢ºã«ãªã‚‹
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã«æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¸ã®å½±éŸ¿ãŒå°‘ãªã„
- **å‰Šé™¤å®¹æ˜“æ€§**: æ©Ÿèƒ½ã‚’ãƒ•ã‚©ãƒ«ãƒ€ã”ã¨å‰Šé™¤ã§ãã‚‹

#### æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

```
features/{feature-name}/
â”œâ”€â”€ components/     # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ services/       # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”œâ”€â”€ types/          # å‹å®šç¾©
â””â”€â”€ index.ts        # å…¬é–‹API
```

### 2.3 Functional Core, Imperative Shell

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’2ã¤ã®éƒ¨åˆ†ã«åˆ†é›¢ã™ã‚‹ã€‚

| éƒ¨åˆ† | è²¬å‹™ | ç‰¹å¾´ |
|------|------|------|
| **Functional Core** | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ | ç´”ç²‹é–¢æ•°ã€å‰¯ä½œç”¨ãªã—ã€ãƒ†ã‚¹ãƒˆå®¹æ˜“ |
| **Imperative Shell** | I/Oã€çŠ¶æ…‹ç®¡ç†ã€UI | å‰¯ä½œç”¨ã‚ã‚Šã€å¤–éƒ¨ã¨ã®å¢ƒç•Œ |

#### Functional Coreï¼ˆç´”ç²‹é–¢æ•°ï¼‰ã«ç½®ãã‚‚ã®

- è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå ±é…¬è¨ˆç®—ã€å“è³ªè¨ˆç®—ã€ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ç­‰ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›
- ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«åˆ¤å®š

#### Imperative Shellï¼ˆå‰¯ä½œç”¨ï¼‰ã«ç½®ãã‚‚ã®

- Phaserã‚·ãƒ¼ãƒ³
- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- StateManageræ“ä½œ
- EventBusæ“ä½œ
- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸èª­ã¿æ›¸ã

### 2.4 ãƒ‘ã‚¿ãƒ¼ãƒ³é–“ã®é–¢ä¿‚

```mermaid
graph TB
    subgraph "Scenes (Imperative Shell)"
        Boot[BootScene]
        Title[TitleScene]
        Main[MainScene]
        Shop[ShopScene]
    end

    subgraph "Features"
        Quest[features/quest]
        Alchemy[features/alchemy]
        Gathering[features/gathering]
        Deck[features/deck]
    end

    subgraph "Shared (Imperative Shell)"
        SM[StateManager]
        EB[EventBus]
        Repo[Repositories]
    end

    Main --> Quest
    Main --> Alchemy
    Main --> Gathering
    Main --> Deck
    Quest --> SM
    Quest --> EB
    Alchemy --> SM
    Alchemy --> EB
    SM --> Repo
```

---

## 3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ğŸ”´

### 3.1 å…¨ä½“æ§‹é€ 

```
atelier-guild-rank/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ features/               # æ©Ÿèƒ½å˜ä½ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ quest/              # ä¾é ¼æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # QuestCard, QuestList, QuestDetailModal
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # quest-generator, reward-calculator (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # Quest, Client å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ index.ts        # å…¬é–‹API
â”‚   â”‚   â”œâ”€â”€ alchemy/            # èª¿åˆæ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # RecipeList, AlchemyPanel
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # quality-calculator, recipe-validator (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # Recipe, Material å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ gathering/          # æ¡å–æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # GatheringField, MaterialCard
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # material-generator, draft-logic (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ deck/               # ãƒ‡ãƒƒã‚­æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # CardUI, HandDisplay, DeckView
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # deck-operations, shuffle (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # Card å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ inventory/          # ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªæ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # InventoryPanel, ItemSlot
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # inventory-operations (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ shop/               # ã‚·ãƒ§ãƒƒãƒ—æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # ShopPanel, ShopItemCard
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # price-calculator (ç´”ç²‹é–¢æ•°)
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ rank/               # ãƒ©ãƒ³ã‚¯æ©Ÿèƒ½
â”‚   â”‚       â”œâ”€â”€ components/     # RankDisplay, RankUpPanel
â”‚   â”‚       â”œâ”€â”€ services/       # rank-calculator, promotion-checker (ç´”ç²‹é–¢æ•°)
â”‚   â”‚       â”œâ”€â”€ types/
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ shared/                 # æ©Ÿèƒ½æ¨ªæ–­ã®å…±é€šã‚³ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ components/         # BaseComponent, Button, Dialog
â”‚   â”‚   â”œâ”€â”€ services/           # EventBus, StateManager (Imperative Shell)
â”‚   â”‚   â”œâ”€â”€ repositories/       # SaveDataRepository, MasterDataRepository
â”‚   â”‚   â”œâ”€â”€ types/              # å…±é€šå‹å®šç¾©ã€GameStateã€Events
â”‚   â”‚   â””â”€â”€ utils/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ scenes/                 # Phaserã‚·ãƒ¼ãƒ³ï¼ˆæ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã‚‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ BootScene.ts
â”‚   â”‚   â”œâ”€â”€ TitleScene.ts
â”‚   â”‚   â”œâ”€â”€ MainScene.ts
â”‚   â”‚   â”œâ”€â”€ ShopScene.ts
â”‚   â”‚   â”œâ”€â”€ RankUpScene.ts
â”‚   â”‚   â”œâ”€â”€ GameOverScene.ts
â”‚   â”‚   â””â”€â”€ GameClearScene.ts
â”‚   â””â”€â”€ main.ts                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ tests/                      # ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ features/           # æ©Ÿèƒ½å˜ä½ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ shared/             # å…±é€šã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ integration/
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ specs/
â”‚   â”œâ”€â”€ pages/
â”‚   â””â”€â”€ fixtures/
â””â”€â”€ public/
    â””â”€â”€ assets/
```

### 3.2 å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è²¬å‹™

| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | è²¬å‹™ | å«ã‚€ã‚‚ã® |
|-------------|------|---------|
| `features/` | æ©Ÿèƒ½å˜ä½ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | UIã€ãƒ­ã‚¸ãƒƒã‚¯ã€å‹å®šç¾© |
| `shared/` | æ©Ÿèƒ½æ¨ªæ–­ã®å…±é€šã‚³ãƒ¼ãƒ‰ | EventBusã€StateManagerã€å…±é€šUI |
| `scenes/` | Phaserã‚·ãƒ¼ãƒ³ | æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ãŸç”»é¢ |
| `tests/` | ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ |
| `e2e/` | E2Eãƒ†ã‚¹ãƒˆ | Playwrightãƒ†ã‚¹ãƒˆ |

---

## 4. æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è©³ç´° ğŸ”´

### 4.1 Questæ©Ÿèƒ½

```
features/quest/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ QuestCard.ts            # ä¾é ¼ã‚«ãƒ¼ãƒ‰UI
â”‚   â”œâ”€â”€ QuestList.ts            # ä¾é ¼ãƒªã‚¹ãƒˆUI
â”‚   â””â”€â”€ QuestDetailModal.ts     # ä¾é ¼è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ quest-generator.ts      # ä¾é ¼ç”Ÿæˆï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â”œâ”€â”€ quest-validator.ts      # ä¾é ¼æ¤œè¨¼ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â””â”€â”€ reward-calculator.ts    # å ±é…¬è¨ˆç®—ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ quest.ts                # Quest, QuestDifficulty
â”‚   â””â”€â”€ client.ts               # Client, ClientType
â””â”€â”€ index.ts
```

**å…¬é–‹APIä¾‹**:
```typescript
// features/quest/index.ts
export { QuestCard } from './components/QuestCard';
export { QuestList } from './components/QuestList';
export { generateQuest, validateQuest } from './services/quest-generator';
export { calculateReward } from './services/reward-calculator';
export type { Quest, QuestDifficulty, Client } from './types';
```

### 4.2 Alchemyæ©Ÿèƒ½

```
features/alchemy/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ RecipeList.ts           # ãƒ¬ã‚·ãƒ”ãƒªã‚¹ãƒˆUI
â”‚   â”œâ”€â”€ AlchemyPanel.ts         # èª¿åˆãƒ‘ãƒãƒ«UI
â”‚   â””â”€â”€ QualityIndicator.ts     # å“è³ªè¡¨ç¤ºUI
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ quality-calculator.ts   # å“è³ªè¨ˆç®—ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â”œâ”€â”€ recipe-validator.ts     # ãƒ¬ã‚·ãƒ”æ¤œè¨¼ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â””â”€â”€ crafting-logic.ts       # èª¿åˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ recipe.ts               # Recipe
â”‚   â””â”€â”€ quality.ts              # Quality, Grade
â””â”€â”€ index.ts
```

### 4.3 Deckæ©Ÿèƒ½

```
features/deck/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CardUI.ts               # ã‚«ãƒ¼ãƒ‰UI
â”‚   â”œâ”€â”€ HandDisplay.ts          # æ‰‹æœ­è¡¨ç¤º
â”‚   â”œâ”€â”€ DeckView.ts             # ãƒ‡ãƒƒã‚­è¡¨ç¤º
â”‚   â””â”€â”€ DraggableCardUI.ts      # ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚«ãƒ¼ãƒ‰
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ deck-operations.ts      # ãƒ‡ãƒƒã‚­æ“ä½œï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â”œâ”€â”€ shuffle.ts              # ã‚·ãƒ£ãƒƒãƒ•ãƒ«ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”‚   â””â”€â”€ draw-logic.ts           # ãƒ‰ãƒ­ãƒ¼å‡¦ç†ï¼ˆç´”ç²‹é–¢æ•°ï¼‰
â”œâ”€â”€ types/
â”‚   â””â”€â”€ card.ts                 # Card, CardType
â””â”€â”€ index.ts
```

---

## 5. Sharedï¼ˆå…±é€šã‚³ãƒ¼ãƒ‰ï¼‰è©³ç´° ğŸ”´

### 5.1 Servicesï¼ˆImperative Shellï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | è²¬å‹™ |
|---------|------|
| EventBus | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ã‚¤ãƒ™ãƒ³ãƒˆé€šä¿¡ |
| StateManager | ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®ä¸€å…ƒç®¡ç†ï¼ˆã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ï¼‰ |
| GameFlowManager | ã‚·ãƒ¼ãƒ³é·ç§»ãƒ»ã‚²ãƒ¼ãƒ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« |

### 5.2 Repositories

| ãƒªãƒã‚¸ãƒˆãƒª | è²¬å‹™ |
|-----------|------|
| SaveDataRepository | ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ– |
| MasterDataRepository | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |

### 5.3 Components

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ |
|---------------|------|
| BaseComponent | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åŸºåº•ã‚¯ãƒ©ã‚¹ |
| Button | ãƒœã‚¿ãƒ³UI |
| Dialog | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°UI |

---

## 6. Phaserã‚·ãƒ¼ãƒ³ ğŸ”µ

### 6.1 ã‚·ãƒ¼ãƒ³ä¸€è¦§

| ã‚·ãƒ¼ãƒ³ | è²¬å‹™ | ä½¿ç”¨ã™ã‚‹æ©Ÿèƒ½ |
|--------|------|-------------|
| **BootScene** | ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹åˆæœŸåŒ– | shared |
| **TitleScene** | ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆé¸æŠ | shared |
| **MainScene** | ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ | quest, gathering, alchemy, deck, inventory |
| **ShopScene** | ã‚«ãƒ¼ãƒ‰ãƒ»ã‚¢ã‚¤ãƒ†ãƒ è³¼å…¥ | shop, deck |
| **RankUpScene** | æ˜‡æ ¼è©¦é¨“ | rank |
| **GameOverScene** | å¤±æ•—æ¼”å‡ºãƒ»ãƒªãƒˆãƒ©ã‚¤ | shared |
| **GameClearScene** | ã‚¯ãƒªã‚¢æ¼”å‡ºãƒ»çµ±è¨ˆè¡¨ç¤º | shared |

### 6.2 ã‚·ãƒ¼ãƒ³é·ç§»å›³

```mermaid
graph TD
    Boot[BootScene] --> Title[TitleScene]
    Title --> Main[MainScene]
    Main --> Shop[ShopScene]
    Shop --> Main
    Main --> RankUp[RankUpScene]
    RankUp --> Main
    Main --> GameOver[GameOverScene]
    Main --> GameClear[GameClearScene]
    GameOver --> Title
    GameClear --> Title
```

---

## 7. ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ« ğŸ”´

### 7.1 ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹

```typescript
// tsconfig.json
{
  "compilerOptions": {
    "paths": {
      "@features/*": ["src/features/*"],
      "@shared/*": ["src/shared/*"],
      "@scenes/*": ["src/scenes/*"]
    }
  }
}
```

### 7.2 ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«

```typescript
// æ©Ÿèƒ½é–“ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ: index.tsçµŒç”±
import { Quest, generateQuest } from '@features/quest';
import { Card } from '@features/deck';

// æ©Ÿèƒ½å†…ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ: ç›´æ¥å‚ç…§OK
import { QuestCard } from './components/QuestCard';
import { validateQuest } from './services/quest-validator';

// å…±é€šã‚³ãƒ¼ãƒ‰
import { EventBus } from '@shared/services';
import { Button } from '@shared/components';
```

### 7.3 ä¾å­˜ãƒ«ãƒ¼ãƒ«

- æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä»–ã®æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`index.ts`çµŒç”±ã§ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½
- æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯`shared/`ã«ä¾å­˜å¯èƒ½
- `shared/`ã¯ç‰¹å®šã®æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ä¾å­˜ã—ã¦ã¯ãªã‚‰ãªã„
- `scenes/`ã¯ä»»æ„ã®æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨`shared/`ã«ä¾å­˜å¯èƒ½

---

## 8. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ ğŸ”´

### 8.1 ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®åˆ†é¡

| éƒ¨åˆ† | ãƒ†ã‚¹ãƒˆæ–¹æ³• | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |
|------|-----------|--------------|
| **Functional Core** | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ä¸è¦ï¼‰ | 90%+ |
| **Imperative Shell** | çµ±åˆãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ†ã‚¹ãƒˆ | 60%+ |

### 8.2 Functional Coreã®ãƒ†ã‚¹ãƒˆä¾‹

```typescript
// features/alchemy/services/quality-calculator.test.ts
describe('calculateQuality', () => {
  it('ç´ æã®å¹³å‡å“è³ªã‚’è¨ˆç®—ã™ã‚‹', () => {
    const materials = [{ quality: 80 }, { quality: 60 }];
    const recipe = { qualityBonus: 10 };

    const result = calculateQuality(materials, recipe);

    expect(result.quality).toBe(80); // (80+60)/2 + 10
    expect(result.grade).toBe('A');
  });
});
```

### 8.3 ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ quest/
â”‚   â”‚   â”‚   â””â”€â”€ quest-generator.test.ts
â”‚   â”‚   â”œâ”€â”€ alchemy/
â”‚   â”‚   â”‚   â””â”€â”€ quality-calculator.test.ts
â”‚   â”‚   â””â”€â”€ deck/
â”‚   â”‚       â””â”€â”€ deck-operations.test.ts
â”‚   â””â”€â”€ shared/
â”‚       â””â”€â”€ state-manager.test.ts
â””â”€â”€ integration/
```

---

## 9. è¨­è¨ˆåŸå‰‡ ğŸ”´

### 9.1 ç¦æ­¢äº‹é …

- æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®ç›´æ¥çš„ãªå†…éƒ¨å‚ç…§ï¼ˆ`index.ts`çµŒç”±ã§å…¬é–‹ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰
- Functional Coreå†…ã§ã®å‰¯ä½œç”¨ï¼ˆçŠ¶æ…‹å¤‰æ›´ã€I/Oã€ä¹±æ•°ç”Ÿæˆç­‰ï¼‰
- Imperative Shellå†…ã§ã®è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- å¾ªç’°ä¾å­˜ã®ç™ºç”Ÿ
- `src/`å†…ã¸ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«é…ç½®

### 9.2 æ¨å¥¨äº‹é …

- æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è‡ªå·±å®Œçµçš„ã«è¨­è¨ˆ
- ç´”ç²‹é–¢æ•°ã¯å…¥åŠ›ã®ã¿ã«ä¾å­˜ã—ã€å¸¸ã«åŒã˜çµæœã‚’è¿”ã™
- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯BaseComponentã‚’ç¶™æ‰¿
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã‚’ç–çµåˆã«ä¿ã¤

---

## é–¢é€£æ–‡æ›¸

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°](architecture-components.md)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ - Phaserå®Ÿè£…è©³ç´°](architecture-phaser.md)
- [ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ  - æ¦‚è¦](core-systems-overview.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](dataflow.md)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒ«](.claude/rules/architecture.md)
