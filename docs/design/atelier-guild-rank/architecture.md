# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0
**ä½œæˆæ—¥**: 2026-01-01
**æœ€çµ‚æ›´æ–°**: 2026-01-14
**å¯¾è±¡**: ã‚¢ãƒˆãƒªã‚¨éŒ¬é‡‘è¡“ã‚²ãƒ¼ãƒ ï¼ˆã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ï¼‰Phaserç‰ˆ

---

## æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€éŒ¬é‡‘è¡“ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ãƒ‡ãƒƒã‚­æ§‹ç¯‰RPGã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

> éŒ¬é‡‘è¡“å¸«ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ãŒã€æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã¨ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã®ãƒ‡ãƒƒã‚­ã‚’é§†ä½¿ã—ã€
> ä¾é ¼ã‚’é”æˆã—ã¦è²¢çŒ®åº¦ã‚’ç¨¼ãã€ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯ã¨ã„ã†ã€Œæ•µã€ã‚’å€’ã—ã¦ã„ã
> ã€Œæˆ¦ç•¥çš„ãƒ‡ãƒƒã‚­æ§‹ç¯‰ã€ã¨ã€Œãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ã®é”æˆæ„Ÿã€ã‚’å‘³ã‚ã†ã‚²ãƒ¼ãƒ 

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´

- **Clean Architectureï¼ˆ4å±¤æ§‹é€ ï¼‰** ã«ã‚ˆã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç‹¬ç«‹æ€§ç¢ºä¿
- **Phaserãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** ã«ã‚ˆã‚‹æ´—ç·´ã•ã‚ŒãŸã‚²ãƒ¼ãƒ UIè¡¨ç¾
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ** ã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡
- Domain/Application/Infrastructureå±¤ã¯æ—¢å­˜è¨­è¨ˆã‚’ç¶­æŒã—ã€Presentationå±¤ã®ã¿Phaserã«ç½®ãæ›ãˆ

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«å‡¡ä¾‹

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ãƒ»æ—¢å­˜è¨­è¨ˆæ›¸ã«è©³ç´°è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ãƒ»æ—¢å­˜è¨­è¨ˆã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: Phaserå¯¾å¿œã®ãŸã‚ã®æ–°è¦è¿½åŠ 

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ ğŸ”´

### 1.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| TypeScript | 5.x | ãƒ¡ã‚¤ãƒ³è¨€èª |
| **Phaser** | 3.87+ | ã‚²ãƒ¼ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **rexUI Plugin** | æœ€æ–° | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã€ãƒœã‚¿ãƒ³ç­‰ï¼‰ |
| Vite | 5.x | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |

### 1.2 ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| localStorage | ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
| JSON | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿å½¢å¼ |

### 1.3 ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” | å¿…é ˆ |
|-----------|------|------|
| phaser | ã‚²ãƒ¼ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | â—‹ |
| phaser3-rex-plugins | UIæ‹¡å¼µï¼ˆDialog, Buttons, Sizerç­‰ï¼‰ | â—‹ |

**è¨­è¨ˆæ–¹é‡**:
- æ—¢å­˜ã®Domain/Application/Infrastructureå±¤ã¯ãã®ã¾ã¾ç¶­æŒ
- Presentationå±¤ã®ã¿Phaserã«ç½®ãæ›ãˆ
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯Phaserã«ä¾å­˜ã—ãªã„
- å¤–éƒ¨ä¾å­˜ã‚’å¿…è¦æœ€å°é™ã«æŠ‘ãˆã‚‹

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸŸ¡

### 2.1 æ¡ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

- **Clean Architecture**: 4å±¤æ§‹é€ ã«ã‚ˆã‚‹è²¬å‹™åˆ†é›¢
- **Scene-based Architecture**: Phaserã®ã‚·ãƒ¼ãƒ³ç®¡ç†ã‚’æ´»ç”¨ ğŸ”´
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ**: EventBusã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡
- **State Machine**: ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ã«çŠ¶æ…‹æ©Ÿæ¢°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨

### 2.2 é¸æŠç†ç”±

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|---------|------|
| Clean Architecture | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç‹¬ç«‹æ€§ç¢ºä¿ã€ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š |
| Scene-based | Phaserã®ç”»é¢ç®¡ç†ã¨ã®è¦ªå’Œæ€§ |
| ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹• | UIãƒ»ãƒ­ã‚¸ãƒƒã‚¯é–“ãŠã‚ˆã³Phaser-Domainé–“ã®ç–çµåˆåŒ–ã€æ‹¡å¼µæ€§ç¢ºä¿ |
| State Machine | ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã®å³å¯†ãªç®¡ç†ã€ä¸æ­£é·ç§»é˜²æ­¢ |

---

## 3. ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€  ğŸ”´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Presentation Layer (Phaser)                 â”‚
â”‚  (Phaser Scenes, GameObjects, rexUI Components)             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚BootScene   â”‚ â”‚ TitleScene  â”‚ â”‚ MainScene   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ShopScene   â”‚ â”‚RankUpScene  â”‚ â”‚ResultScene  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚           UI Components (rexUI)              â”‚           â”‚
â”‚  â”‚  Dialog, Buttons, Sizer, ProgressBar, etc.  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Events / Method Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                        â”‚
â”‚  (ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡, çŠ¶æ…‹ç®¡ç†, ã‚¤ãƒ™ãƒ³ãƒˆèª¿æ•´)                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚GameFlowMgr  â”‚ â”‚PhaseManager â”‚ â”‚ EventBus    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚StateManager â”‚ â”‚ UseCases    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Method Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Domain Layer                           â”‚
â”‚  (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯, ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹, ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£)             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ DeckService â”‚ â”‚GatheringSvc â”‚ â”‚ AlchemySvc  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ QuestServiceâ”‚ â”‚ContribCalc  â”‚ â”‚ ShopService â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ RankService â”‚ â”‚ArtifactSvc  â”‚ â”‚MaterialSvc  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Data Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Infrastructure Layer                      â”‚
â”‚  (ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹, å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº, ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚SaveDataRepo â”‚ â”‚MasterLoader â”‚ â”‚RandomGen    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1 å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | è²¬å‹™ | ä¾å­˜å¯èƒ½ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ | å¤‰æ›´ç‚¹ |
|---------|------|------------------|--------|
| Presentation | UIè¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å—ä»˜ | Application | **PhaseråŒ–** |
| Application | ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã€çŠ¶æ…‹ç®¡ç† | Domain | ç¶­æŒ |
| Domain | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ«ãƒ¼ãƒ«å®Ÿè£… | Infrastructure (ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±) | ç¶­æŒ |
| Infrastructure | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€å¤–éƒ¨é€£æº | ãªã— | ç¶­æŒ |

---

## 4. Phaser ã‚·ãƒ¼ãƒ³æ§‹æˆ ğŸ”´

### 4.1 ã‚·ãƒ¼ãƒ³ä¸€è¦§

| ã‚·ãƒ¼ãƒ³ã‚­ãƒ¼ | ã‚¯ãƒ©ã‚¹å | èª¬æ˜ | ä¾å­˜ã‚·ãƒ¼ãƒ³ |
|-----------|---------|------|-----------|
| `Boot` | BootScene | ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã€åˆæœŸåŒ– | - |
| `Title` | TitleScene | ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ | Boot |
| `Main` | MainScene | ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ | Title |
| `Shop` | ShopScene | ã‚·ãƒ§ãƒƒãƒ—ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰ | Main |
| `RankUp` | RankUpScene | æ˜‡æ ¼è©¦é¨“ | Main |
| `GameOver` | GameOverScene | ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ | Main |
| `GameClear` | GameClearScene | ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ç”»é¢ | Main |

### 4.2 ã‚·ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```typescript
class BaseGameScene extends Phaser.Scene {
  // Phaserãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
  init(data?: SceneData): void;      // ã‚·ãƒ¼ãƒ³åˆæœŸåŒ–
  preload(): void;                    // ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰
  create(data?: SceneData): void;     // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ
  update(time: number, delta: number): void; // æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°

  // è¿½åŠ ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã®é€£æºï¼‰
  protected bindEvents(): void;       // EventBusè³¼èª­
  protected unbindEvents(): void;     // EventBusè³¼èª­è§£é™¤
}
```

### 4.3 ã‚·ãƒ¼ãƒ³é·ç§»å›³ ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> Boot: ã‚²ãƒ¼ãƒ èµ·å‹•

    Boot --> Title: ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰å®Œäº†

    Title --> Main: æ–°è¦ã‚²ãƒ¼ãƒ  / ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼

    Main --> Shop: ã‚·ãƒ§ãƒƒãƒ—é–‹ãï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰
    Shop --> Main: é–‰ã˜ã‚‹

    Main --> RankUp: æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æº€ã‚¿ãƒ³
    RankUp --> Main: è©¦é¨“ã‚¯ãƒªã‚¢
    RankUp --> GameOver: è©¦é¨“å¤±æ•—

    Main --> GameOver: æ—¥æ•°åˆ‡ã‚Œ
    Main --> GameClear: Sãƒ©ãƒ³ã‚¯åˆ°é”

    GameOver --> Title: ã‚¿ã‚¤ãƒˆãƒ«ã¸
    GameClear --> Title: ã‚¿ã‚¤ãƒˆãƒ«ã¸
```

---

## 5. Phaser ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ•ã‚£ã‚° ğŸ”´

### 5.1 åŸºæœ¬è¨­å®š

```typescript
const gameConfig: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,           // WebGLå„ªå…ˆã€Canvas fallback
  parent: 'game-container',     // è¦ªè¦ç´ ID
  width: 1280,                  // ã‚²ãƒ¼ãƒ å¹…
  height: 720,                  // ã‚²ãƒ¼ãƒ é«˜ã•
  backgroundColor: '#F5F5DC',   // ãƒ™ãƒ¼ã‚¸ãƒ¥ï¼ˆç¾Šçš®ç´™é¢¨ï¼‰
  scale: {
    mode: Phaser.Scale.FIT,     // ç”»é¢ã«ãƒ•ã‚£ãƒƒãƒˆ
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
  scene: [
    BootScene,
    TitleScene,
    MainScene,
    ShopScene,
    RankUpScene,
    GameOverScene,
    GameClearScene,
  ],
  plugins: {
    scene: [
      {
        key: 'rexUI',
        plugin: UIPlugin,
        mapping: 'rexUI',
      },
    ],
  },
  dom: {
    createContainer: false,     // DOMè¦ç´ ã¯ä½¿ç”¨ã—ãªã„
  },
};
```

### 5.2 è§£åƒåº¦ã¨ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

| è¨­å®š | å€¤ | ç†ç”± |
|------|-----|------|
| åŸºæº–è§£åƒåº¦ | 1280 x 720 | 16:9ã®æ¨™æº–HD |
| ã‚¹ã‚±ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ‰ | FIT | ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒã§ãƒ•ã‚£ãƒƒãƒˆ |
| æœ€å°è§£åƒåº¦ | 960 x 540 | ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ |

---

## 6. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆï¼ˆrexUIï¼‰ğŸ”´

### 6.1 ä½¿ç”¨ã™ã‚‹rexUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç”¨é€” | å¯¾å¿œUI |
|--------------|------|--------|
| **Dialog** | ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° | ç¢ºèªã€å ±é…¬é¸æŠã€ä¾é ¼è©³ç´° |
| **Buttons** | ãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— | ãƒ•ã‚§ãƒ¼ã‚ºæ“ä½œã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ |
| **GridButtons** | ã‚°ãƒªãƒƒãƒ‰é…ç½®ãƒœã‚¿ãƒ³ | ã‚«ãƒ¼ãƒ‰é¸æŠã€ç´ æé¸æŠ |
| **Sizer** | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ¶å¾¡ | å…¨èˆ¬çš„ãªUIé…ç½® |
| **OverlapSizer** | é‡ã­åˆã‚ã›ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | ã‚«ãƒ¼ãƒ‰é‡ã­è¡¨ç¤º |
| **ProgressBar** | é€²æ—è¡¨ç¤º | æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ã€æ—¥æ•°ãƒãƒ¼ |
| **Label** | ãƒ†ã‚­ã‚¹ãƒˆï¼‹ã‚¢ã‚¤ã‚³ãƒ³ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º |
| **ScrollablePanel** | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« | ä¾é ¼ä¸€è¦§ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª |
| **Toast** | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ç²å¾—é€šçŸ¥ã€è­¦å‘Š |

### 6.2 ã‚«ã‚¹ã‚¿ãƒ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç¶™æ‰¿å…ƒ | èª¬æ˜ |
|--------------|-------|------|
| CardView | Container | ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆæ¡å–åœ°/ãƒ¬ã‚·ãƒ”/å¼·åŒ–ï¼‰ |
| HandView | Container | æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢ |
| DeckView | Container | å±±æœ­ãƒ»æ¨ã¦æœ­è¡¨ç¤º |
| MaterialView | Container | ç´ æè¡¨ç¤º |
| MaterialOptionView | GridButtons | ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã®ç´ æé¸æŠ |
| InventoryView | ScrollablePanel | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè¡¨ç¤º |
| QuestView | Container | ä¾é ¼è¡¨ç¤º |
| QuestListView | ScrollablePanel | ä¾é ¼ä¸€è¦§ |
| ClientView | Container | ä¾é ¼è€…è¡¨ç¤º |
| RankProgressView | ProgressBar | ãƒ©ãƒ³ã‚¯é€²æ—ãƒãƒ¼ |
| PhaseIndicator | Container | ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º |
| ActionPointView | Label | è¡Œå‹•ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º |
| GoldView | Label | æ‰€æŒé‡‘è¡¨ç¤º |
| DayCounter | Label | æ®‹ã‚Šæ—¥æ•°è¡¨ç¤º |
| RewardCardSelector | Dialog | å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠ |
| ButtonComponent | rexUI.Buttons | ã‚«ã‚¹ã‚¿ãƒ ãƒœã‚¿ãƒ³ï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒª/ã‚»ã‚«ãƒ³ãƒ€ãƒªï¼‰ |

---

## 7. MainSceneã®ãƒ•ã‚§ãƒ¼ã‚ºUIæ§‹é€  ğŸ”´

### 7.1 ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥UIã‚³ãƒ³ãƒ†ãƒŠ

MainSceneã¯1ã¤ã®ã‚·ãƒ¼ãƒ³å†…ã§4ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºUIã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

```typescript
class MainScene extends Phaser.Scene {
  // ãƒ•ã‚§ãƒ¼ã‚ºUIã‚³ãƒ³ãƒ†ãƒŠ
  private questAcceptUI: QuestAcceptPhaseUI;
  private gatheringUI: GatheringPhaseUI;
  private alchemyUI: AlchemyPhaseUI;
  private deliveryUI: DeliveryPhaseUI;

  // å…±é€šUI
  private headerUI: HeaderUI;        // ãƒ©ãƒ³ã‚¯ã€æ—¥æ•°ã€ã‚´ãƒ¼ãƒ«ãƒ‰ç­‰
  private sidebarUI: SidebarUI;      // ä¾é ¼ä¸€è¦§ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª
  private phaseIndicator: PhaseIndicator;
  private handUI: HandUI;            // æ‰‹æœ­è¡¨ç¤º

  // ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º
  private currentPhaseUI: BasePhaseUI | null;
}
```

### 7.2 ãƒ•ã‚§ãƒ¼ã‚ºé·ç§» ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> QuestAccept: æ—¥é–‹å§‹

    state "MainSceneå†…ã®ãƒ•ã‚§ãƒ¼ã‚ºUI" as Main {
        QuestAccept --> Gathering: å—æ³¨å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Gathering --> Alchemy: æ¡å–å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Alchemy --> Delivery: èª¿åˆå®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Delivery --> DayEnd: ç´å“å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    }

    DayEnd --> QuestAccept: æ¬¡ã®æ—¥ã¸
    DayEnd --> [*]: æ—¥æ•°åˆ‡ã‚Œ/æ˜‡æ ¼è©¦é¨“
```

---

## 8. Phaser-Applicationå±¤é€£æº ğŸ”´

### 8.1 é€£æºãƒ‘ã‚¿ãƒ¼ãƒ³

```mermaid
sequenceDiagram
    participant Scene as Phaser Scene
    participant EventBus as EventBus
    participant UseCase as UseCase
    participant State as StateManager

    Note over Scene: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
    Scene->>UseCase: execute(params)
    UseCase->>State: update()
    State->>EventBus: publish(event)
    EventBus->>Scene: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
    Scene->>Scene: UIæ›´æ–°
```

### 8.2 ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ä¾‹

```typescript
class MainScene extends Phaser.Scene {
  private eventBus: IEventBus;

  create(): void {
    this.bindEvents();
  }

  private bindEvents(): void {
    // Applicationå±¤ã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­
    this.eventBus.subscribe('PHASE_CHANGED', this.onPhaseChanged.bind(this));
    this.eventBus.subscribe('QUEST_ACCEPTED', this.onQuestAccepted.bind(this));
    this.eventBus.subscribe('GATHERING_COMPLETED', this.onGatheringCompleted.bind(this));
    this.eventBus.subscribe('ITEM_CRAFTED', this.onItemCrafted.bind(this));
    this.eventBus.subscribe('QUEST_DELIVERED', this.onQuestDelivered.bind(this));
    this.eventBus.subscribe('STATE_UPDATED', this.onStateUpdated.bind(this));
  }

  shutdown(): void {
    this.unbindEvents();
  }

  private unbindEvents(): void {
    this.eventBus.unsubscribeAll();
  }
}
```

---

## 9. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆï¼ˆApplication/Domainå±¤ï¼‰

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€æ—¢å­˜è¨­è¨ˆã‚’ç¶­æŒã™ã‚‹Applicationå±¤ãƒ»Domainå±¤ã®è©³ç´°è¨­è¨ˆã‚’è¨˜è¼‰ã™ã‚‹ã€‚

### 9.1 Application Layer

#### GameFlowManager ğŸŸ¡

ã‚²ãƒ¼ãƒ å…¨ä½“ã®ãƒ•ãƒ­ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹ä¸­æ ¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚

```typescript
class GameFlowManager {
  // ã‚²ãƒ¼ãƒ é–‹å§‹
  startNewGame(): void;
  // ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼
  continueGame(): void;
  // ã‚²ãƒ¼ãƒ çµ‚äº†åˆ¤å®š
  checkGameEnd(): GameEndResult | null;
  // æ—¥çµ‚äº†å‡¦ç†
  endDay(): void;
  // ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—å‡¦ç†
  rankUp(): void;
}
```

#### PhaseManager ğŸ”µ

1æ—¥4ãƒ•ã‚§ãƒ¼ã‚ºã®é·ç§»ã‚’ç®¡ç†ã€‚

```typescript
class PhaseManager {
  private currentPhase: GamePhase;

  // ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»
  transitionTo(phase: GamePhase): boolean;
  // æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸
  nextPhase(): void;
  // ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºå–å¾—
  getCurrentPhase(): GamePhase;
  // ãƒ•ã‚§ãƒ¼ã‚ºã‚¹ã‚­ãƒƒãƒ—å¯èƒ½ã‹
  canSkipPhase(): boolean;
}
```

**ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»å›³** ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> QUEST_ACCEPT: æ—¥é–‹å§‹
    QUEST_ACCEPT --> GATHERING: å—æ³¨å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    GATHERING --> ALCHEMY: æ¡å–å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    ALCHEMY --> DELIVERY: èª¿åˆå®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    DELIVERY --> [*]: ç´å“å®Œäº†/ã‚¹ã‚­ãƒƒãƒ— â†’ æ—¥çµ‚äº†
```

#### EventBus ğŸŸ¡

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ç–çµåˆãªé€šä¿¡ã‚’å®Ÿç¾ã€‚

```typescript
class EventBus {
  // ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­
  subscribe<T extends IGameEvent>(
    eventType: GameEventType,
    handler: (event: T) => void
  ): () => void;

  // ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
  publish<T extends IGameEvent>(event: T): void;

  // å…¨è³¼èª­è§£é™¤
  unsubscribeAll(eventType?: GameEventType): void;
}
```

#### StateManager ğŸŸ¡

ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®é›†ä¸­ç®¡ç†ã€‚

```typescript
class StateManager {
  private gameState: IGameState;
  private deckState: IDeckState;
  private inventoryState: IInventoryState;
  private questState: IQuestState;

  // çŠ¶æ…‹å–å¾—
  getGameState(): Readonly<IGameState>;
  getDeckState(): Readonly<IDeckState>;
  getInventoryState(): Readonly<IInventoryState>;
  getQuestState(): Readonly<IQuestState>;

  // çŠ¶æ…‹æ›´æ–°
  updateGameState(partial: Partial<IGameState>): void;
  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¾©å…ƒ
  loadFromSaveData(saveData: ISaveData): void;
  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã¸å¤‰æ›
  toSaveData(): ISaveData;
}
```

### 9.2 Domain Layer

#### DeckService ğŸ”µ

ãƒ‡ãƒƒã‚­æ“ä½œã‚’æ‹…å½“ã€‚

```typescript
class DeckService implements IDeckService {
  shuffle(): void;
  draw(count: number): string[];
  playCard(cardId: string): void;
  discardCard(cardId: string): void;
  addCard(cardId: string): void;
  refillHand(): void;
  reshuffleDiscard(): void;
}
```

#### GatheringService ğŸ”µ

æ¡å–å‡¦ç†ã‚’æ‹…å½“ã€‚

```typescript
class GatheringService implements IGatheringService {
  gather(
    gatheringCardId: string,
    enhancementCardIds?: string[]
  ): IMaterialInstance[];

  canGather(gatheringCardId: string): boolean;

  // ç²å¾—ç´ æã‚’è¨ˆç®—ï¼ˆç¢ºç‡è€ƒæ…®ï¼‰
  private calculateMaterials(
    card: IGatheringCard,
    enhancements: IEnhancementCard[]
  ): IMaterialInstance[];
}
```

#### AlchemyService ğŸ”µ

èª¿åˆå‡¦ç†ã‚’æ‹…å½“ã€‚

```typescript
class AlchemyService implements IAlchemyService {
  craft(
    recipeCardId: string,
    selectedMaterials: IMaterialInstance[],
    enhancementCardIds?: string[]
  ): ICraftedItem;

  canCraft(recipeCardId: string): boolean;
  hasMaterials(recipeCardId: string): boolean;

  // å“è³ªè¨ˆç®—
  private calculateQuality(
    materials: IMaterialInstance[],
    enhancements: IEnhancementCard[]
  ): Quality;

  // å±æ€§å€¤è¨ˆç®—
  private calculateAttributes(materials: IMaterialInstance[]): IAttributeValue[];

  // åŠ¹æœå€¤è¨ˆç®—
  private calculateEffects(
    item: IItem,
    quality: Quality
  ): IEffectValue[];
}
```

#### QuestService ğŸ”µ

ä¾é ¼ç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class QuestService implements IQuestService {
  generateDailyQuests(): { clients: IClient[]; quests: IQuest[] };
  acceptQuest(questId: string): boolean;
  cancelQuest(questId: string): void;
  canDeliver(questId: string, item: ICraftedItem): boolean;

  deliver(
    questId: string,
    item: ICraftedItem,
    enhancementCardIds?: string[]
  ): {
    contribution: number;
    gold: number;
    rewardCards: IRewardCardCandidate[]
  };

  // ä¾é ¼æ¡ä»¶åˆ¤å®š
  private checkCondition(
    condition: IQuestCondition,
    item: ICraftedItem
  ): boolean;

  // å ±é…¬ã‚«ãƒ¼ãƒ‰å€™è£œç”Ÿæˆ
  private generateRewardCards(
    quest: IQuest,
    client: IClient
  ): IRewardCardCandidate[];
}
```

#### ContributionCalculator ğŸ”µ

è²¢çŒ®åº¦è¨ˆç®—ã‚’æ‹…å½“ã€‚

```typescript
class ContributionCalculator implements IContributionCalculator {
  calculate(
    baseContribution: number,
    quality: Quality,
    questType: QuestType,
    comboCount: number,
    artifacts: IArtifact[],
    enhancementCards: IEnhancementCard[]
  ): number {
    // è²¢çŒ®åº¦ = åŸºæœ¬è²¢çŒ®åº¦ Ã— å“è³ªè£œæ­£ Ã— ä¾é ¼ã‚¿ã‚¤ãƒ—è£œæ­£ Ã— ã‚³ãƒ³ãƒœè£œæ­£ Ã— (1 + ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆè£œæ­£) Ã— (1 + å¼·åŒ–ã‚«ãƒ¼ãƒ‰è£œæ­£)
  }
}
```

#### RankService ğŸ”µ

ãƒ©ãƒ³ã‚¯ç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class RankService {
  // ãƒ©ãƒ³ã‚¯HPã«ãƒ€ãƒ¡ãƒ¼ã‚¸
  damageRankHp(damage: number): void;
  // ãƒ©ãƒ³ã‚¯HP0åˆ¤å®š
  isRankHpZero(): boolean;
  // æ˜‡æ ¼è©¦é¨“é–‹å§‹
  startPromotionTest(): void;
  // æ˜‡æ ¼è©¦é¨“åˆ¤å®š
  checkPromotionTest(): boolean;
  // ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ
  rankUp(): void;
  // ç‰¹æ®Šãƒ«ãƒ¼ãƒ«å–å¾—
  getSpecialRules(): ISpecialRule[];
}
```

#### ShopService ğŸ”µ

ã‚·ãƒ§ãƒƒãƒ—æ©Ÿèƒ½ã‚’æ‹…å½“ã€‚

```typescript
class ShopService {
  // è³¼å…¥å¯èƒ½ãªã‚¢ã‚¤ãƒ†ãƒ å–å¾—
  getAvailableItems(): IShopItem[];
  // è³¼å…¥
  purchase(itemId: string): boolean;
  // è³¼å…¥å¯èƒ½ã‹åˆ¤å®š
  canPurchase(itemId: string): boolean;
}
```

#### ArtifactService ğŸŸ¡

ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class ArtifactService {
  // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå–å¾—
  getArtifacts(): IArtifact[];
  // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆè¿½åŠ 
  addArtifact(artifactId: string): void;
  // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆåŠ¹æœé©ç”¨
  applyEffects(context: IEffectContext): void;
}
```

#### MaterialService ğŸŸ¡

ç´ æç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class MaterialService {
  // ç´ æè¿½åŠ 
  addMaterial(material: IMaterialInstance): void;
  // ç´ æå‰Šé™¤
  removeMaterial(materialId: string, count: number): void;
  // ç´ æå–å¾—
  getMaterials(): IMaterialInstance[];
  // ç´ æãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  filterMaterials(filter: IMaterialFilter): IMaterialInstance[];
}
```

### 9.3 Infrastructure Layer

#### SaveDataRepository ğŸŸ¡

localStorageã‚’ä½¿ç”¨ã—ãŸã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€‚

```typescript
class SaveDataRepository implements ISaveDataRepository {
  private readonly STORAGE_KEY = 'atelier_save_data';

  save(data: ISaveData): void {
    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
  }

  load(): ISaveData | null {
    const json = localStorage.getItem(this.STORAGE_KEY);
    if (!json) return null;
    return JSON.parse(json) as ISaveData;
  }

  exists(): boolean {
    return localStorage.getItem(this.STORAGE_KEY) !== null;
  }

  delete(): void {
    localStorage.removeItem(this.STORAGE_KEY);
  }
}
```

#### MasterDataLoader ğŸŸ¡

JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€‚

```typescript
class MasterDataLoader implements IMasterDataLoader {
  private cache: Map<string, any> = new Map();

  async loadGatheringCards(): Promise<IGatheringCard[]> {
    return this.loadJson<IGatheringCard[]>('data/cards/gathering_cards.json');
  }

  // ... ä»–ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ¡ã‚½ãƒƒãƒ‰

  private async loadJson<T>(path: string): Promise<T> {
    if (this.cache.has(path)) {
      return this.cache.get(path) as T;
    }
    const response = await fetch(path);
    const data = await response.json();
    this.cache.set(path, data);
    return data as T;
  }
}
```

#### RandomGenerator ğŸŸ¡

ä¹±æ•°ç”Ÿæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚

```typescript
class RandomGenerator {
  // 0ã€œ1ã®ãƒ©ãƒ³ãƒ€ãƒ å€¤
  random(): number;
  // ç¢ºç‡åˆ¤å®š
  chance(probability: number): boolean;
  // é…åˆ—ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ
  pick<T>(array: T[]): T;
  // é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
  shuffle<T>(array: T[]): T[];
  // ç¯„å›²å†…ã®æ•´æ•°
  range(min: number, max: number): number;
}
```

---

## 10. ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 10.1 ä¾é ¼å®Œäº†ãƒ•ãƒ­ãƒ¼ ğŸ”µ

```mermaid
sequenceDiagram
    participant UI as UI Layer (Phaser)
    participant App as Application Layer
    participant Quest as QuestService
    participant Contrib as ContributionCalculator
    participant Rank as RankService
    participant Event as EventBus

    UI->>App: ç´å“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    App->>Quest: deliver(questId, item)
    Quest->>Quest: checkCondition()
    Quest->>Contrib: calculate()
    Contrib-->>Quest: contribution
    Quest->>Quest: generateRewardCards()
    Quest-->>App: {contribution, gold, rewardCards}
    App->>Rank: damageRankHp(contribution)
    Rank->>Event: publish(RANK_DAMAGED)
    App->>Event: publish(QUEST_COMPLETED)
    Event-->>UI: ç”»é¢æ›´æ–°
```

### 10.2 æ—¥çµ‚äº†ãƒ•ãƒ­ãƒ¼ ğŸ”µ

```mermaid
sequenceDiagram
    participant App as Application Layer
    participant State as StateManager
    participant Quest as QuestService
    participant Deck as DeckService
    participant Rank as RankService
    participant Save as SaveDataRepository
    participant Event as EventBus

    App->>State: æ®‹ã‚Šæ—¥æ•°-1
    App->>Quest: ä¾é ¼æœŸé™æ›´æ–°
    Quest->>Quest: æœŸé™åˆ‡ã‚Œä¾é ¼ã‚’å‰Šé™¤
    App->>Deck: refillHand()
    App->>State: actionPoints = 3
    App->>Rank: checkDayLimit()
    alt æ—¥æ•°åˆ‡ã‚Œ
        Rank->>Event: publish(GAME_OVER)
    else HP0
        Rank->>Event: publish(RANK_HP_ZERO)
    else ç¶™ç¶š
        App->>Save: save()
        App->>Event: publish(DAY_ENDED)
    end
```

---

## 11. çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ

### 11.1 çŠ¶æ…‹ã®ç¨®é¡ ğŸ”µ

| çŠ¶æ…‹ç¨®åˆ¥ | èª¬æ˜ | æ°¸ç¶šåŒ– |
|---------|------|--------|
| GameState | ã‚²ãƒ¼ãƒ é€²è¡ŒçŠ¶æ…‹ï¼ˆãƒ©ãƒ³ã‚¯ã€æ—¥æ•°ç­‰ï¼‰ | â—‹ |
| DeckState | ãƒ‡ãƒƒã‚­çŠ¶æ…‹ï¼ˆå±±æœ­ã€æ‰‹æœ­ç­‰ï¼‰ | â—‹ |
| InventoryState | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªçŠ¶æ…‹ï¼ˆç´ æã€ã‚¢ã‚¤ãƒ†ãƒ ï¼‰ | â—‹ |
| QuestState | ä¾é ¼çŠ¶æ…‹ï¼ˆå—æ³¨ä¸­ä¾é ¼ç­‰ï¼‰ | â—‹ |
| UIState | UIè¡¨ç¤ºçŠ¶æ…‹ï¼ˆé¸æŠä¸­ã‚¢ã‚¤ãƒ†ãƒ ç­‰ï¼‰ | Ã— |

### 11.2 çŠ¶æ…‹æ›´æ–°ãƒ•ãƒ­ãƒ¼ ğŸŸ¡

```
User Action (Phaser Scene)
    â†“
UseCase (Application Layer)
    â†“
Service (Domain Layer)
    â†“
StateManager.update()
    â†“
EventBus.publish(STATE_CHANGED)
    â†“
Phaser Scene re-render
```

---

## 12. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ğŸ”´

```
src/
â”œâ”€â”€ index.html                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆHTML
â”œâ”€â”€ main.ts                    # Phaserã‚²ãƒ¼ãƒ åˆæœŸåŒ–
â”œâ”€â”€ game/                      # Phaseré–¢é€£ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ config.ts              # Phaserã‚³ãƒ³ãƒ•ã‚£ã‚°
â”‚   â”œâ”€â”€ scenes/
â”‚   â”‚   â”œâ”€â”€ BaseGameScene.ts   # åŸºåº•ã‚·ãƒ¼ãƒ³
â”‚   â”‚   â”œâ”€â”€ BootScene.ts       # èµ·å‹•ãƒ»ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ TitleScene.ts      # ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
â”‚   â”‚   â”œâ”€â”€ MainScene.ts       # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ ShopScene.ts       # ã‚·ãƒ§ãƒƒãƒ—ç”»é¢
â”‚   â”‚   â”œâ”€â”€ RankUpScene.ts     # æ˜‡æ ¼è©¦é¨“ç”»é¢
â”‚   â”‚   â”œâ”€â”€ GameOverScene.ts   # ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
â”‚   â”‚   â””â”€â”€ GameClearScene.ts  # ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ components/        # ã‚«ã‚¹ã‚¿ãƒ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ CardView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ HandView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ DeckView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ MaterialView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ MaterialOptionView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ InventoryView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestListView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ClientView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ RankProgressView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ PhaseIndicator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ActionPointView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ GoldView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ DayCounter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ RewardCardSelector.ts
â”‚   â”‚   â”‚   â””â”€â”€ ButtonComponent.ts
â”‚   â”‚   â”œâ”€â”€ phases/            # ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥UI
â”‚   â”‚   â”‚   â”œâ”€â”€ BasePhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestAcceptPhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ GatheringPhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AlchemyPhaseUI.ts
â”‚   â”‚   â”‚   â””â”€â”€ DeliveryPhaseUI.ts
â”‚   â”‚   â””â”€â”€ common/            # å…±é€šUI
â”‚   â”‚       â”œâ”€â”€ HeaderUI.ts
â”‚   â”‚       â”œâ”€â”€ SidebarUI.ts
â”‚   â”‚       â””â”€â”€ ActionButtons.ts
â”‚   â””â”€â”€ assets/                # ã‚¢ã‚»ãƒƒãƒˆç®¡ç†
â”‚       â”œâ”€â”€ AssetKeys.ts       # ã‚¢ã‚»ãƒƒãƒˆã‚­ãƒ¼å®šæ•°
â”‚       â””â”€â”€ AssetLoader.ts     # ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼
â”œâ”€â”€ application/               # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â”œâ”€â”€ GameFlowManager.ts
â”‚   â”‚   â”œâ”€â”€ PhaseManager.ts
â”‚   â”‚   â””â”€â”€ StateManager.ts
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ EventBus.ts
â”‚   â”‚   â””â”€â”€ GameEvents.ts
â”‚   â””â”€â”€ usecases/
â”‚       â”œâ”€â”€ AcceptQuestUseCase.ts
â”‚       â”œâ”€â”€ GatheringUseCase.ts
â”‚       â”œâ”€â”€ AlchemyUseCase.ts
â”‚       â””â”€â”€ DeliveryUseCase.ts
â”œâ”€â”€ domain/                    # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ DeckService.ts
â”‚   â”‚   â”œâ”€â”€ GatheringService.ts
â”‚   â”‚   â”œâ”€â”€ AlchemyService.ts
â”‚   â”‚   â”œâ”€â”€ QuestService.ts
â”‚   â”‚   â”œâ”€â”€ ContributionCalculator.ts
â”‚   â”‚   â”œâ”€â”€ RankService.ts
â”‚   â”‚   â”œâ”€â”€ ShopService.ts
â”‚   â”‚   â”œâ”€â”€ ArtifactService.ts
â”‚   â”‚   â””â”€â”€ MaterialService.ts
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ Card.ts
â”‚   â”‚   â”œâ”€â”€ Material.ts
â”‚   â”‚   â”œâ”€â”€ Item.ts
â”‚   â”‚   â”œâ”€â”€ Quest.ts
â”‚   â”‚   â””â”€â”€ GuildRank.ts
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ interfaces.ts       # å‹å®šç¾©
â”œâ”€â”€ infrastructure/            # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ SaveDataRepository.ts
â”‚   â”œâ”€â”€ loaders/
â”‚   â”‚   â””â”€â”€ MasterDataLoader.ts
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ RandomGenerator.ts
â””â”€â”€ data/                      # æ—¢å­˜ç¶­æŒ
    â””â”€â”€ master/
        â”œâ”€â”€ cards/
        â”‚   â”œâ”€â”€ gathering_cards.json
        â”‚   â”œâ”€â”€ recipe_cards.json
        â”‚   â””â”€â”€ enhancement_cards.json
        â”œâ”€â”€ items/
        â”‚   â”œâ”€â”€ materials.json
        â”‚   â””â”€â”€ items.json
        â”œâ”€â”€ quests/
        â”‚   â”œâ”€â”€ clients.json
        â”‚   â””â”€â”€ quest_templates.json
        â”œâ”€â”€ ranks/
        â”‚   â””â”€â”€ guild_ranks.json
        â”œâ”€â”€ artifacts/
        â”‚   â””â”€â”€ artifacts.json
        â””â”€â”€ shop/
            â””â”€â”€ shop_items.json
```

---

## 13. ã‚¢ã‚»ãƒƒãƒˆç®¡ç† ğŸ”´

### 13.1 ã‚¢ã‚»ãƒƒãƒˆã‚«ãƒ†ã‚´ãƒª

| ã‚«ãƒ†ã‚´ãƒª | å½¢å¼ | ç”¨é€” |
|---------|------|------|
| **UI** | PNG, SVG | ãƒœã‚¿ãƒ³ã€ãƒ‘ãƒãƒ«ã€ã‚¢ã‚¤ã‚³ãƒ³ |
| **Cards** | PNG | ã‚«ãƒ¼ãƒ‰ç”»åƒ |
| **Characters** | PNGï¼ˆã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‚·ãƒ¼ãƒˆï¼‰ | ä¾é ¼è€…ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ |
| **Backgrounds** | PNG | èƒŒæ™¯ç”»åƒ |
| **SFX** | MP3, OGG | åŠ¹æœéŸ³ |
| **BGM** | MP3, OGG | èƒŒæ™¯éŸ³æ¥½ |

### 13.2 ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥

```typescript
class BootScene extends Phaser.Scene {
  preload(): void {
    // é€²æ—ãƒãƒ¼è¡¨ç¤º
    this.createProgressBar();

    // å…±é€šUIã‚¢ã‚»ãƒƒãƒˆ
    this.load.image('btn-primary', 'assets/ui/btn-primary.png');
    this.load.image('btn-secondary', 'assets/ui/btn-secondary.png');
    this.load.image('panel-bg', 'assets/ui/panel-bg.png');
    this.load.image('card-frame', 'assets/ui/card-frame.png');

    // ã‚«ãƒ¼ãƒ‰ã‚¢ã‚»ãƒƒãƒˆ
    this.load.atlas('cards', 'assets/cards/cards.png', 'assets/cards/cards.json');

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
    this.load.atlas('characters', 'assets/characters/characters.png', 'assets/characters/characters.json');

    // åŠ¹æœéŸ³
    this.load.audio('sfx-click', ['assets/sfx/click.mp3', 'assets/sfx/click.ogg']);
    this.load.audio('sfx-success', ['assets/sfx/success.mp3', 'assets/sfx/success.ogg']);

    // BGM
    this.load.audio('bgm-title', ['assets/bgm/title.mp3', 'assets/bgm/title.ogg']);
    this.load.audio('bgm-main', ['assets/bgm/main.mp3', 'assets/bgm/main.ogg']);
  }
}
```

---

## 14. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ ğŸŸ¡

### 14.1 ã‚¨ãƒ©ãƒ¼ã‚«ãƒ†ã‚´ãƒª

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ | å¯¾å¿œ |
|---------|------|------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼ | ç„¡åŠ¹ãªæ“ä½œ | UIä¸Šã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆrexUI Toastï¼‰ |
| ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼ | ãƒ‡ãƒ¼ã‚¿ç ´æ | å¾©æ—§ã¾ãŸã¯æ–°è¦ä½œæˆã‚’ä¿ƒã™ï¼ˆrexUI Dialogï¼‰ |
| ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ | äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° + ãƒªã‚«ãƒãƒªãƒ¼ |

### 14.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```typescript
class ErrorHandler {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼ï¼ˆToastã§é€šçŸ¥ï¼‰
  showUserError(scene: Phaser.Scene, message: string): void;

  // ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼ï¼ˆDialogã§å¾©æ—§ã‚ªãƒ—ã‚·ãƒ§ãƒ³æç¤ºï¼‰
  showDataError(scene: Phaser.Scene, message: string, options: RecoveryOption[]): void;

  // ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ï¼ˆãƒ­ã‚° + é€šçŸ¥ï¼‰
  handleSystemError(error: Error): void;
}
```

---

## 15. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ ğŸ”´

### 15.1 æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | å¯¾ç­– |
|------|------|
| åˆæœŸãƒ­ãƒ¼ãƒ‰ | ã‚¢ã‚»ãƒƒãƒˆã®é…å»¶èª­ã¿è¾¼ã¿ã€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚¢ãƒˆãƒ©ã‚¹ä½¿ç”¨ |
| ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚¢ãƒˆãƒ©ã‚¹ | è¤‡æ•°ç”»åƒã‚’1æšã«ã¾ã¨ã‚ã‚‹ |
| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ« | é »ç¹ã«ç”Ÿæˆ/ç ´æ£„ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å†åˆ©ç”¨ |
| WebGLãƒãƒƒãƒãƒ³ã‚° | åŒä¸€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®æç”»ã‚’ã¾ã¨ã‚ã‚‹ |
| å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | å·®åˆ†æ›´æ–°ï¼ˆå¤‰æ›´ã•ã‚ŒãŸéƒ¨åˆ†ã®ã¿æ›´æ–°ï¼‰ |
| ãƒ¡ãƒ¢ãƒª | ä¸è¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é©æ™‚è§£æ”¾ |

### 15.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

| ãƒ‡ãƒ¼ã‚¿ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ–¹æ³• |
|--------|--------------|
| ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ | ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•ä¸­ä¿æŒï¼‰ |
| ãƒ†ã‚¯ã‚¹ãƒãƒ£ | Phaserãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| è¨ˆç®—çµæœ | å¿…è¦ã«å¿œã˜ã¦ãƒ¡ãƒ¢åŒ– |

### 15.3 ã‚¿ãƒ¼ã‚²ãƒƒãƒˆFPS

| ç’°å¢ƒ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆFPS |
|------|-------------|
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— | 60 FPS |
| ãƒ¢ãƒã‚¤ãƒ« | 30 FPS |

---

## 16. ãƒ†ã‚¹ãƒˆè¨­è¨ˆ ğŸŸ¡

### 16.1 ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ãƒ†ã‚¹ãƒˆç¨®åˆ¥ | é‡ç‚¹ |
|---------|----------|------|
| Domain | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ­£ç¢ºæ€§ |
| Application | çµ±åˆãƒ†ã‚¹ãƒˆ | ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®æ­£ç¢ºæ€§ |
| Presentation | E2Eãƒ†ã‚¹ãƒˆ | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®æ­£ç¢ºæ€§ |

### 16.2 é‡ç‚¹ãƒ†ã‚¹ãƒˆé …ç›®

| æ©Ÿèƒ½ | ãƒ†ã‚¹ãƒˆå†…å®¹ |
|------|----------|
| è²¢çŒ®åº¦è¨ˆç®— | å„è£œæ­£ã®æ­£ç¢ºãªé©ç”¨ |
| ãƒ•ã‚§ãƒ¼ã‚ºé·ç§» | ä¸æ­£é·ç§»ã®é˜²æ­¢ |
| ä¾é ¼æ¡ä»¶åˆ¤å®š | 8ç¨®é¡ã®æ¡ä»¶ã®æ­£ç¢ºãªåˆ¤å®š |
| ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ | ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¶­æŒ |
| ã‚«ãƒ¼ãƒ‰æ“ä½œ | ãƒ‡ãƒƒã‚­ãƒ»æ‰‹æœ­æ“ä½œã®æ•´åˆæ€§ |

---

## 17. æ‹¡å¼µæ€§è¨­è¨ˆ ğŸŸ¡

### 17.1 æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

| æ©Ÿèƒ½ | æ‹¡å¼µæ–¹æ³• |
|------|---------|
| æ–°ã‚«ãƒ¼ãƒ‰è¿½åŠ  | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |
| æ–°ä¾é ¼ã‚¿ã‚¤ãƒ— | QuestTypeã«è¿½åŠ  + æ¡ä»¶åˆ¤å®šå®Ÿè£… |
| æ–°ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |
| æ–°ãƒ©ãƒ³ã‚¯ | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |
| æ–°UIæ¼”å‡º | Phaserã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ  |

### 17.2 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¯èƒ½ãªè¨­è¨ˆ

- ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®è¨­è¨ˆã«ã‚ˆã‚Šã€æ–°æ©Ÿèƒ½ã®è¿½åŠ ãŒå®¹æ˜“
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±ã®ä¾å­˜ã«ã‚ˆã‚Šã€å®Ÿè£…ã®å·®ã—æ›¿ãˆãŒå¯èƒ½
- Phaserã‚·ãƒ¼ãƒ³è¿½åŠ ã«ã‚ˆã‚‹ç”»é¢æ‹¡å¼µãŒå®¹æ˜“

---

## 18. ç§»è¡Œè¨ˆç”» ğŸ”´

### 18.1 æ®µéšçš„ç§»è¡Œ

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | å„ªå…ˆåº¦ | çŠ¶æ…‹ |
|---------|------|--------|------|
| Phase 1 | PhaseråŸºç›¤æ§‹ç¯‰ï¼ˆBoot, Titleï¼‰ | é«˜ | å®Œäº† |
| Phase 2 | MainSceneåŸºæœ¬UI | é«˜ | å®Œäº† |
| Phase 3 | å„ãƒ•ã‚§ãƒ¼ã‚ºUIå®Ÿè£… | é«˜ | é€²è¡Œä¸­ |
| Phase 4 | Shop/RankUp/Resultç”»é¢ | ä¸­ | æœªç€æ‰‹ |
| Phase 5 | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ¼”å‡ºè¿½åŠ  | ä¸­ | æœªç€æ‰‹ |
| Phase 6 | åŠ¹æœéŸ³ãƒ»BGMè¿½åŠ  | ä½ | æœªç€æ‰‹ |

### 18.2 æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ´»ç”¨

| å±¤ | ç§»è¡Œæ–¹é‡ | çŠ¶æ…‹ |
|-----|---------|------|
| Domain | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ | ç¶­æŒ |
| Application | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ | ç¶­æŒ |
| Infrastructure | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ | ç¶­æŒ |
| Presentation | å®Œå…¨ç½®ãæ›ãˆï¼ˆPhaseråŒ–ï¼‰ | ç§»è¡Œä¸­ |

---

## é–¢é€£æ–‡æ›¸

- **è¦ä»¶å®šç¾©æ›¸**: [../../spec/atelier-guild-rank-requirements.md](../../spec/atelier-guild-rank-requirements.md)
- **ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆæ›¸**: [data-schema.md](data-schema.md)
- **TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©**: [interfaces.ts](interfaces.ts)
- **UIè¨­è¨ˆï¼ˆPhaserç‰ˆï¼‰**: [ui-design/overview.md](ui-design/overview.md)
- **ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ**: [core-systems.md](core-systems.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-01 | 1.0.0 | åˆç‰ˆä½œæˆï¼ˆHTMLç‰ˆï¼‰ |
| 2026-01-01 | 1.1.0 | Domain Layerã«MaterialServiceã‚’è¿½åŠ  |
| 2026-01-07 | 1.5.0 | Phaserç‰ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ã‚’ä½œæˆ |
| 2026-01-14 | 2.0.0 | HTMLç‰ˆã¨Phaserç‰ˆã‚’çµ±åˆã€‚Phaserç‰ˆã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¤ã¤ã€HTMLç‰ˆã®è©³ç´°ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã‚’ä¿æŒ |
