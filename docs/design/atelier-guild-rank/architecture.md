# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-01
**å¯¾è±¡**: ã‚¢ãƒˆãƒªã‚¨éŒ¬é‡‘è¡“ã‚²ãƒ¼ãƒ ï¼ˆã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ï¼‰HTMLç‰ˆ

---

## æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€éŒ¬é‡‘è¡“ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ãƒ‡ãƒƒã‚­æ§‹ç¯‰RPGã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

> éŒ¬é‡‘è¡“å¸«ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ãŒã€æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã¨ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã®ãƒ‡ãƒƒã‚­ã‚’é§†ä½¿ã—ã€
> ä¾é ¼ã‚’é”æˆã—ã¦è²¢çŒ®åº¦ã‚’ç¨¼ãã€ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯ã¨ã„ã†ã€Œæ•µã€ã‚’å€’ã—ã¦ã„ã
> ã€Œæˆ¦ç•¥çš„ãƒ‡ãƒƒã‚­æ§‹ç¯‰ã€ã¨ã€Œãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ã®é”æˆæ„Ÿã€ã‚’å‘³ã‚ã†ã‚²ãƒ¼ãƒ 

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«å‡¡ä¾‹

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«è©³ç´°è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«ãªã„æ¨æ¸¬

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ ğŸŸ¡

### 1.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| TypeScript | 5.x | ãƒ¡ã‚¤ãƒ³è¨€èª |
| HTML5 | - | UIæ§‹é€  |
| CSS3 | - | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| Vite | 5.x | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |

### 1.2 ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| localStorage | ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
| JSON | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿å½¢å¼ |

### 1.3 ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆæ¨å¥¨ï¼‰

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” | å¿…é ˆ |
|-----------|------|------|
| - | UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã—ï¼ˆVanillaï¼‰ | - |

**è¨­è¨ˆæ–¹é‡**: å¤–éƒ¨ä¾å­˜ã‚’æœ€å°é™ã«æŠ‘ãˆã€ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã‚’ç¶­æŒã™ã‚‹ã€‚

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸŸ¡

### 2.1 æ¡ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

- **Clean Architecture**: 4å±¤æ§‹é€ ã«ã‚ˆã‚‹è²¬å‹™åˆ†é›¢
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ**: EventBusã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡
- **State Machine**: ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ã«çŠ¶æ…‹æ©Ÿæ¢°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨

### 2.2 é¸æŠç†ç”±

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|---------|------|
| Clean Architecture | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç‹¬ç«‹æ€§ç¢ºä¿ã€ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š |
| ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹• | UIãƒ»ãƒ­ã‚¸ãƒƒã‚¯é–“ã®ç–çµåˆåŒ–ã€æ‹¡å¼µæ€§ç¢ºä¿ |
| State Machine | ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã®å³å¯†ãªç®¡ç†ã€ä¸æ­£é·ç§»é˜²æ­¢ |

---

## 3. ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€  ğŸŸ¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                       â”‚
â”‚  (HTML/CSS, UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ, ç”»é¢ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼)              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ScreenManagerâ”‚ â”‚ UIComponentsâ”‚ â”‚ Renderers   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Events
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                        â”‚
â”‚  (ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡, çŠ¶æ…‹ç®¡ç†, ã‚¤ãƒ™ãƒ³ãƒˆèª¿æ•´)                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚GameFlowMgr  â”‚ â”‚PhaseManager â”‚ â”‚ EventBus    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚StateManager â”‚ â”‚ActionHandlerâ”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Method Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Domain Layer                           â”‚
â”‚  (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯, ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹, ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£)             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ DeckService â”‚ â”‚GatheringSvc â”‚ â”‚ AlchemySvc  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ QuestServiceâ”‚ â”‚ContribCalc  â”‚ â”‚ ShopService â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ RankService â”‚ â”‚ArtifactSvc  â”‚ â”‚MaterialSvc  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Data Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Infrastructure Layer                      â”‚
â”‚  (ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹, å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº, ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚SaveDataRepo â”‚ â”‚MasterLoader â”‚ â”‚RandomGen    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1 å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | è²¬å‹™ | ä¾å­˜å¯èƒ½ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ |
|---------|------|------------------|
| Presentation | UIè¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å—ä»˜ | Application |
| Application | ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã€çŠ¶æ…‹ç®¡ç† | Domain |
| Domain | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ«ãƒ¼ãƒ«å®Ÿè£… | Infrastructure (ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±) |
| Infrastructure | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€å¤–éƒ¨é€£æº | ãªã— |

---

## 4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 4.1 Presentation Layer

#### ScreenManager ğŸŸ¡

ç”»é¢é·ç§»ã‚’ç®¡ç†ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚

```typescript
class ScreenManager {
  private currentScreen: IScreen | null;

  // ç”»é¢é·ç§»
  navigateTo(screenType: ScreenType): void;
  // ç¾åœ¨ã®ç”»é¢ã‚’å–å¾—
  getCurrentScreen(): IScreen | null;
}
```

#### ç”»é¢ä¸€è¦§

| ç”»é¢ | ã‚¯ãƒ©ã‚¹å | èª¬æ˜ |
|------|---------|------|
| ã‚¿ã‚¤ãƒˆãƒ« | TitleScreen | ã‚²ãƒ¼ãƒ é–‹å§‹ã€ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼ã€è¨­å®š |
| ãƒ¡ã‚¤ãƒ³ | MainScreen | ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ |
| ã‚·ãƒ§ãƒƒãƒ— | ShopScreen | ã‚«ãƒ¼ãƒ‰ãƒ»ç´ æãƒ»ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆè³¼å…¥ |
| æ˜‡æ ¼è©¦é¨“ | RankUpScreen | æ˜‡æ ¼è©¦é¨“ã®èª²é¡Œè¡¨ç¤ºãƒ»é€²è¡Œ |
| ãƒªã‚¶ãƒ«ãƒˆ | ResultScreen | ã‚²ãƒ¼ãƒ çµ‚äº†æ™‚ã®çµæœè¡¨ç¤º |

#### UIComponents ğŸŸ¡

å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤ã€‚

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | èª¬æ˜ |
|--------------|------|
| CardView | ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆæ¡å–åœ°/ãƒ¬ã‚·ãƒ”/å¼·åŒ–ï¼‰ |
| HandView | æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢ |
| DeckView | å±±æœ­ãƒ»æ¨ã¦æœ­è¡¨ç¤º |
| MaterialView | ç´ æè¡¨ç¤º |
| InventoryView | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè¡¨ç¤º |
| QuestView | ä¾é ¼è¡¨ç¤º |
| ClientView | ä¾é ¼è€…è¡¨ç¤º |
| RankProgressView | ãƒ©ãƒ³ã‚¯é€²æ—ãƒãƒ¼ |
| PhaseIndicator | ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º |
| ActionPointView | è¡Œå‹•ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º |
| GoldView | æ‰€æŒé‡‘è¡¨ç¤º |
| DayCounter | æ®‹ã‚Šæ—¥æ•°è¡¨ç¤º |
| DialogView | ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° |
| ButtonComponent | ãƒœã‚¿ãƒ³ï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒª/ã‚»ã‚«ãƒ³ãƒ€ãƒªï¼‰ |

### 4.2 Application Layer

#### GameFlowManager ğŸŸ¡

ã‚²ãƒ¼ãƒ å…¨ä½“ã®ãƒ•ãƒ­ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹ä¸­æ ¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚

```typescript
class GameFlowManager {
  // ã‚²ãƒ¼ãƒ é–‹å§‹
  startNewGame(): void;
  // ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼
  continueGame(): void;
  // ã‚²ãƒ¼ãƒ çµ‚äº†åˆ¤å®š
  checkGameEnd(): GameEndResult | null;
  // æ—¥çµ‚äº†å‡¦ç†
  endDay(): void;
  // ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—å‡¦ç†
  rankUp(): void;
}
```

#### PhaseManager ğŸ”µ

1æ—¥4ãƒ•ã‚§ãƒ¼ã‚ºã®é·ç§»ã‚’ç®¡ç†ã€‚

```typescript
class PhaseManager {
  private currentPhase: GamePhase;

  // ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»
  transitionTo(phase: GamePhase): boolean;
  // æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸
  nextPhase(): void;
  // ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºå–å¾—
  getCurrentPhase(): GamePhase;
  // ãƒ•ã‚§ãƒ¼ã‚ºã‚¹ã‚­ãƒƒãƒ—å¯èƒ½ã‹
  canSkipPhase(): boolean;
}
```

**ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»å›³** ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> QUEST_ACCEPT: æ—¥é–‹å§‹
    QUEST_ACCEPT --> GATHERING: å—æ³¨å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    GATHERING --> ALCHEMY: æ¡å–å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    ALCHEMY --> DELIVERY: èª¿åˆå®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    DELIVERY --> [*]: ç´å“å®Œäº†/ã‚¹ã‚­ãƒƒãƒ— â†’ æ—¥çµ‚äº†
```

#### EventBus ğŸŸ¡

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ç–çµåˆãªé€šä¿¡ã‚’å®Ÿç¾ã€‚

```typescript
class EventBus {
  // ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­
  subscribe<T extends IGameEvent>(
    eventType: GameEventType,
    handler: (event: T) => void
  ): () => void;

  // ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
  publish<T extends IGameEvent>(event: T): void;

  // å…¨è³¼èª­è§£é™¤
  unsubscribeAll(eventType?: GameEventType): void;
}
```

#### StateManager ğŸŸ¡

ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®é›†ä¸­ç®¡ç†ã€‚

```typescript
class StateManager {
  private gameState: IGameState;
  private deckState: IDeckState;
  private inventoryState: IInventoryState;
  private questState: IQuestState;

  // çŠ¶æ…‹å–å¾—
  getGameState(): Readonly<IGameState>;
  getDeckState(): Readonly<IDeckState>;
  getInventoryState(): Readonly<IInventoryState>;
  getQuestState(): Readonly<IQuestState>;

  // çŠ¶æ…‹æ›´æ–°
  updateGameState(partial: Partial<IGameState>): void;
  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¾©å…ƒ
  loadFromSaveData(saveData: ISaveData): void;
  // ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã¸å¤‰æ›
  toSaveData(): ISaveData;
}
```

### 4.3 Domain Layer

#### DeckService ğŸ”µ

ãƒ‡ãƒƒã‚­æ“ä½œã‚’æ‹…å½“ã€‚

```typescript
class DeckService implements IDeckService {
  shuffle(): void;
  draw(count: number): string[];
  playCard(cardId: string): void;
  discardCard(cardId: string): void;
  addCard(cardId: string): void;
  refillHand(): void;
  reshuffleDiscard(): void;
}
```

#### GatheringService ğŸ”µ

æ¡å–å‡¦ç†ã‚’æ‹…å½“ã€‚

```typescript
class GatheringService implements IGatheringService {
  gather(
    gatheringCardId: string,
    enhancementCardIds?: string[]
  ): IMaterialInstance[];

  canGather(gatheringCardId: string): boolean;

  // ç²å¾—ç´ æã‚’è¨ˆç®—ï¼ˆç¢ºç‡è€ƒæ…®ï¼‰
  private calculateMaterials(
    card: IGatheringCard,
    enhancements: IEnhancementCard[]
  ): IMaterialInstance[];
}
```

#### AlchemyService ğŸ”µ

èª¿åˆå‡¦ç†ã‚’æ‹…å½“ã€‚

```typescript
class AlchemyService implements IAlchemyService {
  craft(
    recipeCardId: string,
    selectedMaterials: IMaterialInstance[],
    enhancementCardIds?: string[]
  ): ICraftedItem;

  canCraft(recipeCardId: string): boolean;
  hasMaterials(recipeCardId: string): boolean;

  // å“è³ªè¨ˆç®—
  private calculateQuality(
    materials: IMaterialInstance[],
    enhancements: IEnhancementCard[]
  ): Quality;

  // å±æ€§å€¤è¨ˆç®—
  private calculateAttributes(materials: IMaterialInstance[]): IAttributeValue[];

  // åŠ¹æœå€¤è¨ˆç®—
  private calculateEffects(
    item: IItem,
    quality: Quality
  ): IEffectValue[];
}
```

#### QuestService ğŸ”µ

ä¾é ¼ç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class QuestService implements IQuestService {
  generateDailyQuests(): { clients: IClient[]; quests: IQuest[] };
  acceptQuest(questId: string): boolean;
  cancelQuest(questId: string): void;
  canDeliver(questId: string, item: ICraftedItem): boolean;

  deliver(
    questId: string,
    item: ICraftedItem,
    enhancementCardIds?: string[]
  ): {
    contribution: number;
    gold: number;
    rewardCards: IRewardCardCandidate[]
  };

  // ä¾é ¼æ¡ä»¶åˆ¤å®š
  private checkCondition(
    condition: IQuestCondition,
    item: ICraftedItem
  ): boolean;

  // å ±é…¬ã‚«ãƒ¼ãƒ‰å€™è£œç”Ÿæˆ
  private generateRewardCards(
    quest: IQuest,
    client: IClient
  ): IRewardCardCandidate[];
}
```

#### ContributionCalculator ğŸ”µ

è²¢çŒ®åº¦è¨ˆç®—ã‚’æ‹…å½“ã€‚

```typescript
class ContributionCalculator implements IContributionCalculator {
  calculate(
    baseContribution: number,
    quality: Quality,
    questType: QuestType,
    comboCount: number,
    artifacts: IArtifact[],
    enhancementCards: IEnhancementCard[]
  ): number {
    // è²¢çŒ®åº¦ = åŸºæœ¬è²¢çŒ®åº¦ Ã— å“è³ªè£œæ­£ Ã— ä¾é ¼ã‚¿ã‚¤ãƒ—è£œæ­£ Ã— ã‚³ãƒ³ãƒœè£œæ­£ Ã— (1 + ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆè£œæ­£) Ã— (1 + å¼·åŒ–ã‚«ãƒ¼ãƒ‰è£œæ­£)
  }
}
```

#### RankService ğŸ”µ

ãƒ©ãƒ³ã‚¯ç®¡ç†ã‚’æ‹…å½“ã€‚

```typescript
class RankService {
  // ãƒ©ãƒ³ã‚¯HPã«ãƒ€ãƒ¡ãƒ¼ã‚¸
  damageRankHp(damage: number): void;
  // ãƒ©ãƒ³ã‚¯HP0åˆ¤å®š
  isRankHpZero(): boolean;
  // æ˜‡æ ¼è©¦é¨“é–‹å§‹
  startPromotionTest(): void;
  // æ˜‡æ ¼è©¦é¨“åˆ¤å®š
  checkPromotionTest(): boolean;
  // ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ
  rankUp(): void;
  // ç‰¹æ®Šãƒ«ãƒ¼ãƒ«å–å¾—
  getSpecialRules(): ISpecialRule[];
}
```

#### ShopService ğŸ”µ

ã‚·ãƒ§ãƒƒãƒ—æ©Ÿèƒ½ã‚’æ‹…å½“ã€‚

```typescript
class ShopService {
  // è³¼å…¥å¯èƒ½ãªã‚¢ã‚¤ãƒ†ãƒ å–å¾—
  getAvailableItems(): IShopItem[];
  // è³¼å…¥
  purchase(itemId: string): boolean;
  // è³¼å…¥å¯èƒ½ã‹åˆ¤å®š
  canPurchase(itemId: string): boolean;
}
```

### 4.4 Infrastructure Layer

#### SaveDataRepository ğŸŸ¡

localStorageã‚’ä½¿ç”¨ã—ãŸã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€‚

```typescript
class SaveDataRepository implements ISaveDataRepository {
  private readonly STORAGE_KEY = 'atelier_save_data';

  save(data: ISaveData): void {
    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
  }

  load(): ISaveData | null {
    const json = localStorage.getItem(this.STORAGE_KEY);
    if (!json) return null;
    return JSON.parse(json) as ISaveData;
  }

  exists(): boolean {
    return localStorage.getItem(this.STORAGE_KEY) !== null;
  }

  delete(): void {
    localStorage.removeItem(this.STORAGE_KEY);
  }
}
```

#### MasterDataLoader ğŸŸ¡

JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€‚

```typescript
class MasterDataLoader implements IMasterDataLoader {
  private cache: Map<string, any> = new Map();

  async loadGatheringCards(): Promise<IGatheringCard[]> {
    return this.loadJson<IGatheringCard[]>('data/cards/gathering_cards.json');
  }

  // ... ä»–ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ¡ã‚½ãƒƒãƒ‰

  private async loadJson<T>(path: string): Promise<T> {
    if (this.cache.has(path)) {
      return this.cache.get(path) as T;
    }
    const response = await fetch(path);
    const data = await response.json();
    this.cache.set(path, data);
    return data as T;
  }
}
```

#### RandomGenerator ğŸŸ¡

ä¹±æ•°ç”Ÿæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚

```typescript
class RandomGenerator {
  // 0ã€œ1ã®ãƒ©ãƒ³ãƒ€ãƒ å€¤
  random(): number;
  // ç¢ºç‡åˆ¤å®š
  chance(probability: number): boolean;
  // é…åˆ—ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ
  pick<T>(array: T[]): T;
  // é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
  shuffle<T>(array: T[]): T[];
  // ç¯„å›²å†…ã®æ•´æ•°
  range(min: number, max: number): number;
}
```

---

## 5. ç”»é¢é·ç§»è¨­è¨ˆ

### 5.1 ç”»é¢é·ç§»å›³ ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> Title: ã‚²ãƒ¼ãƒ èµ·å‹•

    Title --> Main: æ–°è¦ã‚²ãƒ¼ãƒ 
    Title --> Main: ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼

    Main --> Shop: ã‚·ãƒ§ãƒƒãƒ—é¸æŠ
    Shop --> Main: æˆ»ã‚‹

    Main --> RankUp: ãƒ©ãƒ³ã‚¯HP0
    RankUp --> Main: è©¦é¨“ã‚¯ãƒªã‚¢
    RankUp --> Result: è©¦é¨“å¤±æ•—

    Main --> Result: ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
    Main --> Result: Sãƒ©ãƒ³ã‚¯åˆ°é”

    Result --> Title: ã‚¿ã‚¤ãƒˆãƒ«ã¸
```

### 5.2 ãƒ¡ã‚¤ãƒ³ç”»é¢ã®ãƒ•ã‚§ãƒ¼ã‚ºé·ç§» ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> DayStart: æ—¥é–‹å§‹

    state "æ—¥ã®ãƒ«ãƒ¼ãƒ—" as DayLoop {
        DayStart --> QuestAccept: æ—¥é–‹å§‹å‡¦ç†
        QuestAccept --> Gathering: å—æ³¨å®Œäº†
        Gathering --> Alchemy: æ¡å–å®Œäº†
        Alchemy --> Delivery: èª¿åˆå®Œäº†
        Delivery --> DayEnd: ç´å“å®Œäº†
    }

    DayEnd --> DayStart: æ¬¡ã®æ—¥ã¸
    DayEnd --> RankHpZero: HP0åˆ¤å®š
    DayEnd --> GameOver: æ—¥æ•°åˆ‡ã‚Œ
```

---

## 6. ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 6.1 ä¾é ¼å®Œäº†ãƒ•ãƒ­ãƒ¼ ğŸ”µ

```mermaid
sequenceDiagram
    participant UI as UI Layer
    participant App as Application Layer
    participant Quest as QuestService
    participant Contrib as ContributionCalculator
    participant Rank as RankService
    participant Event as EventBus

    UI->>App: ç´å“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    App->>Quest: deliver(questId, item)
    Quest->>Quest: checkCondition()
    Quest->>Contrib: calculate()
    Contrib-->>Quest: contribution
    Quest->>Quest: generateRewardCards()
    Quest-->>App: {contribution, gold, rewardCards}
    App->>Rank: damageRankHp(contribution)
    Rank->>Event: publish(RANK_DAMAGED)
    App->>Event: publish(QUEST_COMPLETED)
    Event-->>UI: ç”»é¢æ›´æ–°
```

### 6.2 æ—¥çµ‚äº†ãƒ•ãƒ­ãƒ¼ ğŸ”µ

```mermaid
sequenceDiagram
    participant App as Application Layer
    participant State as StateManager
    participant Quest as QuestService
    participant Deck as DeckService
    participant Rank as RankService
    participant Save as SaveDataRepository
    participant Event as EventBus

    App->>State: æ®‹ã‚Šæ—¥æ•°-1
    App->>Quest: ä¾é ¼æœŸé™æ›´æ–°
    Quest->>Quest: æœŸé™åˆ‡ã‚Œä¾é ¼ã‚’å‰Šé™¤
    App->>Deck: refillHand()
    App->>State: actionPoints = 3
    App->>Rank: checkDayLimit()
    alt æ—¥æ•°åˆ‡ã‚Œ
        Rank->>Event: publish(GAME_OVER)
    else HP0
        Rank->>Event: publish(RANK_HP_ZERO)
    else ç¶™ç¶š
        App->>Save: save()
        App->>Event: publish(DAY_ENDED)
    end
```

---

## 7. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ğŸŸ¡

```
src/
â”œâ”€â”€ index.html                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆHTML
â”œâ”€â”€ main.ts                    # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆTS
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ main.css               # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ components/            # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ screens/               # ç”»é¢åˆ¥ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ IScreen.ts         # ç”»é¢ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ ScreenManager.ts
â”‚   â”‚   â”œâ”€â”€ TitleScreen.ts
â”‚   â”‚   â”œâ”€â”€ MainScreen.ts
â”‚   â”‚   â”œâ”€â”€ ShopScreen.ts
â”‚   â”‚   â”œâ”€â”€ RankUpScreen.ts
â”‚   â”‚   â””â”€â”€ ResultScreen.ts
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ CardView.ts
â”‚       â”œâ”€â”€ HandView.ts
â”‚       â”œâ”€â”€ DeckView.ts
â”‚       â”œâ”€â”€ MaterialView.ts
â”‚       â”œâ”€â”€ InventoryView.ts
â”‚       â”œâ”€â”€ QuestView.ts
â”‚       â”œâ”€â”€ ClientView.ts
â”‚       â”œâ”€â”€ RankProgressView.ts
â”‚       â”œâ”€â”€ PhaseIndicator.ts
â”‚       â”œâ”€â”€ ActionPointView.ts
â”‚       â”œâ”€â”€ GoldView.ts
â”‚       â”œâ”€â”€ DayCounter.ts
â”‚       â”œâ”€â”€ DialogView.ts
â”‚       â””â”€â”€ ButtonComponent.ts
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â”œâ”€â”€ GameFlowManager.ts
â”‚   â”‚   â”œâ”€â”€ PhaseManager.ts
â”‚   â”‚   â””â”€â”€ StateManager.ts
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ EventBus.ts
â”‚   â”‚   â””â”€â”€ GameEvents.ts
â”‚   â””â”€â”€ handlers/
â”‚       â”œâ”€â”€ QuestAcceptHandler.ts
â”‚       â”œâ”€â”€ GatheringHandler.ts
â”‚       â”œâ”€â”€ AlchemyHandler.ts
â”‚       â””â”€â”€ DeliveryHandler.ts
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ DeckService.ts
â”‚   â”‚   â”œâ”€â”€ GatheringService.ts
â”‚   â”‚   â”œâ”€â”€ AlchemyService.ts
â”‚   â”‚   â”œâ”€â”€ QuestService.ts
â”‚   â”‚   â”œâ”€â”€ ContributionCalculator.ts
â”‚   â”‚   â”œâ”€â”€ RankService.ts
â”‚   â”‚   â”œâ”€â”€ ShopService.ts
â”‚   â”‚   â”œâ”€â”€ ArtifactService.ts
â”‚   â”‚   â””â”€â”€ MaterialService.ts
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ Card.ts
â”‚   â”‚   â”œâ”€â”€ Material.ts
â”‚   â”‚   â”œâ”€â”€ Item.ts
â”‚   â”‚   â”œâ”€â”€ Quest.ts
â”‚   â”‚   â””â”€â”€ GuildRank.ts
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ interfaces.ts       # å‹å®šç¾©ï¼ˆåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ SaveDataRepository.ts
â”‚   â”œâ”€â”€ loaders/
â”‚   â”‚   â””â”€â”€ MasterDataLoader.ts
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ RandomGenerator.ts
â””â”€â”€ data/
    â”œâ”€â”€ cards/
    â”‚   â”œâ”€â”€ gathering_cards.json
    â”‚   â”œâ”€â”€ recipe_cards.json
    â”‚   â””â”€â”€ enhancement_cards.json
    â”œâ”€â”€ items/
    â”‚   â”œâ”€â”€ materials.json
    â”‚   â””â”€â”€ items.json
    â”œâ”€â”€ quests/
    â”‚   â”œâ”€â”€ clients.json
    â”‚   â””â”€â”€ quest_templates.json
    â”œâ”€â”€ ranks/
    â”‚   â””â”€â”€ guild_ranks.json
    â”œâ”€â”€ artifacts/
    â”‚   â””â”€â”€ artifacts.json
    â””â”€â”€ shop/
        â””â”€â”€ shop_items.json
```

---

## 8. çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ

### 8.1 çŠ¶æ…‹ã®ç¨®é¡ ğŸ”µ

| çŠ¶æ…‹ç¨®åˆ¥ | èª¬æ˜ | æ°¸ç¶šåŒ– |
|---------|------|--------|
| GameState | ã‚²ãƒ¼ãƒ é€²è¡ŒçŠ¶æ…‹ï¼ˆãƒ©ãƒ³ã‚¯ã€æ—¥æ•°ç­‰ï¼‰ | â—‹ |
| DeckState | ãƒ‡ãƒƒã‚­çŠ¶æ…‹ï¼ˆå±±æœ­ã€æ‰‹æœ­ç­‰ï¼‰ | â—‹ |
| InventoryState | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªçŠ¶æ…‹ï¼ˆç´ æã€ã‚¢ã‚¤ãƒ†ãƒ ï¼‰ | â—‹ |
| QuestState | ä¾é ¼çŠ¶æ…‹ï¼ˆå—æ³¨ä¸­ä¾é ¼ç­‰ï¼‰ | â—‹ |
| UIState | UIè¡¨ç¤ºçŠ¶æ…‹ï¼ˆé¸æŠä¸­ã‚¢ã‚¤ãƒ†ãƒ ç­‰ï¼‰ | Ã— |

### 8.2 çŠ¶æ…‹æ›´æ–°ãƒ•ãƒ­ãƒ¼ ğŸŸ¡

```
User Action
    â†“
Handler (Application Layer)
    â†“
Service (Domain Layer)
    â†“
StateManager.update()
    â†“
EventBus.publish(STATE_CHANGED)
    â†“
UI Components re-render
```

---

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ ğŸŸ¡

### 9.1 ã‚¨ãƒ©ãƒ¼ã‚«ãƒ†ã‚´ãƒª

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ | å¯¾å¿œ |
|---------|------|------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼ | ç„¡åŠ¹ãªæ“ä½œ | UIä¸Šã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ |
| ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼ | ãƒ‡ãƒ¼ã‚¿ç ´æ | å¾©æ—§ã¾ãŸã¯æ–°è¦ä½œæˆã‚’ä¿ƒã™ |
| ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ | äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° + ãƒªã‚«ãƒãƒªãƒ¼ |

### 9.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```typescript
class ErrorHandler {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ©ãƒ¼ï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼‰
  showUserError(message: string): void;

  // ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼ï¼ˆå¾©æ—§ã‚ªãƒ—ã‚·ãƒ§ãƒ³æç¤ºï¼‰
  showDataError(message: string, options: RecoveryOption[]): void;

  // ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ï¼ˆãƒ­ã‚° + é€šçŸ¥ï¼‰
  handleSystemError(error: Error): void;
}
```

---

## 10. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ ğŸŸ¡

### 10.1 æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | å¯¾ç­– |
|------|------|
| åˆæœŸãƒ­ãƒ¼ãƒ‰ | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®é…å»¶èª­ã¿è¾¼ã¿ |
| å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | å·®åˆ†æ›´æ–°ï¼ˆå¤‰æ›´ã•ã‚ŒãŸéƒ¨åˆ†ã®ã¿æ›´æ–°ï¼‰ |
| ãƒ¡ãƒ¢ãƒª | ä¸è¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é©æ™‚è§£æ”¾ |

### 10.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

| ãƒ‡ãƒ¼ã‚¿ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ–¹æ³• |
|--------|--------------|
| ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ | ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•ä¸­ä¿æŒï¼‰ |
| è¨ˆç®—çµæœ | å¿…è¦ã«å¿œã˜ã¦ãƒ¡ãƒ¢åŒ– |

---

## 11. ãƒ†ã‚¹ãƒˆè¨­è¨ˆ ğŸŸ¡

### 11.1 ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ãƒ†ã‚¹ãƒˆç¨®åˆ¥ | é‡ç‚¹ |
|---------|----------|------|
| Domain | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ­£ç¢ºæ€§ |
| Application | çµ±åˆãƒ†ã‚¹ãƒˆ | ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®æ­£ç¢ºæ€§ |
| Presentation | E2Eãƒ†ã‚¹ãƒˆ | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®æ­£ç¢ºæ€§ |

### 11.2 é‡ç‚¹ãƒ†ã‚¹ãƒˆé …ç›®

| æ©Ÿèƒ½ | ãƒ†ã‚¹ãƒˆå†…å®¹ |
|------|----------|
| è²¢çŒ®åº¦è¨ˆç®— | å„è£œæ­£ã®æ­£ç¢ºãªé©ç”¨ |
| ãƒ•ã‚§ãƒ¼ã‚ºé·ç§» | ä¸æ­£é·ç§»ã®é˜²æ­¢ |
| ä¾é ¼æ¡ä»¶åˆ¤å®š | 8ç¨®é¡ã®æ¡ä»¶ã®æ­£ç¢ºãªåˆ¤å®š |
| ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ | ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¶­æŒ |

---

## 12. æ‹¡å¼µæ€§è¨­è¨ˆ ğŸŸ¡

### 12.1 æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

| æ©Ÿèƒ½ | æ‹¡å¼µæ–¹æ³• |
|------|---------|
| æ–°ã‚«ãƒ¼ãƒ‰è¿½åŠ  | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |
| æ–°ä¾é ¼ã‚¿ã‚¤ãƒ— | QuestTypeã«è¿½åŠ  + æ¡ä»¶åˆ¤å®šå®Ÿè£… |
| æ–°ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |
| æ–°ãƒ©ãƒ³ã‚¯ | JSONãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ  |

### 12.2 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¯èƒ½ãªè¨­è¨ˆ

- ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®è¨­è¨ˆã«ã‚ˆã‚Šã€æ–°æ©Ÿèƒ½ã®è¿½åŠ ãŒå®¹æ˜“
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±ã®ä¾å­˜ã«ã‚ˆã‚Šã€å®Ÿè£…ã®å·®ã—æ›¿ãˆãŒå¯èƒ½

---

## é–¢é€£æ–‡æ›¸

- **è¦ä»¶å®šç¾©æ›¸**: [../../spec/atelier-guild-rank-requirements.md](../../spec/atelier-guild-rank-requirements.md)
- **ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆæ›¸**: [data-schema.md](data-schema.md)
- **TypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©**: [interfaces.ts](interfaces.ts)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-01 | 1.0.0 | åˆç‰ˆä½œæˆ |
| 2026-01-01 | 1.1.0 | Domain Layerã«MaterialServiceã‚’è¿½åŠ  |
