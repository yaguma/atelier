# ä¾é ¼å—æ³¨ãƒ•ã‚§ãƒ¼ã‚º è©³ç´°è¨­è¨ˆ

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**æ›´æ–°æ—¥**: 2026-01-16
**ãƒ•ã‚§ãƒ¼ã‚ºID**: PHASE-001

---

## 1. æ¦‚è¦

### 1.1 åŸºæœ¬æƒ…å ±

| é …ç›® | å€¤ |
|------|-----|
| **ãƒ•ã‚§ãƒ¼ã‚ºå** | ä¾é ¼å—æ³¨ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆQuest Accept Phaseï¼‰ |
| **è¦ªç”»é¢** | ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆSCR-002ï¼‰ |
| **è²¬å‹™** | ä»Šæ—¥ã®ä¾é ¼è€…è¡¨ç¤ºã€ä¾é ¼å†…å®¹ç¢ºèªã€å—æ³¨/æ–­ã‚‹åˆ¤æ–­ |
| **å‰ãƒ•ã‚§ãƒ¼ã‚º** | æ—¥é–‹å§‹å‡¦ç† |
| **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º** | æ¡å–ãƒ•ã‚§ãƒ¼ã‚º |

### 1.2 ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  ğŸ”µ

### 2.1 ä¾é ¼è€…ä¸€è¦§ãƒ»ä¾é ¼è©³ç´°ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä»Šæ—¥ã®ä¾é ¼è€…                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ ğŸ‘¤æ‘äºº  â”‚     â”‚ ğŸ—¡å†’é™ºè€…â”‚     â”‚         â”‚           â”‚
â”‚   â”‚   [é¸æŠä¸­]    â”‚         â”‚     â”‚ (ç©ºã)  â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ‘äººã®ä¾é ¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ã€Œä½•ã‹è–¬ãŒæ¬²ã—ã„ã‚“ã ã€                              â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ ä¾é ¼ã‚¿ã‚¤ãƒ—: ã‚«ãƒ†ã‚´ãƒªï¼ˆè–¬ï¼‰                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ å ±é…¬:                                           â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   è²¢çŒ®åº¦: 15                                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   ãŠé‡‘: 30G                                     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ æœŸé™: 5æ—¥å¾Œ                                     â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚          [å—æ³¨ã™ã‚‹]    [æ–­ã‚‹]                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚              [æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ä¾é ¼è€…æœªé¸æŠæ™‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä»Šæ—¥ã®ä¾é ¼è€…                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ ğŸ‘¤æ‘äºº  â”‚     â”‚ ğŸ—¡å†’é™ºè€…â”‚     â”‚ ğŸ§™é­”æ³•ä½¿ã„â”‚          â”‚
â”‚   â”‚         â”‚     â”‚         â”‚     â”‚         â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚       ä¾é ¼è€…ã‚’é¸æŠã™ã‚‹ã¨ã€ä¾é ¼å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™         â”‚
â”‚                                                           â”‚
â”‚              [æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´° ğŸ”µ

### 3.1 ä¾é ¼è€…ã‚¹ãƒ­ãƒƒãƒˆ (`client-slots`)

#### ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **é…ç½®** | æ°´å¹³æ–¹å‘ã€ç­‰é–“éš” | ğŸ”µ |
| **ã‚¹ãƒ­ãƒƒãƒˆæ•°** | 1ã€œ3å€‹ï¼ˆãƒ©ãƒ³ã‚¯ã«å¿œã˜ã¦å¢—åŠ ï¼‰ | ğŸ”µ |
| **ã‚¹ãƒ­ãƒƒãƒˆã‚µã‚¤ã‚º** | 120x120px | ğŸŸ¡ |
| **é–“éš”** | 24px | ğŸŸ¡ |

#### ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰ (`client-card`)

```typescript
interface ClientCardProps {
  clientId: string;         // ä¾é ¼è€…ID
  clientType: ClientType;   // ä¾é ¼è€…ã‚¿ã‚¤ãƒ—ï¼ˆæ‘äºº/å†’é™ºè€…/å•†äºº/è²´æ—ï¼‰
  icon: string;             // ã‚¢ã‚¤ã‚³ãƒ³çµµæ–‡å­—ã¾ãŸã¯ã‚¢ã‚»ãƒƒãƒˆãƒ‘ã‚¹
  name: string;             // è¡¨ç¤ºå
  isSelected: boolean;      // é¸æŠçŠ¶æ…‹
  hasActiveQuest: boolean;  // æ—¢ã«å—æ³¨æ¸ˆã¿ã‹ã©ã†ã‹
}
```

| çŠ¶æ…‹ | è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ« | ä¿¡é ¼æ€§ |
|------|-------------|--------|
| æœªé¸æŠ | èƒŒæ™¯: #E0E0E0ã€æ ç·š: #999999 | ğŸŸ¡ |
| é¸æŠä¸­ | èƒŒæ™¯: #FFF8E1ã€æ ç·š: #FFC107ï¼ˆå¤ªã•3pxï¼‰ã€å½±ã‚ã‚Š | ğŸŸ¡ |
| å—æ³¨æ¸ˆã¿ | èƒŒæ™¯: #C8E6C9ã€æ ç·š: #4CAF50ã€ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯è¡¨ç¤º | ğŸŸ¡ |
| ç©ºãã‚¹ãƒ­ãƒƒãƒˆ | èƒŒæ™¯: #F5F5F5ã€æ ç·š: ç‚¹ç·š#CCCCCC | ğŸŸ¡ |

#### rexUIå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸŸ¡

```typescript
// GridSizerã‚’ä½¿ç”¨ã—ãŸä¾é ¼è€…ã‚¹ãƒ­ãƒƒãƒˆé…ç½®
const clientGrid = this.rexUI.add.gridSizer({
  x: centerX,
  y: 150,
  column: 3,
  row: 1,
  columnProportions: 1,
  space: {
    column: 24,
  },
});

// å„ã‚¹ãƒ­ãƒƒãƒˆã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ 
clients.forEach((client, index) => {
  const clientCard = this.createClientCard(client);
  clientGrid.add(clientCard, { column: index, row: 0 });
});
```

### 3.2 ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ« (`quest-detail`)

#### ãƒ‘ãƒãƒ«æ§‹æˆ

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **å¹…** | è¦ªã‚³ãƒ³ãƒ†ãƒŠã®80% | ğŸŸ¡ |
| **é«˜ã•** | è‡ªå‹•ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å¿œã˜ã¦ï¼‰ | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #FFFDE7 | ğŸŸ¡ |
| **æ ç·š** | 2px solid #FFD54F | ğŸŸ¡ |
| **è§’ä¸¸** | 8px | ğŸŸ¡ |
| **ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°** | 16px | ğŸŸ¡ |

#### ä¾é ¼æƒ…å ±è¡¨ç¤º

```typescript
interface QuestDetailDisplayProps {
  questId: string;          // ä¾é ¼ID
  clientName: string;       // ä¾é ¼è€…å
  dialogue: string;         // ä¾é ¼è€…ã®ã‚»ãƒªãƒ•
  questType: QuestType;     // ä¾é ¼ã‚¿ã‚¤ãƒ—ï¼ˆå€‹åˆ¥/ã‚«ãƒ†ã‚´ãƒª/ã‚¿ã‚°ï¼‰
  targetDescription: string; // è¦æ±‚å†…å®¹ã®èª¬æ˜
  rewardContribution: number; // å ±é…¬è²¢çŒ®åº¦
  rewardGold: number;       // å ±é…¬ãŠé‡‘
  deadline: number;         // æœŸé™ï¼ˆæ—¥æ•°ï¼‰
  difficulty: string;       // é›£æ˜“åº¦è¡¨ç¤ºï¼ˆä»»æ„ï¼‰
}
```

#### ä¾é ¼ã‚¿ã‚¤ãƒ—åˆ¥è¡¨ç¤º ğŸ”µ

| ä¾é ¼ã‚¿ã‚¤ãƒ— | è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆä¾‹ | ä¿¡é ¼æ€§ |
|-----------|--------------|--------|
| å€‹åˆ¥æŒ‡å®š | ã€Œå›å¾©è–¬ã€ãŒæ¬²ã—ã„ | ğŸ”µ |
| ã‚«ãƒ†ã‚´ãƒª | ã€Œè–¬ã€ã‚«ãƒ†ã‚´ãƒªã®ä½•ã‹ | ğŸ”µ |
| ã‚¿ã‚°æŒ‡å®š | ã€Œæ°´å±æ€§ã€ã®ã‚¢ã‚¤ãƒ†ãƒ  | ğŸ”µ |

### 3.3 ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ç¾¤

#### å—æ³¨ãƒœã‚¿ãƒ³ (`btn-accept`)

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ç¨®é¡** | ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ | ğŸ”µ |
| **å¹…** | 120px | ğŸŸ¡ |
| **é«˜ã•** | 44px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #4CAF50 | ğŸŸ¡ |
| **ãƒ›ãƒãƒ¼è‰²** | #45A049 | ğŸŸ¡ |
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œå—æ³¨ã™ã‚‹ã€| ğŸ”µ |
| **ãƒ•ã‚©ãƒ³ãƒˆ** | æ¸¸ã‚´ã‚·ãƒƒã‚¯, 14px, Bold | ğŸŸ¡ |

#### æ–­ã‚‹ãƒœã‚¿ãƒ³ (`btn-decline`)

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ç¨®é¡** | ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒœã‚¿ãƒ³ | ğŸ”µ |
| **å¹…** | 120px | ğŸŸ¡ |
| **é«˜ã•** | 44px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #E0E0E0 | ğŸŸ¡ |
| **ãƒ›ãƒãƒ¼è‰²** | #BDBDBD | ğŸŸ¡ |
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œæ–­ã‚‹ã€| ğŸ”µ |
| **ãƒ•ã‚©ãƒ³ãƒˆ** | æ¸¸ã‚´ã‚·ãƒƒã‚¯, 14px | ğŸŸ¡ |

#### æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³ (`btn-next-phase`)

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ç¨®é¡** | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ | ğŸ”µ |
| **å¹…** | 200px | ğŸŸ¡ |
| **é«˜ã•** | 48px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #2196F3 | ğŸŸ¡ |
| **ãƒ›ãƒãƒ¼è‰²** | #1976D2 | ğŸŸ¡ |
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œæ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸ã€| ğŸ”µ |
| **é…ç½®** | ç”»é¢ä¸‹éƒ¨ä¸­å¤® | ğŸŸ¡ |

---

## 4. çŠ¶æ…‹é·ç§» ğŸ”µ

### 4.1 çŠ¶æ…‹é·ç§»å›³

```mermaid
stateDiagram-v2
    [*] --> Idle: ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹

    Idle --> ClientSelected: ä¾é ¼è€…ã‚¯ãƒªãƒƒã‚¯
    Idle --> NextPhase: æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸ãƒœã‚¿ãƒ³

    ClientSelected --> QuestViewing: ä¾é ¼è©³ç´°è¡¨ç¤º

    QuestViewing --> Accepting: å—æ³¨ã™ã‚‹ãƒœã‚¿ãƒ³
    QuestViewing --> Declining: æ–­ã‚‹ãƒœã‚¿ãƒ³
    QuestViewing --> ClientSelected: åˆ¥ã®ä¾é ¼è€…ã‚¯ãƒªãƒƒã‚¯
    QuestViewing --> Idle: ESCã‚­ãƒ¼

    Accepting --> AcceptAnimation: å—æ³¨å‡¦ç†é–‹å§‹
    AcceptAnimation --> Idle: æ¼”å‡ºå®Œäº†

    Declining --> DeclineAnimation: æ–­ã‚Šå‡¦ç†é–‹å§‹
    DeclineAnimation --> Idle: æ¼”å‡ºå®Œäº†

    Idle --> NextPhase: å…¨ä¾é ¼è€…å¯¾å¿œæ¸ˆã¿/ã‚¹ã‚­ãƒƒãƒ—

    NextPhase --> [*]: æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºã¸
```

### 4.2 çŠ¶æ…‹å®šç¾©

| çŠ¶æ…‹ | èª¬æ˜ | UIè¡¨ç¤º |
|------|------|--------|
| `Idle` | åˆæœŸçŠ¶æ…‹ã€ä¾é ¼è€…é¸æŠå¾…ã¡ | ä¾é ¼è€…ä¸€è¦§ã®ã¿è¡¨ç¤º |
| `ClientSelected` | ä¾é ¼è€…é¸æŠæ¸ˆã¿ | é¸æŠã‚«ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ |
| `QuestViewing` | ä¾é ¼è©³ç´°è¡¨ç¤ºä¸­ | ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ«è¡¨ç¤º |
| `Accepting` | å—æ³¨å‡¦ç†ä¸­ | ãƒœã‚¿ãƒ³éæ´»æ€§ã€å‡¦ç†ä¸­è¡¨ç¤º |
| `Declining` | æ–­ã‚Šå‡¦ç†ä¸­ | ãƒœã‚¿ãƒ³éæ´»æ€§ã€å‡¦ç†ä¸­è¡¨ç¤º |
| `AcceptAnimation` | å—æ³¨æ¼”å‡ºä¸­ | æˆåŠŸæ¼”å‡ºå†ç”Ÿ |
| `DeclineAnimation` | æ–­ã‚Šæ¼”å‡ºä¸­ | æ–­ã‚Šæ¼”å‡ºå†ç”Ÿ |
| `NextPhase` | æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§»ä¸­ | ãƒ•ã‚§ãƒ¼ãƒ‰æ¼”å‡º |

---

## 5. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´° ğŸ”µ

### 5.1 å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒˆãƒªã‚¬ãƒ¼ | å‡¦ç†å†…å®¹ | ä¿¡é ¼æ€§ |
|-----------|----------|----------|--------|
| `OnClientClicked` | ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ | ä¾é ¼è€…é¸æŠã€è©³ç´°è¡¨ç¤º | ğŸ”µ |
| `OnAcceptClicked` | å—æ³¨ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | å—æ³¨å‡¦ç†å®Ÿè¡Œ | ğŸ”µ |
| `OnDeclineClicked` | æ–­ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | æ–­ã‚Šå‡¦ç†å®Ÿè¡Œ | ğŸ”µ |
| `OnNextPhaseClicked` | æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§» | ğŸ”µ |
| `OnEscapePressed` | ESCã‚­ãƒ¼æŠ¼ä¸‹ | é¸æŠè§£é™¤/è©³ç´°é–‰ã˜ã‚‹ | ğŸŸ¡ |

### 5.2 ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆEventBusï¼‰

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ä¿¡é ¼æ€§ |
|-----------|-----------|---------------|--------|
| `QUEST_ACCEPTED` | `{ questId, clientId }` | å—æ³¨å®Œäº†æ™‚ | ğŸ”µ |
| `QUEST_DECLINED` | `{ clientId }` | æ–­ã‚Šå®Œäº†æ™‚ | ğŸ”µ |
| `PHASE_TRANSITION_REQUESTED` | `{ from: 'quest_accept', to: 'gathering' }` | æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ | ğŸ”µ |
| `CLIENT_SELECTED` | `{ clientId }` | ä¾é ¼è€…é¸æŠæ™‚ | ğŸŸ¡ |

### 5.3 ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å®Ÿè£… ğŸŸ¡

```typescript
// QuestAcceptContainer.ts
export class QuestAcceptContainer extends BasePhaseContainer {
  private eventBus: IEventBus;
  private selectedClientId: string | null = null;

  constructor(scene: Phaser.Scene, eventBus: IEventBus) {
    super(scene);
    this.eventBus = eventBus;
    this.setupEventListeners();
  }

  private setupEventListeners(): void {
    // ä¾é ¼è€…é¸æŠ
    this.on('client-clicked', (clientId: string) => {
      this.selectedClientId = clientId;
      this.eventBus.emit('CLIENT_SELECTED', { clientId });
      this.showQuestDetail(clientId);
    });

    // å—æ³¨
    this.on('accept-clicked', async () => {
      if (!this.selectedClientId) return;
      await this.handleAccept(this.selectedClientId);
    });

    // æ–­ã‚‹
    this.on('decline-clicked', async () => {
      if (!this.selectedClientId) return;
      await this.handleDecline(this.selectedClientId);
    });
  }

  private async handleAccept(clientId: string): Promise<void> {
    this.setState('Accepting');

    // UseCaseã‚’å‘¼ã³å‡ºã—
    const result = await this.acceptQuestUseCase.execute({ clientId });

    if (result.success) {
      await this.playAcceptAnimation();
      this.eventBus.emit('QUEST_ACCEPTED', {
        questId: result.questId,
        clientId
      });
    }

    this.setState('Idle');
  }
}
```

---

## 6. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è©³ç´° ğŸŸ¡

### 6.1 ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰é¸æŠã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | é–‹å§‹å€¤ | çµ‚äº†å€¤ | æ™‚é–“ | ã‚¤ãƒ¼ã‚¸ãƒ³ã‚° |
|-----------|-------|-------|------|-----------|
| scale | 1.0 | 1.05 | 150ms | Quad.Out |
| y | 0 | -8 | 150ms | Quad.Out |
| shadow.blur | 4 | 12 | 150ms | Linear |

### 6.2 ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ«è¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | é–‹å§‹å€¤ | çµ‚äº†å€¤ | æ™‚é–“ | ã‚¤ãƒ¼ã‚¸ãƒ³ã‚° |
|-----------|-------|-------|------|-----------|
| alpha | 0 | 1 | 200ms | Quad.Out |
| y | +30 | 0 | 200ms | Back.Out |
| scale | 0.95 | 1.0 | 200ms | Back.Out |

### 6.3 å—æ³¨æˆåŠŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// å—æ³¨æˆåŠŸæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
private async playAcceptAnimation(): Promise<void> {
  // 1. ãƒœã‚¿ãƒ³ã«æˆåŠŸã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  await this.tweenButton('accept', {
    scale: [1.0, 1.1, 1.0],
    duration: 200
  });

  // 2. ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰ã«ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯è¡¨ç¤º
  const checkmark = this.createCheckmark(this.selectedClientCard);
  await this.tweens.add({
    targets: checkmark,
    scale: { from: 0, to: 1 },
    alpha: { from: 0, to: 1 },
    duration: 300,
    ease: 'Back.Out',
  }).toPromise();

  // 3. ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ«ã‚’é–‰ã˜ã‚‹
  await this.tweens.add({
    targets: this.questDetailPanel,
    alpha: 0,
    y: '+=20',
    duration: 200,
    ease: 'Quad.In',
  }).toPromise();

  // 4. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ä¾é ¼ãƒªã‚¹ãƒˆæ›´æ–°ï¼ˆToasté€šçŸ¥ï¼‰
  this.eventBus.emit('TOAST_SHOW', {
    message: 'ä¾é ¼ã‚’å—æ³¨ã—ã¾ã—ãŸ',
    type: 'success',
    duration: 2000,
  });
}
```

### 6.4 æ–­ã‚Šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | é–‹å§‹å€¤ | çµ‚äº†å€¤ | æ™‚é–“ | ã‚¤ãƒ¼ã‚¸ãƒ³ã‚° |
|-----------|-------|-------|------|-----------|
| ã‚«ãƒ¼ãƒ‰alpha | 1.0 | 0.5 | 300ms | Quad.Out |
| ã‚«ãƒ¼ãƒ‰scale | 1.0 | 0.95 | 300ms | Quad.Out |
| ãƒ‘ãƒãƒ«fade | 1.0 | 0 | 200ms | Quad.In |

---

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« ğŸ”µ

### 7.1 ä¾é ¼è€…ãƒ‡ãƒ¼ã‚¿

```typescript
interface Client {
  id: string;
  type: ClientType;
  name: string;
  icon: string;
  quest: Quest;
}

enum ClientType {
  VILLAGER = 'villager',     // æ‘äºº
  ADVENTURER = 'adventurer', // å†’é™ºè€…
  MERCHANT = 'merchant',     // å•†äºº
  NOBLE = 'noble',           // è²´æ—
}
```

### 7.2 ä¾é ¼ãƒ‡ãƒ¼ã‚¿

```typescript
interface Quest {
  id: string;
  clientId: string;
  type: QuestType;
  targetId?: string;         // å€‹åˆ¥æŒ‡å®šæ™‚ã®ã‚¢ã‚¤ãƒ†ãƒ ID
  targetCategory?: string;   // ã‚«ãƒ†ã‚´ãƒªæŒ‡å®šæ™‚
  targetTag?: string;        // ã‚¿ã‚°æŒ‡å®šæ™‚
  dialogue: string;          // ä¾é ¼è€…ã®ã‚»ãƒªãƒ•
  rewardContribution: number;
  rewardGold: number;
  deadline: number;          // æ®‹ã‚Šæ—¥æ•°
  acceptedDay?: number;      // å—æ³¨ã—ãŸæ—¥
  status: QuestStatus;
}

enum QuestType {
  SPECIFIC = 'specific',     // å€‹åˆ¥æŒ‡å®š
  CATEGORY = 'category',     // ã‚«ãƒ†ã‚´ãƒª
  TAG = 'tag',               // ã‚¿ã‚°
}

enum QuestStatus {
  AVAILABLE = 'available',   // å—æ³¨å¯èƒ½
  ACCEPTED = 'accepted',     // å—æ³¨æ¸ˆã¿
  COMPLETED = 'completed',   // ç´å“æ¸ˆã¿
  FAILED = 'failed',         // å¤±æ•—ï¼ˆæœŸé™åˆ‡ã‚Œï¼‰
}
```

### 7.3 ãƒ•ã‚§ãƒ¼ã‚ºçŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿

```typescript
interface QuestAcceptPhaseState {
  clients: Client[];
  selectedClientId: string | null;
  acceptedQuestIds: string[];
  canProceed: boolean;       // æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é€²ã‚ã‚‹ã‹
}
```

---

## 8. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ ğŸŸ¡

### 8.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

| ã‚­ãƒ¼ | å‹•ä½œ | ä¿¡é ¼æ€§ |
|------|------|--------|
| `1-3` | å¯¾å¿œã™ã‚‹ä½ç½®ã®ä¾é ¼è€…ã‚’é¸æŠ | ğŸŸ¡ |
| `Enter` | é¸æŠä¸­ã®ä¾é ¼ã‚’å—æ³¨ | ğŸŸ¡ |
| `Escape` | é¸æŠè§£é™¤/è©³ç´°é–‰ã˜ã‚‹ | ğŸŸ¡ |
| `D` | é¸æŠä¸­ã®ä¾é ¼ã‚’æ–­ã‚‹ | ğŸŸ¡ |
| `N` | æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸ | ğŸŸ¡ |

### 8.2 ãƒ•ã‚©ãƒ¼ã‚«ã‚¹é †åº

1. ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰ç¾¤ï¼ˆå·¦ã‹ã‚‰å³ï¼‰
2. ä¾é ¼è©³ç´°ãƒ‘ãƒãƒ«ï¼ˆè¡¨ç¤ºæ™‚ï¼‰
   - å—æ³¨ãƒœã‚¿ãƒ³
   - æ–­ã‚‹ãƒœã‚¿ãƒ³
3. æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºãƒœã‚¿ãƒ³

### 8.3 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

```typescript
// ARIAå±æ€§ã®è¨­å®šä¾‹
clientCard.setAccessibility({
  role: 'button',
  label: `${client.name}ã®ä¾é ¼ã€‚${quest.dialogue}`,
  description: `å ±é…¬: è²¢çŒ®åº¦${quest.rewardContribution}ã€${quest.rewardGold}ã‚´ãƒ¼ãƒ«ãƒ‰ã€‚æœŸé™: ${quest.deadline}æ—¥`,
});
```

---

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ğŸŸ¡

### 9.1 ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾å‡¦ |
|--------|------|------|
| å—æ³¨ä¸Šé™è¶…é | å—æ³¨ã§ãã‚‹ä¾é ¼æ•°ã‚’è¶…ãˆã¦ã„ã‚‹ | Toastè¡¨ç¤ºã€Œã“ã‚Œä»¥ä¸Šä¾é ¼ã‚’å—ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€ |
| å—æ³¨å‡¦ç†å¤±æ•— | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ç­‰ | Toastè¡¨ç¤ºã€Œå—æ³¨ã«å¤±æ•—ã—ã¾ã—ãŸã€ã€ãƒªãƒˆãƒ©ã‚¤å¯èƒ½ |
| ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ | ä¾é ¼è€…ãƒ‡ãƒ¼ã‚¿ãŒä¸æ­£ | ç©ºãã‚¹ãƒ­ãƒƒãƒˆã¨ã—ã¦è¡¨ç¤ºã€ãƒ­ã‚°å‡ºåŠ› |

### 9.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```typescript
// ã‚¨ãƒ©ãƒ¼æ™‚ã®Toastè¡¨ç¤º
this.eventBus.emit('TOAST_SHOW', {
  message: 'ã“ã‚Œä»¥ä¸Šä¾é ¼ã‚’å—ã‘ã‚‰ã‚Œã¾ã›ã‚“',
  type: 'warning',
  duration: 3000,
});
```

---

## 10. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…® ğŸŸ¡

### 10.1 æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | å¯¾ç­– |
|------|------|
| ä¾é ¼è€…ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ä½¿ç”¨ |
| ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | Tweenå†åˆ©ç”¨ |
| ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ | ãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†æ™‚ã«å¿…ãšè§£é™¤ |
| ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ | destroyæ™‚ã«ã™ã¹ã¦ã®å‚ç…§ã‚’ã‚¯ãƒªã‚¢ |

### 10.2 ç›®æ¨™ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| æŒ‡æ¨™ | ç›®æ¨™å€¤ |
|------|--------|
| ãƒ•ã‚§ãƒ¼ã‚ºåˆæœŸåŒ– | < 100ms |
| ã‚«ãƒ¼ãƒ‰é¸æŠåå¿œ | < 16ms |
| å—æ³¨å‡¦ç†å®Œäº† | < 500ms |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | < 10MBï¼ˆãƒ•ã‚§ãƒ¼ã‚ºå˜ä½“ï¼‰ |

---

## é–¢é€£æ–‡æ›¸

- **ãƒ¡ã‚¤ãƒ³ç”»é¢æ¦‚è¦**: [main.md](./main.md)
- **å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: [common-components.md](./common-components.md)
- **ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹**: [../../game-mechanics.md](../../game-mechanics.md)
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ**: [../../dataflow.md](../../dataflow.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-16 | 1.0.0 | main.mdã‹ã‚‰åˆ†å‰²ã€è©³ç´°åŒ– |
