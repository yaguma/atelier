# æ¡å–å ´æ‰€é¸æŠã‚¹ãƒ†ãƒ¼ã‚¸ è©³ç´°è¨­è¨ˆ

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-02-23
**æ›´æ–°æ—¥**: 2026-02-23
**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆID**: gathering-location-select

---

## 1. æ¦‚è¦

### 1.1 åŸºæœ¬æƒ…å ±

| é …ç›® | å€¤ |
|------|-----|
| **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå** | æ¡å–å ´æ‰€é¸æŠUI (LocationSelectUI) |
| **è¦ªãƒ•ã‚§ãƒ¼ã‚º** | æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆPHASE-002ï¼‰ |
| **è²¬å‹™** | æ¡å–åœ°ã‚’ãƒãƒƒãƒ—å½¢å¼ã§è¡¨ç¤ºã—ã€æ‰‹æœ­é€£å‹•ã§å ´æ‰€é¸æŠã‚’è¡Œã† |
| **å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«** | `src/features/gathering/components/LocationSelectUI.ts` |
| **è¦ä»¶** | REQ-002, REQ-002-01ã€œREQ-002-05 |

### 1.2 ã‚¹ãƒ†ãƒ¼ã‚¸ä½ç½®

æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºã¯4ã‚¹ãƒ†ãƒ¼ã‚¸ã§æ§‹æˆã•ã‚Œã‚‹ã€‚æœ¬æ–‡æ›¸ã¯æœ€åˆã®ã€Œå ´æ‰€é¸æŠã€ã‚¹ãƒ†ãƒ¼ã‚¸ã‚’å¯¾è±¡ã¨ã™ã‚‹ã€‚

```
å ´æ‰€é¸æŠï¼ˆæœ¬æ–‡æ›¸ï¼‰ â†’ å ´æ‰€è©³ç´° â†’ ãƒ‰ãƒ©ãƒ•ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ â†’ æ¡å–çµæœ
(LOCATION_SELECT)   (LOCATION_DETAIL)  (DRAFT_SESSION)     (GATHER_RESULT)
```

### 1.3 ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«è¨˜è¼‰ï¼ˆREQ-002ç³»ï¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  ğŸ”µ

### 2.1 æ¡å–å ´æ‰€é¸æŠãƒãƒƒãƒ—ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ“ãƒ¥ãƒ¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¡å–åœ°ãƒãƒƒãƒ—                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚               â—† å¤ä»£éºè·¡                                â”‚  â”‚
â”‚  â”‚               AP:2                                      â”‚  â”‚
â”‚  â”‚    â—å¤ä»£ã®æ¬ ç‰‡ â—‹é­”æ³•ã®ç²‰ â–³è³¢è€…ã®çŸ³ç‰‡                  â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚                    â— é‰±å±±                                â”‚  â”‚
â”‚  â”‚                    AP:1                                  â”‚  â”‚
â”‚  â”‚         â—é‰„é‰±çŸ³ â—‹éŠ…é‰±çŸ³ â–³éŠ€é‰±çŸ³                      â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â— è¿‘ãã®æ£®                                             â”‚  â”‚
â”‚  â”‚  AP:1                                                   â”‚  â”‚
â”‚  â”‚  â—è–¬è‰ â—‹æ¯’è‰ â–³å…‰ã‚‹èŠ±                                  â”‚  â”‚
â”‚  â”‚                                       â—† ç«å±±åœ°å¸¯        â”‚  â”‚
â”‚  â”‚                                       AP:2              â”‚  â”‚
â”‚  â”‚                                â—ç«å±±ç° â—‹æº¶å²©çŸ³ â–³ç‚ã®çµæ™¶â”‚ â”‚
â”‚  â”‚            â— æ¹–ç•”                                       â”‚  â”‚
â”‚  â”‚            AP:1                                         â”‚  â”‚
â”‚  â”‚       â—æ°´æ™¶ â—‹çœŸç è² â–³æœˆå…‰çŸ³                           â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â— = é¸æŠå¯èƒ½ï¼ˆæ‰‹æœ­ã«ã‚«ãƒ¼ãƒ‰ã‚ã‚Šï¼‰ / â—† = é¸æŠä¸å¯ï¼ˆåŠé€æ˜ï¼‰   â”‚
â”‚  å‡ºç¾ç‡: â—é«˜ â—‹ä¸­ â–³ä½                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ‰‹æœ­ã«æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ãŒãªã„å ´åˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¡å–åœ°ãƒãƒƒãƒ—                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚               â—† å¤ä»£éºè·¡                                â”‚  â”‚
â”‚  â”‚                    â—† é‰±å±±                                â”‚  â”‚
â”‚  â”‚  â—† è¿‘ãã®æ£®                                             â”‚  â”‚
â”‚  â”‚                                       â—† ç«å±±åœ°å¸¯        â”‚  â”‚
â”‚  â”‚            â—† æ¹–ç•”                                       â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚         â”‚   æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“    â”‚                 â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ãƒãƒƒãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä»•æ§˜ ğŸ”µ

### 3.1 ãƒãƒƒãƒ—è¡¨ç¤ºã‚¨ãƒªã‚¢

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ãƒãƒƒãƒ—èƒŒæ™¯å¹…** | 600px | ğŸ”µ |
| **ãƒãƒƒãƒ—èƒŒæ™¯é«˜ã•** | 410px | ğŸ”µ |
| **ãƒãƒƒãƒ—èƒŒæ™¯X** | 10px | ğŸ”µ |
| **ãƒãƒƒãƒ—èƒŒæ™¯Y** | 40px | ğŸ”µ |
| **ãƒãƒƒãƒ—èƒŒæ™¯è‰²** | `Colors.background.secondary` | ğŸ”µ |
| **ãƒãƒƒãƒ—ãƒœãƒ¼ãƒ€ãƒ¼** | 2px solid `Colors.border.primary` | ğŸ”µ |
| **å†…éƒ¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°** | 50pxï¼ˆãƒãƒ¼ãƒ‰ãŒç«¯ã«å¯„ã‚Šã™ããªã„ãŸã‚ã®ä½™ç™½ï¼‰ | ğŸ”µ |

### 3.2 ãƒãƒƒãƒ—ã‚¿ã‚¤ãƒˆãƒ«

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œæ¡å–åœ°ãƒãƒƒãƒ—ã€ | ğŸ”µ |
| **é…ç½®** | ãƒãƒƒãƒ—èƒŒæ™¯ã®ä¸Šéƒ¨ä¸­å¤®ï¼ˆY: 15pxï¼‰ | ğŸ”µ |
| **ãƒ•ã‚©ãƒ³ãƒˆ** | `THEME.sizes.large`pxã€å¤ªå­—ã€ç™½è‰² | ğŸ”µ |

### 3.3 åº§æ¨™ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

å ´æ‰€ãƒ‡ãƒ¼ã‚¿ã®mapX, mapYåº§æ¨™ã‚’ãƒãƒƒãƒ—è¡¨ç¤ºã‚¨ãƒªã‚¢å†…ã«ãƒªãƒ‹ã‚¢ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã€‚

```typescript
// ç´”ç²‹é–¢æ•°: ãƒãƒƒãƒ—åº§æ¨™ã®å¢ƒç•Œè¨ˆç®—
function calculateMapBounds(locations: readonly IGatheringLocation[]): MapBounds;

// ç´”ç²‹é–¢æ•°: ãƒãƒƒãƒ—åº§æ¨™â†’UIåº§æ¨™å¤‰æ›
function scaleToMapArea(mapX: number, mapY: number, bounds: MapBounds): { x: number; y: number };
```

**ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯**:
- å…¨å ´æ‰€ã®mapX, mapYã®æœ€å°å€¤ãƒ»æœ€å¤§å€¤ã‚’ç®—å‡º
- ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°å†…ã®ã‚¨ãƒªã‚¢ï¼ˆ60pxã€œ550px, 90pxã€œ400pxï¼‰ã«ç·šå½¢ãƒãƒƒãƒ”ãƒ³ã‚°
- å˜ä¸€å ´æ‰€ã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç¯„å›²ï¼ˆÂ±100ï¼‰ã§ã‚¨ãƒªã‚¢ä¸­å¤®ã«é…ç½®
- åŒä¸€åº§æ¨™ã®å ´åˆã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç¯„å›²ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆNaNé˜²æ­¢ï¼‰

---

## 4. å ´æ‰€ãƒãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ğŸ”µ

### 4.1 ãƒãƒ¼ãƒ‰æ§‹æˆ

å„å ´æ‰€ã¯ä»¥ä¸‹ã®è¦ç´ ã§æ§‹æˆã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦ãƒãƒƒãƒ—ä¸Šã«é…ç½®ã•ã‚Œã‚‹ã€‚

```
        AP:1 â† APã‚³ã‚¹ãƒˆãƒãƒƒã‚¸ï¼ˆå³ä¸Šï¼‰
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â—     â”‚ â† å††å½¢ãƒãƒ¼ãƒ‰ï¼ˆåŠå¾„24pxï¼‰
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     è¿‘ãã®æ£®  â† å ´æ‰€åãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¸‹ï¼‰
  â—è–¬è‰ â—‹æ¯’è‰ â–³å…‰ã‚‹èŠ± â† ç´ æãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã•ã‚‰ã«ä¸‹ï¼‰
```

### 4.2 ãƒãƒ¼ãƒ‰ã‚µã‚¤ã‚ºãƒ»é…ç½®

| è¦ç´  | ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|------|-----------|-----|--------|
| **å††å½¢ãƒãƒ¼ãƒ‰** | åŠå¾„ | 24px | ğŸ”µ |
| **å ´æ‰€å** | Yæ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ | +34pxï¼ˆãƒãƒ¼ãƒ‰ä¸­å¿ƒã‹ã‚‰ï¼‰ | ğŸ”µ |
| **å ´æ‰€å** | ãƒ•ã‚©ãƒ³ãƒˆ | `THEME.sizes.medium`pxã€å¤ªå­—ã€ç™½è‰² | ğŸ”µ |
| **APãƒãƒƒã‚¸** | Xæ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ | +20px | ğŸ”µ |
| **APãƒãƒƒã‚¸** | Yæ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ | -20px | ğŸ”µ |
| **APãƒãƒƒã‚¸** | ãƒ•ã‚©ãƒ³ãƒˆ | `THEME.sizes.small`pxã€#FFD700ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ï¼‰ | ğŸ”µ |
| **ç´ æãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼** | Yæ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ | +52px | ğŸ”µ |
| **ç´ æãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼** | ãƒ•ã‚©ãƒ³ãƒˆ | 12pxã€#CCCCCC | ğŸ”µ |

### 4.3 é¸æŠå¯èƒ½/ä¸å¯ã®è¦–è¦šçŠ¶æ…‹

| çŠ¶æ…‹ | ãƒãƒ¼ãƒ‰èƒŒæ™¯è‰² | ãƒãƒ¼ãƒ‰ãƒœãƒ¼ãƒ€ãƒ¼è‰² | ã‚¢ãƒ«ãƒ•ã‚¡å€¤ | ä¿¡é ¼æ€§ |
|------|-------------|-----------------|-----------|--------|
| **é¸æŠå¯èƒ½** | `Colors.cardType.gathering` | `Colors.cardType.gathering` | 1.0 | ğŸ”µ |
| **é¸æŠä¸å¯** | `Colors.background.primary` | `Colors.border.primary` | 0.4 | ğŸ”µ |
| **ãƒ›ãƒãƒ¼** | å¤‰æ›´ãªã— | `Colors.border.gold`ï¼ˆãƒœãƒ¼ãƒ€ãƒ¼3pxï¼‰ | 1.0 | ğŸ”µ |

### 4.4 ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

| æ“ä½œ | å¯¾è±¡ | å‹•ä½œ | ä¿¡é ¼æ€§ |
|------|------|------|--------|
| **ã‚¯ãƒªãƒƒã‚¯** | é¸æŠå¯èƒ½ãƒãƒ¼ãƒ‰ | `onLocationSelect`ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ç™ºç« | ğŸ”µ |
| **ãƒ›ãƒãƒ¼ï¼ˆoverï¼‰** | é¸æŠå¯èƒ½ãƒãƒ¼ãƒ‰ | ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’`Colors.border.gold`ã«å¤‰æ›´ã€å¤ªã•3px | ğŸ”µ |
| **ãƒ›ãƒãƒ¼ï¼ˆoutï¼‰** | é¸æŠå¯èƒ½ãƒãƒ¼ãƒ‰ | ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã‚’`Colors.cardType.gathering`ã«æˆ»ã™ã€å¤ªã•2px | ğŸ”µ |
| **ã‚¯ãƒªãƒƒã‚¯** | é¸æŠä¸å¯ãƒãƒ¼ãƒ‰ | åå¿œãªã—ï¼ˆ`setInteractive`æœªè¨­å®šï¼‰ | ğŸ”µ |
| **ã‚«ãƒ¼ã‚½ãƒ«** | é¸æŠå¯èƒ½ãƒãƒ¼ãƒ‰ | ãƒãƒ³ãƒ‰ã‚«ãƒ¼ã‚½ãƒ«ï¼ˆ`useHandCursor: true`ï¼‰ | ğŸ”µ |

---

## 5. æ‰‹æœ­é€£å‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° ğŸ”µ

### 5.1 ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯

å ´æ‰€ã®é¸æŠå¯å¦ã¯æ‰‹æœ­ã®æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®æœ‰ç„¡ã§æ±ºå®šã•ã‚Œã‚‹ã€‚

```
æ‰‹æœ­ã‚«ãƒ¼ãƒ‰                  ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿             UIè¡¨ç¤º
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿‘ãã®æ£® â”‚â”€â”€cardIdç…§åˆâ”€â”€â†’â”‚ è¿‘ãã®æ£®     â”‚â”€â”€â”€â”€â”€â”€â†’ â”‚ â— é¸æŠå¯èƒ½    â”‚
â”‚ (forest) â”‚                â”‚ cardId:forestâ”‚        â”‚ alpha: 1.0    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  æ‰‹æœ­ã«ãªã„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ é‰±å±±         â”‚â”€â”€â”€â”€â”€â”€â†’ â”‚ â—† é¸æŠä¸å¯    â”‚
                           â”‚ cardId:mine  â”‚        â”‚ alpha: 0.4    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
GatheringPhaseUI
  â”‚
  â”œâ”€ getAvailableLocations(handCardIds)
  â”‚   â”œâ”€ GATHERING_LOCATIONSï¼ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿5ä»¶ï¼‰
  â”‚   â””â”€ handCardIdsï¼ˆæ‰‹æœ­ã®cardIdé…åˆ—ï¼‰
  â”‚       â†’ IGatheringLocation[]ï¼ˆisSelectableãƒ•ãƒ©ã‚°ä»˜ãï¼‰
  â”‚
  â””â”€ LocationSelectUI.updateLocations(locations)
      â”œâ”€ calculateMapBounds(locations)
      â”œâ”€ scaleToMapArea(mapX, mapY, bounds) Ã— N
      â””â”€ createLocationNode(location, x, y) Ã— N
```

### 5.3 ç©ºæ‰‹æœ­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

é¸æŠå¯èƒ½ãªå ´æ‰€ãŒ0ä»¶ã®å ´åˆã€ãƒãƒƒãƒ—ä¸­å¤®ã«ã€Œæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã™ã‚‹ã€‚

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€ | ğŸ”µ |
| **é…ç½®** | ãƒãƒƒãƒ—èƒŒæ™¯ä¸­å¤® | ğŸ”µ |
| **ãƒ•ã‚©ãƒ³ãƒˆ** | `THEME.sizes.medium`pxã€#888888 | ğŸ”µ |

---

## 6. ç§»å‹•APã‚³ã‚¹ãƒˆè¡¨ç¤º ğŸ”µ

### 6.1 APã‚³ã‚¹ãƒˆãƒãƒƒã‚¸

å„å ´æ‰€ãƒãƒ¼ãƒ‰ã®å³ä¸Šã«APã‚³ã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã€‚

```
AP:1  â† AP1ã‚³ã‚¹ãƒˆã®å ´æ‰€ï¼ˆè¿‘ãã®æ£®ã€é‰±å±±ã€æ¹–ç•”ï¼‰
AP:2  â† AP2ã‚³ã‚¹ãƒˆã®å ´æ‰€ï¼ˆå¤ä»£éºè·¡ã€ç«å±±åœ°å¸¯ï¼‰
```

### 6.2 APã‚³ã‚¹ãƒˆã¨ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹ã®é–¢ä¿‚

å ´æ‰€é¸æŠå¾Œã€ç§»å‹•APã‚³ã‚¹ãƒˆã¯ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã®åŸºæœ¬ã‚³ã‚¹ãƒˆã¨ã—ã¦æ¶ˆè²»ã•ã‚Œã‚‹ã€‚

| å ´æ‰€ | ç§»å‹•APã‚³ã‚¹ãƒˆ | åˆè¨ˆAPã‚³ã‚¹ãƒˆè¨ˆç®— |
|------|-------------|-----------------|
| è¿‘ãã®æ£® | 1 | 1 + é¸æŠå€‹æ•°ã«ã‚ˆã‚‹è¿½åŠ ã‚³ã‚¹ãƒˆ |
| é‰±å±± | 1 | 1 + é¸æŠå€‹æ•°ã«ã‚ˆã‚‹è¿½åŠ ã‚³ã‚¹ãƒˆ |
| æ¹–ç•” | 1 | 1 + é¸æŠå€‹æ•°ã«ã‚ˆã‚‹è¿½åŠ ã‚³ã‚¹ãƒˆ |
| å¤ä»£éºè·¡ | 2 | 2 + é¸æŠå€‹æ•°ã«ã‚ˆã‚‹è¿½åŠ ã‚³ã‚¹ãƒˆ |
| ç«å±±åœ°å¸¯ | 2 | 2 + é¸æŠå€‹æ•°ã«ã‚ˆã‚‹è¿½åŠ ã‚³ã‚¹ãƒˆ |

APè¶…éæ™‚ã¯è‡ªå‹•æ—¥é€²è¡ŒãŒç™ºç”Ÿã™ã‚‹ï¼ˆREQ-003å‚ç…§ï¼‰ã€‚

---

## 7. ç´ æãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º ğŸ”µ

### 7.1 è¡¨ç¤ºå½¢å¼

å„å ´æ‰€ã®æ¡å–å¯èƒ½ç´ æã‚’å‡ºç¾ç‡ãƒ©ãƒ™ãƒ«ä»˜ãã§ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆè¡¨ç¤ºã™ã‚‹ã€‚

| å‡ºç¾ç‡ | ãƒ©ãƒ™ãƒ« | æ„å‘³ |
|--------|-------|------|
| `high` | â— | é«˜ç¢ºç‡ |
| `medium` | â—‹ | ä¸­ç¢ºç‡ |
| `low` | â–³ | ä½ç¢ºç‡ |

### 7.2 è¡¨ç¤ºä¾‹

```
â—è–¬è‰ â—‹æ¯’è‰ â–³å…‰ã‚‹èŠ±       â† è¿‘ãã®æ£®
â—é‰„é‰±çŸ³ â—‹éŠ…é‰±çŸ³ â–³éŠ€é‰±çŸ³   â† é‰±å±±
â—æ°´æ™¶ â—‹çœŸç è² â–³æœˆå…‰çŸ³     â† æ¹–ç•”
â—å¤ä»£ã®æ¬ ç‰‡ â—‹é­”æ³•ã®ç²‰ â–³è³¢è€…ã®çŸ³ç‰‡ â† å¤ä»£éºè·¡
â—ç«å±±ç° â—‹æº¶å²©çŸ³ â–³ç‚ã®çµæ™¶ â† ç«å±±åœ°å¸¯
```

### 7.3 ç´ æãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```typescript
interface IMaterialPreview {
  readonly name: string;      // ç´ æå
  readonly rarity: string;    // ãƒ¬ã‚¢ãƒªãƒ†ã‚£ï¼ˆCommon, Uncommon, Rare, Legendaryï¼‰
  readonly dropRate: DropRateLabel; // å‡ºç¾ç‡ï¼ˆhigh, medium, lowï¼‰
}
```

---

## 8. å ´æ‰€é¸æŠâ†’ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å– é·ç§» ğŸ”µ

### 8.1 é·ç§»ãƒ•ãƒ­ãƒ¼

```mermaid
stateDiagram-v2
    [*] --> LOCATION_SELECT: æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹

    LOCATION_SELECT --> LOCATION_DETAIL: å ´æ‰€ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯
    LOCATION_SELECT --> [*]: ãƒ•ã‚§ãƒ¼ã‚ºåˆ‡æ›¿ï¼ˆã‚¿ãƒ–ï¼‰

    LOCATION_DETAIL --> DRAFT_SESSION: ã€Œæ¡å–ã‚’é–‹å§‹ã™ã‚‹ã€ãƒœã‚¿ãƒ³
    LOCATION_DETAIL --> LOCATION_SELECT: ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ãƒœã‚¿ãƒ³

    DRAFT_SESSION --> GATHER_RESULT: æ¡å–å®Œäº†
    GATHER_RESULT --> LOCATION_SELECT: OKæŠ¼ä¸‹
```

### 8.2 å ´æ‰€é¸æŠçµæœãƒ‡ãƒ¼ã‚¿

å ´æ‰€ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

```typescript
interface ILocationSelectResult {
  readonly cardId: CardId;         // é¸æŠã—ãŸæ¡å–åœ°ã‚«ãƒ¼ãƒ‰ID
  readonly locationName: string;   // æ¡å–åœ°å
  readonly movementAPCost: number; // ç§»å‹•APã‚³ã‚¹ãƒˆ
}
```

### 8.3 é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ğŸŸ¡

| ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | ãƒˆãƒªã‚¬ãƒ¼ | åŠ¹æœ | æ™‚é–“ | ä¿¡é ¼æ€§ |
|---------------|---------|------|------|--------|
| ãƒãƒƒãƒ—ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ | å ´æ‰€é¸æŠç¢ºå®šæ™‚ | ãƒãƒƒãƒ—UIå…¨ä½“ãŒãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ | 300ms | ğŸŸ¡ |
| å ´æ‰€è©³ç´°ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ | ãƒãƒƒãƒ—ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆå®Œäº†å¾Œ | å ´æ‰€è©³ç´°ãƒ‘ãƒãƒ«ãŒä¸‹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ | 400ms | ğŸŸ¡ |
| å ´æ‰€è©³ç´°ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ã‚¦ãƒˆ | ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ | å ´æ‰€è©³ç´°ãƒ‘ãƒãƒ«ãŒä¸‹ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ã‚¦ãƒˆ | 300ms | ğŸŸ¡ |
| ãƒãƒƒãƒ—ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ | å ´æ‰€è©³ç´°ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ã‚¦ãƒˆå®Œäº†å¾Œ | ãƒãƒƒãƒ—UIå…¨ä½“ãŒãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ | 300ms | ğŸŸ¡ |

```typescript
// å ´æ‰€é¸æŠâ†’å ´æ‰€è©³ç´°ã¸ã®é·ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæƒ³å®šå®Ÿè£…ï¼‰
async transitionToLocationDetail(): Promise<void> {
  // 1. ãƒãƒƒãƒ—UIã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
  await this.tweens.add({
    targets: this.locationSelectUI.getContainer(),
    alpha: { from: 1, to: 0 },
    duration: 300,
    ease: 'Quad.Out',
  }).toPromise();

  // 2. å ´æ‰€è©³ç´°ãƒ‘ãƒãƒ«ã‚’ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³
  await this.tweens.add({
    targets: this.locationDetailPanel,
    y: { from: this.cameras.main.height, to: centerY },
    alpha: { from: 0, to: 1 },
    duration: 400,
    ease: 'Back.Out',
  }).toPromise();
}
```

---

## 9. ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ ğŸ”µ

### 9.1 æ¡å–å ´æ‰€ä¸€è¦§

| å ´æ‰€å | cardId | ç§»å‹•APã‚³ã‚¹ãƒˆ | mapX | mapY | ç´ æ1 | ç´ æ2 | ç´ æ3 |
|--------|--------|-------------|------|------|-------|-------|-------|
| è¿‘ãã®æ£® | gathering-forest | 1 | 100 | 200 | è–¬è‰(C)â— | æ¯’è‰(C)â—‹ | å…‰ã‚‹èŠ±(U)â–³ |
| é‰±å±± | gathering-mine | 1 | 300 | 150 | é‰„é‰±çŸ³(C)â— | éŠ…é‰±çŸ³(C)â—‹ | éŠ€é‰±çŸ³(U)â–³ |
| æ¹–ç•” | gathering-lake | 1 | 200 | 350 | æ°´æ™¶(C)â— | çœŸç è²(U)â—‹ | æœˆå…‰çŸ³(R)â–³ |
| å¤ä»£éºè·¡ | gathering-ruins | 2 | 400 | 100 | å¤ä»£ã®æ¬ ç‰‡(U)â— | é­”æ³•ã®ç²‰(R)â—‹ | è³¢è€…ã®çŸ³ç‰‡(L)â–³ |
| ç«å±±åœ°å¸¯ | gathering-volcano | 2 | 450 | 300 | ç«å±±ç°(C)â— | æº¶å²©çŸ³(U)â—‹ | ç‚ã®çµæ™¶(R)â–³ |

ãƒ¬ã‚¢ãƒªãƒ†ã‚£: C=Common, U=Uncommon, R=Rare, L=Legendary

### 9.2 ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«

```
src/features/gathering/data/locations.ts
```

---

## 10. å‹å®šç¾© ğŸ”µ

### 10.1 ã‚¹ãƒ†ãƒ¼ã‚¸å®šæ•°

```typescript
const GatheringStage = {
  LOCATION_SELECT: 'LOCATION_SELECT',   // å ´æ‰€é¸æŠï¼ˆæœ¬ã‚¹ãƒ†ãƒ¼ã‚¸ï¼‰
  LOCATION_DETAIL: 'LOCATION_DETAIL',   // å ´æ‰€è©³ç´°
  DRAFT_SESSION: 'DRAFT_SESSION',       // ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã‚»ãƒƒã‚·ãƒ§ãƒ³
  GATHER_RESULT: 'GATHER_RESULT',       // æ¡å–çµæœ
} as const;
```

### 10.2 å ´æ‰€ãƒ‡ãƒ¼ã‚¿å‹

```typescript
// ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ï¼‰
interface IGatheringLocationData {
  readonly cardId: CardId;
  readonly name: string;
  readonly movementAPCost: number;
  readonly availableMaterials: readonly IMaterialPreview[];
  readonly mapX: number;
  readonly mapY: number;
}

// UIè¡¨ç¤ºç”¨ï¼ˆæ‰‹æœ­é€£å‹•ãƒ•ãƒ©ã‚°ä»˜ãï¼‰
interface IGatheringLocation extends IGatheringLocationData {
  readonly isSelectable: boolean;
}

// å ´æ‰€é¸æŠçµæœ
interface ILocationSelectResult {
  readonly cardId: CardId;
  readonly locationName: string;
  readonly movementAPCost: number;
}
```

---

## 11. ã‚¤ãƒ™ãƒ³ãƒˆ ğŸ”µ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒˆãƒªã‚¬ãƒ¼ | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ | ä¿¡é ¼æ€§ |
|-----------|---------|-----------|--------|
| `LOCATION_SELECTED` | å ´æ‰€ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ | `ILocationSelectResult` | ğŸ”µ |
| `GATHERING_STAGE_CHANGED` | ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»æ™‚ | `{ from: GatheringStage, to: GatheringStage }` | ğŸŸ¡ |

---

## 12. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ğŸŸ¡

| ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ | åŸå›  | å¯¾å‡¦ | ä¿¡é ¼æ€§ |
|------------|------|------|--------|
| å ´æ‰€ãƒ‡ãƒ¼ã‚¿0ä»¶ | ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿æœªèª­ã¿è¾¼ã¿ | ãƒãƒƒãƒ—ã‚’ç©ºã§è¡¨ç¤º | ğŸŸ¡ |
| å…¨å ´æ‰€ãŒé¸æŠä¸å¯ | æ‰‹æœ­ã«æ¡å–åœ°ã‚«ãƒ¼ãƒ‰0æš | ç©ºæ‰‹æœ­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | ğŸ”µ |
| åº§æ¨™ç¯„å›²ãŒåŒä¸€ | å…¨å ´æ‰€ãŒåŒã˜mapX/mapYã®å ´åˆ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç¯„å›²ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | ğŸ”µ |

---

## 13. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…® ğŸŸ¡

| é …ç›® | å¯¾ç­– | ä¿¡é ¼æ€§ |
|------|------|--------|
| ãƒãƒ¼ãƒ‰å†ç”Ÿæˆ | `clearLocationNodes()`ã§æ—¢å­˜ãƒãƒ¼ãƒ‰ã‚’ç ´æ£„å¾Œã€æ–°è¦ç”Ÿæˆ | ğŸ”µ |
| ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ | ãƒãƒ¼ãƒ‰ç ´æ£„æ™‚ã«pointerover/pointerout/pointerdownã‚’æ˜ç¤ºçš„ã«off | ğŸ”µ |
| åº§æ¨™è¨ˆç®— | ç´”ç²‹é–¢æ•°ã§æ¯å›è¨ˆç®—ï¼ˆå ´æ‰€æ•°â‰¤5ã®ãŸã‚ååˆ†é«˜é€Ÿï¼‰ | ğŸ”µ |

---

## é–¢é€£æ–‡æ›¸

- **æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ï¼‰**: [gathering.md](./gathering.md)
- **ãƒ¡ã‚¤ãƒ³ç”»é¢æ¦‚è¦**: [main.md](./main.md)
- **å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: [common-components.md](./common-components.md)
- **ãƒ•ã‚§ãƒ¼ã‚ºè‡ªç”±é·ç§»è¦ä»¶å®šç¾©æ›¸**: [../../../spec/free-phase-navigation/requirements.md](../../../spec/free-phase-navigation/requirements.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-02-23 | 1.0.0 | åˆç‰ˆä½œæˆï¼ˆIssue #306: æ¡å–å ´æ‰€é¸æŠã‚¹ãƒ†ãƒ¼ã‚¸è©³ç´°ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜ï¼‰ |
