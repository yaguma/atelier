# ç´å“ãƒ•ã‚§ãƒ¼ã‚º è©³ç´°è¨­è¨ˆ

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-16
**æ›´æ–°æ—¥**: 2026-01-16
**ãƒ•ã‚§ãƒ¼ã‚ºID**: PHASE-004

---

## 1. æ¦‚è¦

### 1.1 åŸºæœ¬æƒ…å ±

| é …ç›® | å€¤ |
|------|-----|
| **ãƒ•ã‚§ãƒ¼ã‚ºå** | ç´å“ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆDelivery Phaseï¼‰ |
| **è¦ªç”»é¢** | ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆSCR-002ï¼‰ |
| **è²¬å‹™** | å®Œæˆå“ã‚’ä¾é ¼è€…ã«ç´å“ã—ã€å ±é…¬ï¼ˆè²¢çŒ®åº¦ãƒ»ãŠé‡‘ãƒ»å ±é…¬ã‚«ãƒ¼ãƒ‰ï¼‰ã‚’ç²å¾— |
| **å‰ãƒ•ã‚§ãƒ¼ã‚º** | èª¿åˆãƒ•ã‚§ãƒ¼ã‚º |
| **æ¬¡ãƒ•ã‚§ãƒ¼ã‚º** | æ—¥çµ‚äº†å‡¦ç† â†’ æ¬¡ã®æ—¥ / ã‚²ãƒ¼ãƒ çµ‚äº†åˆ¤å®š |

### 1.2 ç´å“ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ ğŸ”µ

å—æ³¨ä¸­ã®ä¾é ¼ã«å¯¾ã—ã¦ã€å®Œæˆå“ã‚’ç´å“ã™ã‚‹ã“ã¨ã§è²¢çŒ®åº¦ã¨ãŠé‡‘ã‚’ç²å¾—ã™ã‚‹ã€‚ç´å“æˆåŠŸæ™‚ã«ã¯å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚’3æšã‹ã‚‰1æšé¸æŠã§ãã‚‹ï¼ˆé¸ã°ãªã„ã“ã¨ã‚‚å¯èƒ½ï¼‰ã€‚å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§è²¢çŒ®åº¦ãƒœãƒ¼ãƒŠã‚¹ã‚’å¾—ã‚‰ã‚Œã‚‹ã€‚

### 1.3 ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«

- ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã«ãªã„æ¨æ¸¬

---

## 2. ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  ğŸ”µ

### 2.1 ç´å“å¯èƒ½ä¾é ¼ä¸€è¦§ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç´å“ãƒ•ã‚§ãƒ¼ã‚º                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   ç´å“å¯èƒ½ãªä¾é ¼:                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ â—‹ ã€Œå›å¾©è–¬ãŒæ¬²ã—ã„ã€ - æ‘äºº                       â”‚   â”‚
â”‚   â”‚    è¦æ±‚: å›å¾©è–¬                                   â”‚   â”‚
â”‚   â”‚    å ±é…¬: è²¢çŒ®åº¦20 + 40G                          â”‚   â”‚
â”‚   â”‚    æœŸé™: ã‚ã¨3æ—¥                                  â”‚   â”‚
â”‚   â”‚    ç´å“å¯èƒ½: âœ“                                    â”‚   â”‚
â”‚   â”‚                          [ç´å“ã™ã‚‹]              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ â—‹ ã€Œè–¬ã‚’3ã¤ã»ã—ã„ã€ - å†’é™ºè€…                     â”‚   â”‚
â”‚   â”‚    è¦æ±‚: è–¬ã‚«ãƒ†ã‚´ãƒª Ã—3                           â”‚   â”‚
â”‚   â”‚    å ±é…¬: è²¢çŒ®åº¦35 + 60G                          â”‚   â”‚
â”‚   â”‚    æœŸé™: ã‚ã¨5æ—¥                                  â”‚   â”‚
â”‚   â”‚    ç´å“å¯èƒ½: 2/3                                  â”‚   â”‚
â”‚   â”‚                          [ç´å“ã™ã‚‹]ï¼ˆéæ´»æ€§ï¼‰    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [æ—¥ã‚’çµ‚äº†ã™ã‚‹]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚¢ã‚¤ãƒ†ãƒ é¸æŠãƒ»ç´å“ç¢ºèªç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ã€Œå›å¾©è–¬ãŒæ¬²ã—ã„ã€ - æ‘äºº                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   ç´å“ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ :                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                   â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚   â”‚  â”‚ ğŸ’Š      â”‚  â”‚ ğŸ’Š      â”‚  â”‚         â”‚          â”‚   â”‚
â”‚   â”‚  â”‚ å›å¾©è–¬  â”‚  â”‚ å›å¾©è–¬  â”‚  â”‚ (ç©ºã)  â”‚          â”‚   â”‚
â”‚   â”‚  â”‚ (C)     â”‚  â”‚ (B)[é¸æŠä¸­]â”‚        â”‚          â”‚   â”‚
â”‚   â”‚  â”‚ [é¸æŠ]  â”‚  â”‚ [é¸æŠ]  â”‚  â”‚         â”‚          â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚   â”‚                                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ è²¢çŒ®åº¦è¨ˆç®—ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:                             â”‚   â”‚
â”‚   â”‚   åŸºæœ¬å ±é…¬: 20                                    â”‚   â”‚
â”‚   â”‚   å“è³ªãƒœãƒ¼ãƒŠã‚¹(B): +4 (+20%)                      â”‚   â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚   â”‚
â”‚   â”‚   åˆè¨ˆ: 24 è²¢çŒ®åº¦                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚   å¼·åŒ–ã‚«ãƒ¼ãƒ‰ä½¿ç”¨:                                         â”‚
â”‚   [ ] ã‚®ãƒ«ãƒ‰æ¨è–¦çŠ¶ï¼ˆè²¢çŒ®åº¦+30%ï¼‰                         â”‚
â”‚                                                           â”‚
â”‚              [ç´å“ã™ã‚‹]    [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   ç´å“æˆåŠŸï¼è²¢çŒ®åº¦ +24 / 40G ç²å¾—                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â˜…ã‚³ãƒ¢ãƒ³     â”‚ â”‚ â˜…â˜…ã‚¢ãƒ³ã‚³   â”‚ â”‚ â˜…ã‚³ãƒ¢ãƒ³     â”‚        â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚        â”‚
â”‚  â”‚  è¿‘ãã®æ£®+   â”‚ â”‚  ç²¾éœŠã®å°ã  â”‚ â”‚  è§£æ¯’å‰¤      â”‚        â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚        â”‚
â”‚  â”‚ æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ â”‚ â”‚ å¼·åŒ–ã‚«ãƒ¼ãƒ‰   â”‚ â”‚ ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ â”‚        â”‚
â”‚  â”‚ ç²å¾—ç´ æ+1   â”‚ â”‚ æ¡å–æ™‚ç´ æ+1 â”‚ â”‚ æ¯’æ¶ˆã—ä½œæˆ   â”‚        â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚        â”‚
â”‚  â”‚   [é¸æŠ]     â”‚ â”‚   [é¸æŠ]     â”‚ â”‚   [é¸æŠ]     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚                     [é¸ã°ãªã„]                              â”‚
â”‚                 ï¼ˆãƒ‡ãƒƒã‚­åœ§ç¸®æˆ¦ç•¥ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ç´å“å®Œäº†ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç´å“å®Œäº†ï¼                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   ä¾é ¼: ã€Œå›å¾©è–¬ãŒæ¬²ã—ã„ã€                                â”‚
â”‚   ä¾é ¼è€…: æ‘äºº                                            â”‚
â”‚                                                           â”‚
â”‚   ç²å¾—å ±é…¬:                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  ğŸ’« è²¢çŒ®åº¦: +24                                 â”‚     â”‚
â”‚   â”‚  ğŸ’° ãŠé‡‘: +40G                                  â”‚     â”‚
â”‚   â”‚  ğŸƒ ã‚«ãƒ¼ãƒ‰: ç²¾éœŠã®å°ãï¼ˆå¼·åŒ–ï¼‰                  â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                           â”‚
â”‚   æ˜‡æ ¼ã‚²ãƒ¼ã‚¸: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 59/100 (+24)              â”‚
â”‚                                                           â”‚
â”‚                       [OK]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´° ğŸ”µ

### 3.1 ç´å“å¯èƒ½ä¾é ¼ãƒªã‚¹ãƒˆ (`deliverable-quests`)

#### ãƒªã‚¹ãƒˆæ§‹æˆ

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **é…ç½®** | å‚ç›´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªã‚¹ãƒˆ | ğŸŸ¡ |
| **ã‚¢ã‚¤ãƒ†ãƒ é«˜ã•** | 120px | ğŸŸ¡ |
| **æœ€å¤§è¡¨ç¤ºä»¶æ•°** | 4ä»¶ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ï¼‰ | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #FFFFFF | ğŸŸ¡ |

#### ä¾é ¼ã‚¢ã‚¤ãƒ†ãƒ  (`quest-item`)

```typescript
interface DeliverableQuestItemProps {
  questId: string;
  clientName: string;
  clientType: ClientType;
  questDescription: string;
  requiredItem: string;       // è¦æ±‚ã‚¢ã‚¤ãƒ†ãƒ /ã‚«ãƒ†ã‚´ãƒª/ã‚¿ã‚°
  requiredCount: number;      // å¿…è¦æ•°
  deliverableCount: number;   // ç´å“å¯èƒ½æ•°
  rewardContribution: number;
  rewardGold: number;
  remainingDays: number;
  canDeliver: boolean;        // ç´å“å¯èƒ½ã‹
}
```

#### ä¾é ¼ã‚¢ã‚¤ãƒ†ãƒ çŠ¶æ…‹

| çŠ¶æ…‹ | è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ« | ä¿¡é ¼æ€§ |
|------|-------------|--------|
| ç´å“å¯èƒ½ | æ ç·š: #4CAF50ã€âœ“ã‚¢ã‚¤ã‚³ãƒ³ | ğŸŸ¡ |
| ä¸€éƒ¨ç´å“å¯èƒ½ | æ ç·š: #FFC107ã€æ•°é‡è¡¨ç¤º | ğŸŸ¡ |
| ç´å“ä¸å¯ | æ ç·š: #E0E0E0ã€ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ | ğŸŸ¡ |
| æœŸé™é–“è¿‘ï¼ˆ3æ—¥ä»¥å†…ï¼‰ | æœŸé™ãƒ†ã‚­ã‚¹ãƒˆèµ¤è‰²ã€âš ã‚¢ã‚¤ã‚³ãƒ³ | ğŸŸ¡ |

#### rexUIå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸŸ¡

```typescript
// ScrollablePanelã‚’ä½¿ç”¨ã—ãŸä¾é ¼ãƒªã‚¹ãƒˆ
const questListPanel = this.rexUI.add.scrollablePanel({
  x: centerX,
  y: centerY,
  width: 600,
  height: 400,

  scrollMode: 'y',

  panel: {
    child: this.createQuestListContent(quests),
    mask: { padding: 1 },
  },

  slider: {
    track: this.rexUI.add.roundRectangle(0, 0, 10, 10, 5, 0xCCCCCC),
    thumb: this.rexUI.add.roundRectangle(0, 0, 10, 30, 5, 0x888888),
  },

  space: {
    left: 10,
    right: 10,
    top: 10,
    bottom: 10,
    panel: 10,
  }
});
```

### 3.2 ã‚¢ã‚¤ãƒ†ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ (`item-selector`)

#### ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æ§‹æˆ

```
ç´å“ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’Š(C)   â”‚  â”‚ ğŸ’Š(B)   â”‚  â”‚ (ç©ºã)  â”‚
â”‚ [é¸æŠ]  â”‚  â”‚ [é¸æŠä¸­]â”‚  â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **é…ç½®** | æ°´å¹³æ–¹å‘ã€æŠ˜ã‚Šè¿”ã—å¯èƒ½ | ğŸŸ¡ |
| **ã‚«ãƒ¼ãƒ‰ã‚µã‚¤ã‚º** | 80x100px | ğŸŸ¡ |
| **ã‚«ãƒ¼ãƒ‰é–“éš”** | 16px | ğŸŸ¡ |
| **æœ€å¤§è¡¨ç¤ºæ•°** | 8å€‹ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ï¼‰ | ğŸŸ¡ |

#### ã‚¢ã‚¤ãƒ†ãƒ ã‚«ãƒ¼ãƒ‰çŠ¶æ…‹

| çŠ¶æ…‹ | è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ« | ä¿¡é ¼æ€§ |
|------|-------------|--------|
| é¸æŠå¯èƒ½ | æ ç·š: #E0E0E0ã€èƒŒæ™¯: #FFFFFF | ğŸŸ¡ |
| é¸æŠä¸­ | æ ç·š: #2196F3ï¼ˆå¤ªã•3pxï¼‰ã€èƒŒæ™¯: #E3F2FD | ğŸŸ¡ |
| ãƒ›ãƒãƒ¼ | èƒŒæ™¯: #F5F5F5ã€shadow | ğŸŸ¡ |
| é«˜å“è³ªï¼ˆAä»¥ä¸Šï¼‰ | æ ç·šã«ã‚°ãƒ­ãƒ¼åŠ¹æœ | ğŸŸ¡ |

### 3.3 è²¢çŒ®åº¦è¨ˆç®—ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ (`contribution-preview`)

#### è²¢çŒ®åº¦è¨ˆç®—ãƒ«ãƒ¼ãƒ« ğŸ”µ

```typescript
// è²¢çŒ®åº¦è¨ˆç®—å¼
final_contribution = base_reward
  Ã— quality_modifier      // å“è³ªå€ç‡
  Ã— type_modifier        // ã‚¿ã‚¤ãƒ—ä¸€è‡´å€ç‡
  Ã— combo_modifier       // ã‚³ãƒ³ãƒœå€ç‡
  Ã— client_modifier      // ä¾é ¼è€…å€ç‡
  + enhancement_bonus    // å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒœãƒ¼ãƒŠã‚¹
```

#### å“è³ªå€ç‡ãƒ†ãƒ¼ãƒ–ãƒ« ğŸ”µ

| å“è³ª | å€ç‡ | è¡¨ç¤º |
|------|------|------|
| C | 1.0 | ï¼ˆè¡¨ç¤ºãªã—ï¼‰ |
| B | 1.2 | +20% |
| A | 1.5 | +50% |
| S | 2.0 | +100% |

#### ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **å¹…** | 400px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #E8F5E9 | ğŸŸ¡ |
| **æ ç·š** | 2px solid #4CAF50 | ğŸŸ¡ |

```typescript
interface ContributionPreviewProps {
  baseReward: number;
  qualityModifier: number;
  qualityBonus: number;
  typeModifier?: number;
  typeBonus?: number;
  comboModifier?: number;
  comboBonus?: number;
  clientModifier?: number;
  clientBonus?: number;
  enhancementBonus: number;
  totalContribution: number;
}
```

### 3.4 å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚° (`reward-card-dialog`)

#### ãƒ€ã‚¤ã‚¢ãƒ­ã‚°æ§‹æˆ

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **å¹…** | 700px | ğŸŸ¡ |
| **é«˜ã•** | 500px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #FFF8E1 | ğŸŸ¡ |
| **æ ç·š** | 3px solid #FFD54F | ğŸŸ¡ |

#### å ±é…¬ã‚«ãƒ¼ãƒ‰ (`reward-card`)

```typescript
interface RewardCardProps {
  cardId: string;
  name: string;
  rarity: 'common' | 'uncommon' | 'rare';
  cardType: 'gathering' | 'recipe' | 'enhancement';
  description: string;
  effectDescription: string;
}
```

#### ãƒ¬ã‚¢ãƒªãƒ†ã‚£è¡¨ç¤º

| ãƒ¬ã‚¢ãƒªãƒ†ã‚£ | æ˜Ÿè¡¨ç¤º | æ ç·šè‰² | èƒŒæ™¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ |
|-----------|--------|--------|---------------|
| ã‚³ãƒ¢ãƒ³ | â˜… | #9E9E9E | ãªã— |
| ã‚¢ãƒ³ã‚³ãƒ¢ãƒ³ | â˜…â˜… | #4CAF50 | è»½ã„ã‚°ãƒ­ãƒ¼ |
| ãƒ¬ã‚¢ | â˜…â˜…â˜… | #FFD700 | ã‚­ãƒ©ã‚­ãƒ© |

### 3.5 å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹

èª¿åˆãƒ•ã‚§ãƒ¼ã‚ºã¨åŒæ§˜ã®æ§‹æˆã€‚ç´å“æ™‚ã«ä½¿ç”¨ã§ãã‚‹å¼·åŒ–ã‚«ãƒ¼ãƒ‰ï¼ˆã‚®ãƒ«ãƒ‰æ¨è–¦çŠ¶ãªã©ï¼‰ã‚’è¡¨ç¤ºã€‚

```typescript
interface DeliveryEnhancementProps {
  cardId: string;
  cardName: string;
  effectDescription: string; // ä¾‹: ã€Œè²¢çŒ®åº¦+30%ã€
  contributionBonus: number; // ãƒœãƒ¼ãƒŠã‚¹å€¤
  isChecked: boolean;
  isDisabled: boolean;
}
```

### 3.6 ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ç¾¤

#### ç´å“ãƒœã‚¿ãƒ³ (`btn-deliver`)

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ç¨®é¡** | ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ | ğŸ”µ |
| **å¹…** | 140px | ğŸŸ¡ |
| **é«˜ã•** | 48px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²ï¼ˆæœ‰åŠ¹æ™‚ï¼‰** | #4CAF50 | ğŸŸ¡ |
| **èƒŒæ™¯è‰²ï¼ˆç„¡åŠ¹æ™‚ï¼‰** | #BDBDBD | ğŸŸ¡ |
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œç´å“ã™ã‚‹ã€| ğŸ”µ |

#### æ—¥çµ‚äº†ãƒœã‚¿ãƒ³ (`btn-end-day`)

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å€¤ | ä¿¡é ¼æ€§ |
|-----------|-----|--------|
| **ç¨®é¡** | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ | ğŸ”µ |
| **å¹…** | 200px | ğŸŸ¡ |
| **é«˜ã•** | 48px | ğŸŸ¡ |
| **èƒŒæ™¯è‰²** | #9C27B0 | ğŸŸ¡ |
| **ãƒ†ã‚­ã‚¹ãƒˆ** | ã€Œæ—¥ã‚’çµ‚äº†ã™ã‚‹ã€| ğŸ”µ |
| **é…ç½®** | ç”»é¢ä¸‹éƒ¨ä¸­å¤® | ğŸŸ¡ |

---

## 4. çŠ¶æ…‹é·ç§» ğŸ”µ

### 4.1 çŠ¶æ…‹é·ç§»å›³

```mermaid
stateDiagram-v2
    [*] --> DeliverableList: ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹

    DeliverableList --> QuestSelected: ä¾é ¼é¸æŠ

    QuestSelected --> ItemSelect: ç´å“ãƒœã‚¿ãƒ³æŠ¼ä¸‹

    state ItemSelect {
        [*] --> Browsing
        Browsing --> ItemHover: ã‚¢ã‚¤ãƒ†ãƒ ãƒ›ãƒãƒ¼
        ItemHover --> Browsing: ãƒ›ãƒãƒ¼è§£é™¤
        Browsing --> Selected: ã‚¢ã‚¤ãƒ†ãƒ ã‚¯ãƒªãƒƒã‚¯
        Selected --> Browsing: åˆ¥ã‚¢ã‚¤ãƒ†ãƒ ã‚¯ãƒªãƒƒã‚¯
    }

    ItemSelect --> ContributionPreview: ã‚¢ã‚¤ãƒ†ãƒ é¸æŠå®Œäº†
    ItemSelect --> DeliverableList: ã‚­ãƒ£ãƒ³ã‚»ãƒ«

    ContributionPreview --> EnhancementToggle: å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒˆã‚°ãƒ«
    EnhancementToggle --> ContributionPreview: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°

    ContributionPreview --> Delivering: ç´å“å®Ÿè¡Œ

    Delivering --> DeliverAnimation: ç´å“å‡¦ç†é–‹å§‹
    DeliverAnimation --> RewardCardSelect: ç´å“æˆåŠŸ

    state RewardCardSelect {
        [*] --> CardBrowsing
        CardBrowsing --> CardHover: ã‚«ãƒ¼ãƒ‰ãƒ›ãƒãƒ¼
        CardHover --> CardBrowsing: ãƒ›ãƒãƒ¼è§£é™¤
        CardBrowsing --> CardSelected: ã‚«ãƒ¼ãƒ‰é¸æŠ
        CardSelected --> [*]: æ±ºå®š
        CardBrowsing --> [*]: é¸ã°ãªã„
    }

    RewardCardSelect --> DeliverResult: ã‚«ãƒ¼ãƒ‰é¸æŠå®Œäº†
    DeliverResult --> DeliverableList: OKæŠ¼ä¸‹

    DeliverableList --> DayEnd: æ—¥çµ‚äº†ãƒœã‚¿ãƒ³

    DayEnd --> [*]: æ—¥çµ‚äº†å‡¦ç†ã¸
```

### 4.2 çŠ¶æ…‹å®šç¾©

| çŠ¶æ…‹ | èª¬æ˜ | UIè¡¨ç¤º |
|------|------|--------|
| `DeliverableList` | ç´å“å¯èƒ½ä¾é ¼ä¸€è¦§è¡¨ç¤º | ä¾é ¼ãƒªã‚¹ãƒˆã€æ—¥çµ‚äº†ãƒœã‚¿ãƒ³ |
| `QuestSelected` | ä¾é ¼é¸æŠæ¸ˆã¿ | é¸æŠä¾é ¼ãƒã‚¤ãƒ©ã‚¤ãƒˆ |
| `ItemSelect` | ã‚¢ã‚¤ãƒ†ãƒ é¸æŠä¸­ | ã‚¢ã‚¤ãƒ†ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼è¡¨ç¤º |
| `ContributionPreview` | è²¢çŒ®åº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºä¸­ | è¨ˆç®—çµæœè¡¨ç¤ºã€ç´å“ãƒœã‚¿ãƒ³æœ‰åŠ¹ |
| `EnhancementToggle` | å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒˆã‚°ãƒ«ä¸­ | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å†è¨ˆç®— |
| `Delivering` | ç´å“å‡¦ç†å®Ÿè¡Œä¸­ | ãƒœã‚¿ãƒ³éæ´»æ€§ã€å‡¦ç†ä¸­è¡¨ç¤º |
| `DeliverAnimation` | ç´å“æ¼”å‡ºå†ç”Ÿä¸­ | æˆåŠŸæ¼”å‡º |
| `RewardCardSelect` | å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠä¸­ | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |
| `DeliverResult` | ç´å“çµæœè¡¨ç¤ºä¸­ | çµæœãƒ‘ãƒãƒ«è¡¨ç¤º |
| `DayEnd` | æ—¥çµ‚äº†å‡¦ç†ä¸­ | æ—¥çµ‚äº†æ¼”å‡º |

---

## 5. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´° ğŸ”µ

### 5.1 å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒˆãƒªã‚¬ãƒ¼ | å‡¦ç†å†…å®¹ | ä¿¡é ¼æ€§ |
|-----------|----------|----------|--------|
| `OnQuestSelected` | ä¾é ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚¯ãƒªãƒƒã‚¯ | ä¾é ¼é¸æŠã€è©³ç´°è¡¨ç¤º | ğŸ”µ |
| `OnDeliverButtonClicked` | ç´å“ã™ã‚‹ãƒœã‚¿ãƒ³ | ã‚¢ã‚¤ãƒ†ãƒ é¸æŠã¸é·ç§» | ğŸ”µ |
| `OnItemSelected` | ã‚¢ã‚¤ãƒ†ãƒ ã‚¯ãƒªãƒƒã‚¯ | ã‚¢ã‚¤ãƒ†ãƒ é¸æŠã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° | ğŸ”µ |
| `OnEnhancementToggled` | å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° | ğŸ”µ |
| `OnDeliverConfirmed` | ç´å“ã™ã‚‹ãƒœã‚¿ãƒ³ï¼ˆç¢ºèªå¾Œï¼‰ | ç´å“å‡¦ç†å®Ÿè¡Œ | ğŸ”µ |
| `OnRewardCardSelected` | å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ | ã‚«ãƒ¼ãƒ‰é¸æŠç¢ºå®š | ğŸ”µ |
| `OnSkipReward` | ã€Œé¸ã°ãªã„ã€ã‚¯ãƒªãƒƒã‚¯ | ã‚«ãƒ¼ãƒ‰ãªã—ã§å®Œäº† | ğŸ”µ |
| `OnEndDayClicked` | æ—¥çµ‚äº†ãƒœã‚¿ãƒ³ | æ—¥çµ‚äº†å‡¦ç†é–‹å§‹ | ğŸ”µ |

### 5.2 ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆEventBusï¼‰

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ä¿¡é ¼æ€§ |
|-----------|-----------|---------------|--------|
| `QUEST_SELECTED_FOR_DELIVERY` | `{ questId }` | ä¾é ¼é¸æŠæ™‚ | ğŸŸ¡ |
| `ITEM_SELECTED_FOR_DELIVERY` | `{ questId, itemId }` | ã‚¢ã‚¤ãƒ†ãƒ é¸æŠæ™‚ | ğŸŸ¡ |
| `CONTRIBUTION_PREVIEW_UPDATED` | `{ questId, preview }` | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°æ™‚ | ğŸŸ¡ |
| `DELIVERY_STARTED` | `{ questId, itemId, enhancements }` | ç´å“é–‹å§‹æ™‚ | ğŸ”µ |
| `DELIVERY_COMPLETED` | `{ questId, contribution, gold, cardId? }` | ç´å“å®Œäº†æ™‚ | ğŸ”µ |
| `REWARD_CARD_SELECTED` | `{ cardId }` | å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠæ™‚ | ğŸ”µ |
| `REWARD_CARD_SKIPPED` | `{}` | å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚¹ã‚­ãƒƒãƒ—æ™‚ | ğŸ”µ |
| `DAY_END_REQUESTED` | `{}` | æ—¥çµ‚äº†ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ | ğŸ”µ |
| `PROMOTION_GAUGE_UPDATED` | `{ current, max, added }` | æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æ›´æ–°æ™‚ | ğŸ”µ |

### 5.3 è²¢çŒ®åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ ğŸ”µ

```typescript
// QuestJudgmentService.ts
export class QuestJudgmentService {
  /**
   * ç´å“æ™‚ã®è²¢çŒ®åº¦ã‚’è¨ˆç®—
   */
  calculateContribution(
    quest: Quest,
    item: Item,
    client: Client,
    enhancements: EnhancementCard[]
  ): ContributionResult {
    let contribution = quest.rewardContribution;

    // å“è³ªå€ç‡
    const qualityModifier = this.getQualityModifier(item.quality);
    contribution *= qualityModifier;

    // ã‚¿ã‚¤ãƒ—ä¸€è‡´å€ç‡ï¼ˆå€‹åˆ¥æŒ‡å®šã®å ´åˆã®ã¿ï¼‰
    if (quest.type === 'specific' && item.id === quest.targetId) {
      contribution *= 1.0; // å®Œå…¨ä¸€è‡´ã¯è¿½åŠ ãƒœãƒ¼ãƒŠã‚¹ãªã—
    }

    // ã‚³ãƒ³ãƒœå€ç‡ï¼ˆåŒã˜ä¾é ¼è€…ã¸ã®é€£ç¶šç´å“ï¼‰
    const comboCount = this.getComboCount(client.id);
    if (comboCount > 1) {
      contribution *= 1 + (comboCount - 1) * 0.1; // é€£ç¶šã”ã¨ã«+10%
    }

    // ä¾é ¼è€…å€ç‡
    const clientModifier = this.getClientModifier(client.type);
    contribution *= clientModifier;

    // å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒœãƒ¼ãƒŠã‚¹
    for (const enhancement of enhancements) {
      if (enhancement.effectType === 'contribution_up') {
        contribution *= 1 + enhancement.value / 100;
      }
    }

    return {
      base: quest.rewardContribution,
      qualityBonus: Math.floor(quest.rewardContribution * (qualityModifier - 1)),
      total: Math.floor(contribution),
    };
  }

  private getQualityModifier(quality: Quality): number {
    const modifiers = { C: 1.0, B: 1.2, A: 1.5, S: 2.0 };
    return modifiers[quality];
  }

  private getClientModifier(clientType: ClientType): number {
    // ä¾é ¼è€…ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹å€ç‡
    const modifiers = {
      villager: 1.0,
      adventurer: 1.1,
      merchant: 1.15,
      noble: 1.3,
    };
    return modifiers[clientType] || 1.0;
  }
}
```

### 5.4 ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å®Ÿè£… ğŸŸ¡

```typescript
// DeliveryContainer.ts
export class DeliveryContainer extends BasePhaseContainer {
  private selectedQuest: Quest | null = null;
  private selectedItem: Item | null = null;
  private activeEnhancements: Set<string> = new Set();

  private async handleDelivery(): Promise<void> {
    if (!this.selectedQuest || !this.selectedItem) return;

    this.setState('Delivering');

    const enhancements = Array.from(this.activeEnhancements)
      .map(id => this.getEnhancementCard(id));

    this.eventBus.emit('DELIVERY_STARTED', {
      questId: this.selectedQuest.id,
      itemId: this.selectedItem.id,
      enhancements: enhancements.map(e => e.id),
    });

    // ç´å“å®Ÿè¡Œ
    const result = await this.deliverItemUseCase.execute({
      questId: this.selectedQuest.id,
      itemId: this.selectedItem.id,
      enhancementIds: enhancements.map(e => e.id),
    });

    if (result.success) {
      // ç´å“æˆåŠŸæ¼”å‡º
      await this.playDeliverySuccessAnimation(result);

      // å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
      const selectedCardId = await this.showRewardCardDialog(result.rewardCards);

      this.eventBus.emit('DELIVERY_COMPLETED', {
        questId: this.selectedQuest.id,
        contribution: result.contribution,
        gold: result.gold,
        cardId: selectedCardId,
      });

      // çµæœè¡¨ç¤º
      await this.showDeliveryResult(result, selectedCardId);

      // æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æ›´æ–°
      this.eventBus.emit('PROMOTION_GAUGE_UPDATED', {
        current: result.newPromotionGauge,
        max: result.promotionGaugeMax,
        added: result.contribution,
      });
    }

    this.setState('DeliverableList');
  }

  private async showRewardCardDialog(cards: RewardCard[]): Promise<string | null> {
    return new Promise((resolve) => {
      const dialog = new RewardCardSelectDialog(this.scene, cards);

      dialog.on('card-selected', (cardId: string) => {
        this.eventBus.emit('REWARD_CARD_SELECTED', { cardId });
        dialog.close();
        resolve(cardId);
      });

      dialog.on('skip', () => {
        this.eventBus.emit('REWARD_CARD_SKIPPED', {});
        dialog.close();
        resolve(null);
      });

      dialog.show();
    });
  }
}
```

---

## 6. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è©³ç´° ğŸŸ¡

### 6.1 ã‚¢ã‚¤ãƒ†ãƒ é¸æŠã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | é–‹å§‹å€¤ | çµ‚äº†å€¤ | æ™‚é–“ | ã‚¤ãƒ¼ã‚¸ãƒ³ã‚° |
|-----------|-------|-------|------|-----------|
| scale | 1.0 | 1.05 | 150ms | Quad.Out |
| y | 0 | -8 | 150ms | Quad.Out |
| borderGlow | 0 | 1 | 150ms | Linear |

### 6.2 ç´å“æˆåŠŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
private async playDeliverySuccessAnimation(result: DeliveryResult): Promise<void> {
  // 1. ã‚¢ã‚¤ãƒ†ãƒ ãŒä¾é ¼è€…ã«å‘ã‹ã£ã¦é£›ã‚“ã§ã„ã
  const itemSprite = this.createItemSprite(this.selectedItem);
  const targetPos = this.getClientPosition(this.selectedQuest.clientId);

  await this.tweens.add({
    targets: itemSprite,
    x: targetPos.x,
    y: targetPos.y,
    scale: 0.5,
    alpha: 0,
    duration: 500,
    ease: 'Quad.In',
  }).toPromise();

  // 2. æˆåŠŸã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  const successEffect = this.scene.add.sprite(targetPos.x, targetPos.y, 'success-burst');
  await this.tweens.add({
    targets: successEffect,
    scale: { from: 0, to: 1.5 },
    alpha: { from: 1, to: 0 },
    duration: 400,
    ease: 'Quad.Out',
  }).toPromise();

  // 3. è²¢çŒ®åº¦ç²å¾—è¡¨ç¤º
  const contributionText = this.scene.add.text(
    targetPos.x,
    targetPos.y - 50,
    `+${result.contribution}`,
    { fontSize: '32px', color: '#FFD700', fontStyle: 'bold' }
  );

  await this.tweens.add({
    targets: contributionText,
    y: targetPos.y - 100,
    alpha: { from: 1, to: 0 },
    duration: 800,
    ease: 'Quad.Out',
  }).toPromise();

  // 4. SEå†ç”Ÿ
  this.scene.sound.play('delivery-success', { volume: 0.5 });
}
```

### 6.3 å ±é…¬ã‚«ãƒ¼ãƒ‰ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | é–‹å§‹å€¤ | çµ‚äº†å€¤ | æ™‚é–“ | ã‚¤ãƒ¼ã‚¸ãƒ³ã‚° |
|-----------|-------|-------|------|-----------|
| ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤alpha | 0 | 0.6 | 200ms | Linear |
| ãƒ€ã‚¤ã‚¢ãƒ­ã‚°scale | 0.8 | 1.0 | 300ms | Back.Out |
| ã‚«ãƒ¼ãƒ‰1 | alpha: 0, y: +30 | alpha: 1, y: 0 | 200ms (delay: 100ms) | Quad.Out |
| ã‚«ãƒ¼ãƒ‰2 | alpha: 0, y: +30 | alpha: 1, y: 0 | 200ms (delay: 200ms) | Quad.Out |
| ã‚«ãƒ¼ãƒ‰3 | alpha: 0, y: +30 | alpha: 1, y: 0 | 200ms (delay: 300ms) | Quad.Out |

### 6.4 å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
private async playCardSelectAnimation(selectedCard: RewardCard): Promise<void> {
  const selectedCardView = this.rewardCards.find(c => c.cardId === selectedCard.id);
  const otherCards = this.rewardCards.filter(c => c.cardId !== selectedCard.id);

  // é¸æŠã•ã‚Œãªã‹ã£ãŸã‚«ãƒ¼ãƒ‰ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
  await Promise.all(
    otherCards.map(card =>
      this.tweens.add({
        targets: card,
        alpha: 0,
        scale: 0.9,
        duration: 200,
        ease: 'Quad.In',
      }).toPromise()
    )
  );

  // é¸æŠã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã‚’ä¸­å¤®ã«ç§»å‹•ãƒ»æ‹¡å¤§
  await this.tweens.add({
    targets: selectedCardView,
    x: this.scene.cameras.main.centerX,
    y: this.scene.cameras.main.centerY,
    scale: 1.2,
    duration: 400,
    ease: 'Back.Out',
  }).toPromise();

  // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
  this.playSparkleEffect(selectedCardView.x, selectedCardView.y);

  // SE
  this.scene.sound.play('card-get', { volume: 0.5 });

  await this.delay(500);
}
```

### 6.5 æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æ›´æ–°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
private async playPromotionGaugeAnimation(added: number): Promise<void> {
  const gauge = this.headerUI.promotionGauge;
  const oldValue = gauge.value;
  const newValue = oldValue + added;

  // åŠ ç®—å€¤ã‚’è¡¨ç¤º
  const addText = this.scene.add.text(
    gauge.x + gauge.width,
    gauge.y,
    `+${added}`,
    { fontSize: '16px', color: '#4CAF50', fontStyle: 'bold' }
  );

  // ã‚²ãƒ¼ã‚¸ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  await this.tweens.add({
    targets: gauge,
    value: newValue,
    duration: 500,
    ease: 'Quad.Out',
    onUpdate: () => gauge.updateDisplay(),
  }).toPromise();

  // åŠ ç®—å€¤ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
  await this.tweens.add({
    targets: addText,
    alpha: 0,
    y: gauge.y - 20,
    duration: 300,
  }).toPromise();

  addText.destroy();
}
```

---

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« ğŸ”µ

### 7.1 ç´å“å¯èƒ½ä¾é ¼ãƒ‡ãƒ¼ã‚¿

```typescript
interface DeliverableQuest {
  quest: Quest;
  client: Client;
  deliverableItems: Item[];      // ç´å“å¯èƒ½ãªã‚¢ã‚¤ãƒ†ãƒ 
  requiredCount: number;         // å¿…è¦æ•°
  deliverableCount: number;      // ç´å“å¯èƒ½æ•°
  canDeliver: boolean;           // å…¨æ•°ç´å“å¯èƒ½ã‹
  remainingDays: number;
}
```

### 7.2 ç´å“çµæœãƒ‡ãƒ¼ã‚¿

```typescript
interface DeliveryResult {
  success: boolean;
  questId: string;
  itemId: string;
  contribution: number;          // ç²å¾—è²¢çŒ®åº¦
  gold: number;                  // ç²å¾—ãŠé‡‘
  rewardCards: RewardCard[];     // å ±é…¬ã‚«ãƒ¼ãƒ‰å€™è£œï¼ˆ3æšï¼‰
  newPromotionGauge: number;     // æ–°ã—ã„æ˜‡æ ¼ã‚²ãƒ¼ã‚¸å€¤
  promotionGaugeMax: number;     // æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ä¸Šé™
  questCompleted: boolean;       // ä¾é ¼å®Œäº†ãƒ•ãƒ©ã‚°
}
```

### 7.3 å ±é…¬ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿

```typescript
interface RewardCard {
  id: string;
  name: string;
  rarity: 'common' | 'uncommon' | 'rare';
  cardType: 'gathering' | 'recipe' | 'enhancement';
  description: string;
  effectDescription: string;
  // ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—å›ºæœ‰ãƒ‡ãƒ¼ã‚¿
  gatheringLocation?: string;    // æ¡å–åœ°ã‚«ãƒ¼ãƒ‰ã®å ´åˆ
  recipeId?: string;             // ãƒ¬ã‚·ãƒ”ã‚«ãƒ¼ãƒ‰ã®å ´åˆ
  enhancementEffect?: string;    // å¼·åŒ–ã‚«ãƒ¼ãƒ‰ã®å ´åˆ
}
```

---

## 8. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ ğŸŸ¡

### 8.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

| ã‚­ãƒ¼ | å‹•ä½œ | ä¿¡é ¼æ€§ |
|------|------|--------|
| `â†‘/â†“` | ä¾é ¼ãƒªã‚¹ãƒˆã®é¸æŠç§»å‹• | ğŸŸ¡ |
| `Enter` | é¸æŠä¸­ã®ä¾é ¼ã§ç´å“é–‹å§‹ / ç¢ºå®š | ğŸŸ¡ |
| `1-3` | å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠï¼ˆå·¦ã‹ã‚‰ï¼‰ | ğŸŸ¡ |
| `0/S` | å ±é…¬ã‚«ãƒ¼ãƒ‰ã‚’é¸ã°ãªã„ | ğŸŸ¡ |
| `Escape` | ã‚­ãƒ£ãƒ³ã‚»ãƒ« / ãƒ€ã‚¤ã‚¢ãƒ­ã‚°é–‰ã˜ã‚‹ | ğŸŸ¡ |
| `E` | æ—¥ã‚’çµ‚äº†ã™ã‚‹ | ğŸŸ¡ |

### 8.2 ãƒ•ã‚©ãƒ¼ã‚«ã‚¹é †åº

1. ç´å“å¯èƒ½ä¾é ¼ãƒªã‚¹ãƒˆï¼ˆä¸Šã‹ã‚‰ä¸‹ï¼‰
2. ã‚¢ã‚¤ãƒ†ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼ˆè¡¨ç¤ºæ™‚ï¼‰
3. å¼·åŒ–ã‚«ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
4. ç´å“ãƒœã‚¿ãƒ³
5. ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
6. æ—¥çµ‚äº†ãƒœã‚¿ãƒ³

### 8.3 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

```typescript
// å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠæ™‚ã®èª­ã¿ä¸Šã’
rewardCard.setAccessibility({
  role: 'button',
  label: `${card.name}ã€‚${card.rarity}ã€‚${card.cardType}ã‚«ãƒ¼ãƒ‰ã€‚${card.description}`,
});

// è²¢çŒ®åº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
contributionPreview.setAccessibility({
  role: 'status',
  live: 'polite',
  label: `è²¢çŒ®åº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: åˆè¨ˆ${total}ã€‚åŸºæœ¬${base}ã«å“è³ªãƒœãƒ¼ãƒŠã‚¹${qualityBonus}ã‚’åŠ ç®—`,
});
```

---

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ğŸŸ¡

### 9.1 ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾å‡¦ |
|--------|------|------|
| ã‚¢ã‚¤ãƒ†ãƒ ãªã— | ç´å“å¯¾è±¡ã‚¢ã‚¤ãƒ†ãƒ ãŒãªã„ | ç´å“ãƒœã‚¿ãƒ³éæ´»æ€§ |
| ç´å“å‡¦ç†ã‚¨ãƒ©ãƒ¼ | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ç­‰ | Toastè¡¨ç¤ºã€Œç´å“ã«å¤±æ•—ã—ã¾ã—ãŸã€ |
| å ±é…¬ã‚«ãƒ¼ãƒ‰å–å¾—ã‚¨ãƒ©ãƒ¼ | ã‚«ãƒ¼ãƒ‰ç”Ÿæˆå¤±æ•— | ä»£æ›¿ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º |
| æœŸé™åˆ‡ã‚Œ | ç´å“å‰ã«æœŸé™ãŒéããŸ | ä¾é ¼ã‚’å¤±æ•—çŠ¶æ…‹ã«å¤‰æ›´ |

### 9.2 æœŸé™é–“è¿‘è­¦å‘Š

```typescript
// æœŸé™ãŒ3æ—¥ä»¥å†…ã®å ´åˆã®è¡¨ç¤º
private renderDeadlineWarning(quest: DeliverableQuest): void {
  if (quest.remainingDays <= 3) {
    this.deadlineText.setStyle({ color: '#F44336' });
    this.deadlineText.setText(`æœŸé™: ã‚ã¨${quest.remainingDays}æ—¥ âš `);

    // ç‚¹æ»…ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    this.tweens.add({
      targets: this.deadlineText,
      alpha: { from: 1, to: 0.5 },
      duration: 500,
      yoyo: true,
      repeat: -1,
    });
  }
}
```

---

## 10. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…® ğŸŸ¡

### 10.1 æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | å¯¾ç­– |
|------|------|
| ä¾é ¼ãƒªã‚¹ãƒˆ | ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå¤§é‡ä¾é ¼å¯¾å¿œï¼‰ |
| ã‚¢ã‚¤ãƒ†ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ | é…å»¶èª­ã¿è¾¼ã¿ |
| è²¢çŒ®åº¦è¨ˆç®— | å¤‰æ›´æ™‚ã®ã¿å†è¨ˆç®— |
| å ±é…¬ã‚«ãƒ¼ãƒ‰ãƒ€ã‚¤ã‚¢ãƒ­ã‚° | äº‹å‰ç”Ÿæˆã—ã¦ãƒ—ãƒ¼ãƒ« |

### 10.2 ç›®æ¨™ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| æŒ‡æ¨™ | ç›®æ¨™å€¤ |
|------|--------|
| è²¢çŒ®åº¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° | < 50ms |
| ç´å“å‡¦ç†å®Œäº† | < 500ms |
| å ±é…¬ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º | < 200ms |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | < 12MBï¼ˆãƒ•ã‚§ãƒ¼ã‚ºå˜ä½“ï¼‰ |

---

## é–¢é€£æ–‡æ›¸

- **ãƒ¡ã‚¤ãƒ³ç”»é¢æ¦‚è¦**: [main.md](./main.md)
- **å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: [common-components.md](./common-components.md)
- **ã‚²ãƒ¼ãƒ ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹ï¼ˆç´å“ãƒ»è²¢çŒ®åº¦ï¼‰**: [../../game-mechanics.md](../../game-mechanics.md)
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ**: [../../dataflow.md](../../dataflow.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-16 | 1.0.0 | main.mdã‹ã‚‰åˆ†å‰²ã€è©³ç´°åŒ– |
