# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ï¼ˆPhaserç‰ˆï¼‰

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-07
**å¯¾è±¡**: ã‚¢ãƒˆãƒªã‚¨éŒ¬é‡‘è¡“ã‚²ãƒ¼ãƒ ï¼ˆã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ï¼‰Phaserç‰ˆ

---

## æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€æ—¢å­˜ã®HTMLç‰ˆã‚’Phaserãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦UIå‘¨ã‚Šã‚’åˆ·æ–°ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

> æ—¢å­˜ã®Clean Architectureï¼ˆDomain/Application/Infrastructureå±¤ï¼‰ã‚’ç¶­æŒã—ãªãŒã‚‰ã€
> Presentationå±¤ã‚’Phaserãƒ™ãƒ¼ã‚¹ã«ç½®ãæ›ãˆã€ã‚²ãƒ¼ãƒ ã‚‰ã—ã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¡¨ç¾ã¨
> ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã€‚

### ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«å‡¡ä¾‹

- ğŸ”µ **é’ä¿¡å·**: æ—¢å­˜è¨­è¨ˆæ›¸ãƒ»è¦ä»¶å®šç¾©æ›¸ã«è©³ç´°è¨˜è¼‰
- ğŸŸ¡ **é»„ä¿¡å·**: æ—¢å­˜è¨­è¨ˆã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬
- ğŸ”´ **èµ¤ä¿¡å·**: Phaserå¯¾å¿œã®ãŸã‚ã®æ–°è¦è¿½åŠ 

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ ğŸ”´

### 1.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| TypeScript | 5.x | ãƒ¡ã‚¤ãƒ³è¨€èª |
| **Phaser** | 3.87+ | ã‚²ãƒ¼ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **rexUI Plugin** | æœ€æ–° | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã€ãƒœã‚¿ãƒ³ç­‰ï¼‰ |
| Vite | 5.x | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |

### 1.2 ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆæ—¢å­˜ç¶­æŒï¼‰

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| localStorage | ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
| JSON | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿å½¢å¼ |

### 1.3 æ–°è¦ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ğŸ”´

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” | å¿…é ˆ |
|-----------|------|------|
| phaser | ã‚²ãƒ¼ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | â—‹ |
| phaser3-rex-plugins | UIæ‹¡å¼µï¼ˆDialog, Buttons, Sizerç­‰ï¼‰ | â—‹ |

**è¨­è¨ˆæ–¹é‡**:
- æ—¢å­˜ã®Domain/Application/Infrastructureå±¤ã¯ãã®ã¾ã¾ç¶­æŒ
- Presentationå±¤ã®ã¿Phaserã«ç½®ãæ›ãˆ
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯Phaserã«ä¾å­˜ã—ãªã„

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ ğŸŸ¡

### 2.1 æ¡ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

- **Clean Architecture**: æ—¢å­˜4å±¤æ§‹é€ ã‚’ç¶­æŒï¼ˆè²¬å‹™åˆ†é›¢ï¼‰
- **Scene-based Architecture**: Phaserã®ã‚·ãƒ¼ãƒ³ç®¡ç†ã‚’æ´»ç”¨ ğŸ”´
- **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•è¨­è¨ˆ**: EventBusã«ã‚ˆã‚‹ç–çµåˆãªé€šä¿¡ï¼ˆæ—¢å­˜ç¶­æŒï¼‰
- **State Machine**: ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ã«çŠ¶æ…‹æ©Ÿæ¢°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ï¼ˆæ—¢å­˜ç¶­æŒï¼‰

### 2.2 é¸æŠç†ç”±

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|---------|------|
| Clean Architecture | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç‹¬ç«‹æ€§ç¢ºä¿ï¼ˆæ—¢å­˜ç¶­æŒï¼‰ |
| Scene-based | Phaserã®ç”»é¢ç®¡ç†ã¨ã®è¦ªå’Œæ€§ |
| ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹• | Phaser-Domainé–“ã®ç–çµåˆåŒ– |

---

## 3. ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€  ğŸ”´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Presentation Layer (Phaser)                 â”‚
â”‚  (Phaser Scenes, GameObjects, rexUI Components)             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚BootScene   â”‚ â”‚ TitleScene  â”‚ â”‚ MainScene   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ShopScene   â”‚ â”‚RankUpScene  â”‚ â”‚ResultScene  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚           UI Components (rexUI)              â”‚           â”‚
â”‚  â”‚  Dialog, Buttons, Sizer, ProgressBar, etc.  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Events / Method Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                        â”‚
â”‚  (æ—¢å­˜ç¶­æŒ: ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡, çŠ¶æ…‹ç®¡ç†, ã‚¤ãƒ™ãƒ³ãƒˆèª¿æ•´)          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚GameFlowMgr  â”‚ â”‚PhaseManager â”‚ â”‚ EventBus    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚StateManager â”‚ â”‚ UseCases    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Method Calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Domain Layer                           â”‚
â”‚  (æ—¢å­˜ç¶­æŒ: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯, ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹, ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£)   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ DeckService â”‚ â”‚GatheringSvc â”‚ â”‚ AlchemySvc  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  ï¼ˆãã®ä»–æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹ï¼‰                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“â†‘ Data Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Infrastructure Layer                      â”‚
â”‚  (æ—¢å­˜ç¶­æŒ: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹, å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº, ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚SaveDataRepo â”‚ â”‚MasterLoader â”‚ â”‚RandomGen    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.1 å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | è²¬å‹™ | å¤‰æ›´ç‚¹ |
|---------|------|--------|
| Presentation | UIè¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å—ä»˜ | **PhaseråŒ–** |
| Application | ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã€çŠ¶æ…‹ç®¡ç† | ç¶­æŒ |
| Domain | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ«ãƒ¼ãƒ«å®Ÿè£… | ç¶­æŒ |
| Infrastructure | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€å¤–éƒ¨é€£æº | ç¶­æŒ |

---

## 4. Phaser ã‚·ãƒ¼ãƒ³æ§‹æˆ ğŸ”´

### 4.1 ã‚·ãƒ¼ãƒ³ä¸€è¦§

| ã‚·ãƒ¼ãƒ³ã‚­ãƒ¼ | ã‚¯ãƒ©ã‚¹å | èª¬æ˜ | ä¾å­˜ã‚·ãƒ¼ãƒ³ |
|-----------|---------|------|-----------|
| `Boot` | BootScene | ã‚¢ã‚»ãƒƒãƒˆãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã€åˆæœŸåŒ– | - |
| `Title` | TitleScene | ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ | Boot |
| `Main` | MainScene | ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ | Title |
| `Shop` | ShopScene | ã‚·ãƒ§ãƒƒãƒ—ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰ | Main |
| `RankUp` | RankUpScene | æ˜‡æ ¼è©¦é¨“ | Main |
| `GameOver` | GameOverScene | ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ | Main |
| `GameClear` | GameClearScene | ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ç”»é¢ | Main |

### 4.2 ã‚·ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```typescript
class BaseGameScene extends Phaser.Scene {
  // Phaserãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
  init(data?: SceneData): void;      // ã‚·ãƒ¼ãƒ³åˆæœŸåŒ–
  preload(): void;                    // ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰
  create(data?: SceneData): void;     // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ
  update(time: number, delta: number): void; // æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°

  // è¿½åŠ ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¨ã®é€£æºï¼‰
  protected bindEvents(): void;       // EventBusè³¼èª­
  protected unbindEvents(): void;     // EventBusè³¼èª­è§£é™¤
}
```

### 4.3 ã‚·ãƒ¼ãƒ³é·ç§»å›³ ğŸ”µ

```mermaid
stateDiagram-v2
    [*] --> Boot: ã‚²ãƒ¼ãƒ èµ·å‹•

    Boot --> Title: ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰å®Œäº†

    Title --> Main: æ–°è¦ã‚²ãƒ¼ãƒ  / ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼

    Main --> Shop: ã‚·ãƒ§ãƒƒãƒ—é–‹ãï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰
    Shop --> Main: é–‰ã˜ã‚‹

    Main --> RankUp: æ˜‡æ ¼ã‚²ãƒ¼ã‚¸æº€ã‚¿ãƒ³
    RankUp --> Main: è©¦é¨“ã‚¯ãƒªã‚¢
    RankUp --> GameOver: è©¦é¨“å¤±æ•—

    Main --> GameOver: æ—¥æ•°åˆ‡ã‚Œ
    Main --> GameClear: Sãƒ©ãƒ³ã‚¯åˆ°é”

    GameOver --> Title: ã‚¿ã‚¤ãƒˆãƒ«ã¸
    GameClear --> Title: ã‚¿ã‚¤ãƒˆãƒ«ã¸
```

---

## 5. Phaser ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ•ã‚£ã‚° ğŸ”´

### 5.1 åŸºæœ¬è¨­å®š

```typescript
const gameConfig: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,           // WebGLå„ªå…ˆã€Canvas fallback
  parent: 'game-container',     // è¦ªè¦ç´ ID
  width: 1280,                  // ã‚²ãƒ¼ãƒ å¹…
  height: 720,                  // ã‚²ãƒ¼ãƒ é«˜ã•
  backgroundColor: '#F5F5DC',   // ãƒ™ãƒ¼ã‚¸ãƒ¥ï¼ˆç¾Šçš®ç´™é¢¨ï¼‰
  scale: {
    mode: Phaser.Scale.FIT,     // ç”»é¢ã«ãƒ•ã‚£ãƒƒãƒˆ
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
  scene: [
    BootScene,
    TitleScene,
    MainScene,
    ShopScene,
    RankUpScene,
    GameOverScene,
    GameClearScene,
  ],
  plugins: {
    scene: [
      {
        key: 'rexUI',
        plugin: UIPlugin,
        mapping: 'rexUI',
      },
    ],
  },
  dom: {
    createContainer: false,     // DOMè¦ç´ ã¯ä½¿ç”¨ã—ãªã„
  },
};
```

### 5.2 è§£åƒåº¦ã¨ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

| è¨­å®š | å€¤ | ç†ç”± |
|------|-----|------|
| åŸºæº–è§£åƒåº¦ | 1280 x 720 | 16:9ã®æ¨™æº–HD |
| ã‚¹ã‚±ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ‰ | FIT | ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒã§ãƒ•ã‚£ãƒƒãƒˆ |
| æœ€å°è§£åƒåº¦ | 960 x 540 | ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ |

---

## 6. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆï¼ˆrexUIï¼‰ğŸ”´

### 6.1 ä½¿ç”¨ã™ã‚‹rexUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç”¨é€” | å¯¾å¿œUI |
|--------------|------|--------|
| **Dialog** | ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° | ç¢ºèªã€å ±é…¬é¸æŠã€ä¾é ¼è©³ç´° |
| **Buttons** | ãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— | ãƒ•ã‚§ãƒ¼ã‚ºæ“ä½œã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ |
| **GridButtons** | ã‚°ãƒªãƒƒãƒ‰é…ç½®ãƒœã‚¿ãƒ³ | ã‚«ãƒ¼ãƒ‰é¸æŠã€ç´ æé¸æŠ |
| **Sizer** | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ¶å¾¡ | å…¨èˆ¬çš„ãªUIé…ç½® |
| **OverlapSizer** | é‡ã­åˆã‚ã›ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | ã‚«ãƒ¼ãƒ‰é‡ã­è¡¨ç¤º |
| **ProgressBar** | é€²æ—è¡¨ç¤º | æ˜‡æ ¼ã‚²ãƒ¼ã‚¸ã€æ—¥æ•°ãƒãƒ¼ |
| **Label** | ãƒ†ã‚­ã‚¹ãƒˆï¼‹ã‚¢ã‚¤ã‚³ãƒ³ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º |
| **ScrollablePanel** | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« | ä¾é ¼ä¸€è¦§ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª |
| **Toast** | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ç²å¾—é€šçŸ¥ã€è­¦å‘Š |

### 6.2 ã‚«ã‚¹ã‚¿ãƒ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç¶™æ‰¿å…ƒ | èª¬æ˜ |
|--------------|-------|------|
| CardView | Container | ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆæ¡å–åœ°/ãƒ¬ã‚·ãƒ”/å¼·åŒ–ï¼‰ |
| HandView | Container | æ‰‹æœ­è¡¨ç¤ºã‚¨ãƒªã‚¢ |
| MaterialOptionView | GridButtons | ãƒ‰ãƒ©ãƒ•ãƒˆæ¡å–ã®ç´ æé¸æŠ |
| QuestListView | ScrollablePanel | ä¾é ¼ä¸€è¦§ |
| InventoryView | ScrollablePanel | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª |
| RewardCardSelector | Dialog | å ±é…¬ã‚«ãƒ¼ãƒ‰é¸æŠ |

---

## 7. MainSceneã®ãƒ•ã‚§ãƒ¼ã‚ºUIæ§‹é€  ğŸ”´

### 7.1 ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥UIã‚³ãƒ³ãƒ†ãƒŠ

MainSceneã¯1ã¤ã®ã‚·ãƒ¼ãƒ³å†…ã§4ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºUIã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

```typescript
class MainScene extends Phaser.Scene {
  // ãƒ•ã‚§ãƒ¼ã‚ºUIã‚³ãƒ³ãƒ†ãƒŠ
  private questAcceptUI: QuestAcceptPhaseUI;
  private gatheringUI: GatheringPhaseUI;
  private alchemyUI: AlchemyPhaseUI;
  private deliveryUI: DeliveryPhaseUI;

  // å…±é€šUI
  private headerUI: HeaderUI;        // ãƒ©ãƒ³ã‚¯ã€æ—¥æ•°ã€ã‚´ãƒ¼ãƒ«ãƒ‰ç­‰
  private sidebarUI: SidebarUI;      // ä¾é ¼ä¸€è¦§ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª
  private phaseIndicator: PhaseIndicator;
  private handUI: HandUI;            // æ‰‹æœ­è¡¨ç¤º

  // ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º
  private currentPhaseUI: BasePhaseUI | null;
}
```

### 7.2 ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»

```mermaid
stateDiagram-v2
    [*] --> QuestAccept: æ—¥é–‹å§‹

    state "MainSceneå†…ã®ãƒ•ã‚§ãƒ¼ã‚ºUI" as Main {
        QuestAccept --> Gathering: å—æ³¨å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Gathering --> Alchemy: æ¡å–å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Alchemy --> Delivery: èª¿åˆå®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
        Delivery --> DayEnd: ç´å“å®Œäº†/ã‚¹ã‚­ãƒƒãƒ—
    }

    DayEnd --> QuestAccept: æ¬¡ã®æ—¥ã¸
    DayEnd --> [*]: æ—¥æ•°åˆ‡ã‚Œ/æ˜‡æ ¼è©¦é¨“
```

---

## 8. Phaser-Applicationå±¤é€£æº ğŸ”´

### 8.1 é€£æºãƒ‘ã‚¿ãƒ¼ãƒ³

```mermaid
sequenceDiagram
    participant Scene as Phaser Scene
    participant EventBus as EventBus
    participant UseCase as UseCase
    participant State as StateManager

    Note over Scene: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
    Scene->>UseCase: execute(params)
    UseCase->>State: update()
    State->>EventBus: publish(event)
    EventBus->>Scene: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
    Scene->>Scene: UIæ›´æ–°
```

### 8.2 ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ä¾‹

```typescript
class MainScene extends Phaser.Scene {
  private eventBus: IEventBus;

  create(): void {
    this.bindEvents();
  }

  private bindEvents(): void {
    // Applicationå±¤ã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­
    this.eventBus.subscribe('PHASE_CHANGED', this.onPhaseChanged.bind(this));
    this.eventBus.subscribe('QUEST_ACCEPTED', this.onQuestAccepted.bind(this));
    this.eventBus.subscribe('GATHERING_COMPLETED', this.onGatheringCompleted.bind(this));
    this.eventBus.subscribe('ITEM_CRAFTED', this.onItemCrafted.bind(this));
    this.eventBus.subscribe('QUEST_DELIVERED', this.onQuestDelivered.bind(this));
    this.eventBus.subscribe('STATE_UPDATED', this.onStateUpdated.bind(this));
  }

  shutdown(): void {
    this.unbindEvents();
  }

  private unbindEvents(): void {
    this.eventBus.unsubscribeAll();
  }
}
```

---

## 9. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ğŸ”´

```
src/
â”œâ”€â”€ index.html                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆHTML
â”œâ”€â”€ main.ts                    # Phaserã‚²ãƒ¼ãƒ åˆæœŸåŒ–
â”œâ”€â”€ game/                      # Phaseré–¢é€£ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ config.ts              # Phaserã‚³ãƒ³ãƒ•ã‚£ã‚°
â”‚   â”œâ”€â”€ scenes/
â”‚   â”‚   â”œâ”€â”€ BaseGameScene.ts   # åŸºåº•ã‚·ãƒ¼ãƒ³
â”‚   â”‚   â”œâ”€â”€ BootScene.ts       # èµ·å‹•ãƒ»ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ TitleScene.ts      # ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
â”‚   â”‚   â”œâ”€â”€ MainScene.ts       # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ ShopScene.ts       # ã‚·ãƒ§ãƒƒãƒ—ç”»é¢
â”‚   â”‚   â”œâ”€â”€ RankUpScene.ts     # æ˜‡æ ¼è©¦é¨“ç”»é¢
â”‚   â”‚   â”œâ”€â”€ GameOverScene.ts   # ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
â”‚   â”‚   â””â”€â”€ GameClearScene.ts  # ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ components/        # ã‚«ã‚¹ã‚¿ãƒ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ CardView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ HandView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ MaterialOptionView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestListView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ InventoryView.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ RewardCardSelector.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ phases/            # ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥UI
â”‚   â”‚   â”‚   â”œâ”€â”€ BasePhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestAcceptPhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ GatheringPhaseUI.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AlchemyPhaseUI.ts
â”‚   â”‚   â”‚   â””â”€â”€ DeliveryPhaseUI.ts
â”‚   â”‚   â””â”€â”€ common/            # å…±é€šUI
â”‚   â”‚       â”œâ”€â”€ HeaderUI.ts
â”‚   â”‚       â”œâ”€â”€ SidebarUI.ts
â”‚   â”‚       â”œâ”€â”€ PhaseIndicator.ts
â”‚   â”‚       â””â”€â”€ ActionButtons.ts
â”‚   â””â”€â”€ assets/                # ã‚¢ã‚»ãƒƒãƒˆç®¡ç†
â”‚       â”œâ”€â”€ AssetKeys.ts       # ã‚¢ã‚»ãƒƒãƒˆã‚­ãƒ¼å®šæ•°
â”‚       â””â”€â”€ AssetLoader.ts     # ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼
â”œâ”€â”€ application/               # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ GameFlowManager.ts
â”‚   â”œâ”€â”€ StateManager.ts
â”‚   â””â”€â”€ ...UseCases
â”œâ”€â”€ domain/                    # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ entities/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ infrastructure/            # æ—¢å­˜ç¶­æŒ
â”‚   â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ loaders/
â”‚   â””â”€â”€ ...
â””â”€â”€ data/                      # æ—¢å­˜ç¶­æŒ
    â””â”€â”€ master/
```

---

## 10. ã‚¢ã‚»ãƒƒãƒˆç®¡ç† ğŸ”´

### 10.1 ã‚¢ã‚»ãƒƒãƒˆã‚«ãƒ†ã‚´ãƒª

| ã‚«ãƒ†ã‚´ãƒª | å½¢å¼ | ç”¨é€” |
|---------|------|------|
| **UI** | PNG, SVG | ãƒœã‚¿ãƒ³ã€ãƒ‘ãƒãƒ«ã€ã‚¢ã‚¤ã‚³ãƒ³ |
| **Cards** | PNG | ã‚«ãƒ¼ãƒ‰ç”»åƒ |
| **Characters** | PNGï¼ˆã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‚·ãƒ¼ãƒˆï¼‰ | ä¾é ¼è€…ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ |
| **Backgrounds** | PNG | èƒŒæ™¯ç”»åƒ |
| **SFX** | MP3, OGG | åŠ¹æœéŸ³ |
| **BGM** | MP3, OGG | èƒŒæ™¯éŸ³æ¥½ |

### 10.2 ã‚¢ã‚»ãƒƒãƒˆãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥

```typescript
class BootScene extends Phaser.Scene {
  preload(): void {
    // é€²æ—ãƒãƒ¼è¡¨ç¤º
    this.createProgressBar();

    // å…±é€šUIã‚¢ã‚»ãƒƒãƒˆ
    this.load.image('btn-primary', 'assets/ui/btn-primary.png');
    this.load.image('btn-secondary', 'assets/ui/btn-secondary.png');
    this.load.image('panel-bg', 'assets/ui/panel-bg.png');
    this.load.image('card-frame', 'assets/ui/card-frame.png');

    // ã‚«ãƒ¼ãƒ‰ã‚¢ã‚»ãƒƒãƒˆ
    this.load.atlas('cards', 'assets/cards/cards.png', 'assets/cards/cards.json');

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
    this.load.atlas('characters', 'assets/characters/characters.png', 'assets/characters/characters.json');

    // åŠ¹æœéŸ³
    this.load.audio('sfx-click', ['assets/sfx/click.mp3', 'assets/sfx/click.ogg']);
    this.load.audio('sfx-success', ['assets/sfx/success.mp3', 'assets/sfx/success.ogg']);

    // BGM
    this.load.audio('bgm-title', ['assets/bgm/title.mp3', 'assets/bgm/title.ogg']);
    this.load.audio('bgm-main', ['assets/bgm/main.mp3', 'assets/bgm/main.ogg']);
  }
}
```

---

## 11. ç§»è¡Œè¨ˆç”» ğŸ”´

### 11.1 æ®µéšçš„ç§»è¡Œ

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | å„ªå…ˆåº¦ |
|---------|------|--------|
| Phase 1 | PhaseråŸºç›¤æ§‹ç¯‰ï¼ˆBoot, Titleï¼‰ | é«˜ |
| Phase 2 | MainSceneåŸºæœ¬UI | é«˜ |
| Phase 3 | å„ãƒ•ã‚§ãƒ¼ã‚ºUIå®Ÿè£… | é«˜ |
| Phase 4 | Shop/RankUp/Resultç”»é¢ | ä¸­ |
| Phase 5 | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ¼”å‡ºè¿½åŠ  | ä¸­ |
| Phase 6 | åŠ¹æœéŸ³ãƒ»BGMè¿½åŠ  | ä½ |

### 11.2 æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ´»ç”¨

| å±¤ | ç§»è¡Œæ–¹é‡ |
|-----|---------|
| Domain | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ |
| Application | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ |
| Infrastructure | å¤‰æ›´ãªã—ï¼ˆãã®ã¾ã¾åˆ©ç”¨ï¼‰ |
| Presentation | å®Œå…¨ç½®ãæ›ãˆï¼ˆPhaseråŒ–ï¼‰ |

---

## 12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é … ğŸ”´

### 12.1 æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

| é …ç›® | å¯¾ç­– |
|------|------|
| ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚¢ãƒˆãƒ©ã‚¹ | è¤‡æ•°ç”»åƒã‚’1æšã«ã¾ã¨ã‚ã‚‹ |
| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ« | é »ç¹ã«ç”Ÿæˆ/ç ´æ£„ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å†åˆ©ç”¨ |
| é…å»¶ãƒ­ãƒ¼ãƒ‰ | å¿…è¦æ™‚ã«ã‚¢ã‚»ãƒƒãƒˆã‚’èª­ã¿è¾¼ã‚€ |
| WebGLãƒãƒƒãƒãƒ³ã‚° | åŒä¸€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®æç”»ã‚’ã¾ã¨ã‚ã‚‹ |

### 12.2 ã‚¿ãƒ¼ã‚²ãƒƒãƒˆFPS

| ç’°å¢ƒ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆFPS |
|------|-------------|
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— | 60 FPS |
| ãƒ¢ãƒã‚¤ãƒ« | 30 FPS |

---

## é–¢é€£æ–‡æ›¸

- **æ—¢å­˜è¦ä»¶å®šç¾©æ›¸**: [../../spec/atelier-guild-rank-requirements.md](../../spec/atelier-guild-rank-requirements.md)
- **æ—¢å­˜ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸**: [../atelier-guild-rank/architecture.md](../atelier-guild-rank/architecture.md)
- **UIè¨­è¨ˆï¼ˆPhaserç‰ˆï¼‰**: [ui-design/overview.md](ui-design/overview.md)
- **ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ**: [core-systems.md](core-systems.md)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-07 | 1.0.0 | åˆç‰ˆä½œæˆã€‚Phaserã‚’ä½¿ç”¨ã—ãŸUIåˆ·æ–°ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã€‚ |
