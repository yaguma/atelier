# Atelier Guild Rank - Playwright Test Agents E2Eãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2026-01-19
**æœ€çµ‚æ›´æ–°**: 2026-01-19
**æ‹…å½“**: Development Team

---

## 1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: Atelier Guild Rankï¼ˆéŒ¬é‡‘è¡“å¸«ã‚®ãƒ«ãƒ‰ãƒ©ãƒ³ã‚¯åˆ¶ãƒ‡ãƒƒã‚­æ§‹ç¯‰RPGï¼‰
- **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Phaser 3.87+ / rexUI / TypeScript / Vite
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Clean Architectureï¼ˆ4å±¤æ§‹é€ ï¼‰
- **ç¾åœ¨ã®é€²æ—**: Phase 5ï¼ˆUIå¼·åŒ–ãƒ»ãƒãƒªãƒƒã‚·ãƒ¥ï¼‰å®Œäº†ã€Phase 4ï¼ˆçµ±åˆãƒ»ãƒ†ã‚¹ãƒˆï¼‰å®Œäº†

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¾çŠ¶
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: 60ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆDomain/Applicationå±¤ 90%+ï¼‰
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: 2ãƒ•ã‚¡ã‚¤ãƒ«
- **E2Eãƒ†ã‚¹ãƒˆ**: 2ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ17ã‚±ãƒ¼ã‚¹ã€å¤šæ•°ãŒæœªå®Ÿè£…æ©Ÿèƒ½ä¾å­˜ã§REDçŠ¶æ…‹ï¼‰
- **ç·ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%+ï¼ˆé”æˆæ¸ˆã¿ï¼‰

### è¨ˆç”»ã®ç›®çš„
Playwright Test Agentsã‚’æ´»ç”¨ã—ã¦ã€Phase 5ã§å®Ÿè£…ã•ã‚ŒãŸ7ã¤ã®UIå¼·åŒ–æ©Ÿèƒ½ã¨æ—¢å­˜ã®ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼å…¨ä½“ã‚’ç¶²ç¾…ã™ã‚‹åŒ…æ‹¬çš„ãªE2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’æ§‹ç¯‰ã—ã€é«˜å“è³ªãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’ä¿è¨¼ã™ã‚‹ã€‚

---

## 2. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 2.1 ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   E2E Tests     â”‚  â† ç›®æ¨™: 50-60ã‚±ãƒ¼ã‚¹ï¼ˆã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹é‡ç‚¹ï¼‰
        â”‚   (20-30%)      â”‚     ç¾çŠ¶: 17ã‚±ãƒ¼ã‚¹ï¼ˆå¤šæ•°REDï¼‰
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     ã‚®ãƒ£ãƒƒãƒ—: +33-43ã‚±ãƒ¼ã‚¹
              â–²
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚Integration Testsâ”‚  â† ç›®æ¨™: 20-30ã‚±ãƒ¼ã‚¹ï¼ˆã‚µãƒ¼ãƒ“ã‚¹é€£æºï¼‰
        â”‚   (30-40%)      â”‚     ç¾çŠ¶: 2ãƒ•ã‚¡ã‚¤ãƒ«
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     ã‚®ãƒ£ãƒƒãƒ—: +18-28ã‚±ãƒ¼ã‚¹
              â–²
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Unit Tests     â”‚  â† ç›®æ¨™: 100-150ã‚±ãƒ¼ã‚¹ï¼ˆDomain/Applicationå±¤ï¼‰
        â”‚   (40-50%)      â”‚     ç¾çŠ¶: 60ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè‰¯å¥½ï¼‰
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     çŠ¶æ…‹: âœ… ç›®æ¨™é”æˆ
```

### 2.2 ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ç¾åœ¨ | ç›®æ¨™ | å„ªå…ˆåº¦ | æˆ¦ç•¥ |
|---------|------|------|--------|------|
| **E2E** | 17ã‚±ãƒ¼ã‚¹ï¼ˆå¤šæ•°REDï¼‰ | 50-60ã‚±ãƒ¼ã‚¹ï¼ˆå…¨GREENï¼‰ | ğŸ”´ æœ€å„ªå…ˆ | Playwright Test Agentsæ´»ç”¨ |
| **çµ±åˆ** | 2ãƒ•ã‚¡ã‚¤ãƒ« | 20-30ã‚±ãƒ¼ã‚¹ | ğŸŸ¡ ä¸­å„ªå…ˆ | ã‚µãƒ¼ãƒ“ã‚¹é€£æºãƒ†ã‚¹ãƒˆè¿½åŠ  |
| **å˜ä½“** | 60ãƒ•ã‚¡ã‚¤ãƒ« | ç¶­æŒ | ğŸŸ¢ ç¶­æŒ | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ™‚ã®æ›´æ–° |

### 2.3 CI/CDçµ±åˆæˆ¦ç•¥

```yaml
# .github/workflows/e2e-tests.ymlï¼ˆæ—¢å­˜ã‚ã‚Šï¼‰
name: E2E Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  e2e:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        browser: [chromium, firefox, webkit]  # â† ãƒãƒ«ãƒãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - name: Install Playwright
        run: pnpm exec playwright install --with-deps
      - name: Run E2E Tests
        run: pnpm test:e2e --project=${{ matrix.browser }}
      - name: Upload Playwright Report
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: playwright-report-${{ matrix.browser }}
          path: playwright-report/
```

**æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ**:
- ãƒãƒ«ãƒãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆï¼ˆChromiumã€Firefoxã€WebKitï¼‰
- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆPlaywright Screenshotsï¼‰
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆLighthouse CIçµ±åˆï¼‰
- å¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆè¨­å®šæ¸ˆã¿: CIç’°å¢ƒã§2å›ãƒªãƒˆãƒ©ã‚¤ï¼‰

---

## 3. E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆè¨­è¨ˆ

### 3.1 ãƒ†ã‚¹ãƒˆåˆ†é¡ã¨å„ªå…ˆé †ä½

| ã‚«ãƒ†ã‚´ãƒª | å„ªå…ˆåº¦ | ã‚±ãƒ¼ã‚¹æ•° | ç¾çŠ¶ | ç›®æ¨™ | èª¬æ˜ |
|---------|--------|---------|------|------|------|
| **ã‚·ãƒ¼ãƒ³é·ç§»** | P0 | 8 | 8 | 8 | Bootâ†’Titleâ†’Mainâ†’Result |
| **ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼** | P0 | 9 | 9ï¼ˆå¤šæ•°REDï¼‰ | 15 | æ–°è¦ã‚²ãƒ¼ãƒ ã€ã‚¯ãƒªã‚¢ã€ã‚ªãƒ¼ãƒãƒ¼ |
| **Phase 5 UIå¼·åŒ–** | P1 | 0 | 0 | 14 | 7æ©Ÿèƒ½Ã—2ã‚±ãƒ¼ã‚¹ |
| **ä¾é ¼å—æ³¨ãƒ•ãƒ­ãƒ¼** | P1 | 0 | 0 | 6 | å—æ³¨â†’è¡¨ç¤ºâ†’ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| **æ¡å–ãƒ•ãƒ­ãƒ¼** | P1 | 0 | 0 | 8 | ãƒ‰ãƒ©ãƒ•ãƒˆâ†’å“è³ªâ†’åœ¨åº« |
| **èª¿åˆãƒ•ãƒ­ãƒ¼** | P1 | 0 | 0 | 6 | ç´ æé¸æŠâ†’èª¿åˆâ†’å“è³ª |
| **ç´å“ãƒ•ãƒ­ãƒ¼** | P1 | 0 | 0 | 5 | ä¾é ¼é¸æŠâ†’ç´å“â†’å ±é…¬ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | P2 | 0 | 0 | 4 | ç„¡åŠ¹æ“ä½œã€å¢ƒç•Œå€¤ |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** | P2 | 0 | 0 | 3 | èª­ã¿è¾¼ã¿æ™‚é–“ã€FPS |
| **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£** | P3 | 0 | 0 | 3 | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã€ARIA |

**åˆè¨ˆ**: 17 â†’ **60ã‚±ãƒ¼ã‚¹**ï¼ˆ+43ã‚±ãƒ¼ã‚¹ï¼‰

### 3.2 æ—¢å­˜ãƒ†ã‚¹ãƒˆã®æ”¹å–„ç‚¹

#### boot.spec.tsï¼ˆ8ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… **è‰¯ã„ç‚¹**: ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆã€rexUIãƒ†ã‚¹ãƒˆå……å®Ÿ
- ğŸŸ¡ **æ”¹å–„ç‚¹**:
  - TitleSceneé·ç§»ãƒ†ã‚¹ãƒˆï¼ˆL77ï¼‰ãŒå¤±æ•— â†’ TitleSceneã¯å®Ÿè£…æ¸ˆã¿ãªã®ã§ä¿®æ­£å¯èƒ½
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã®æœ€é©åŒ–ï¼ˆ5ç§’â†’3ç§’ï¼‰

#### game-flow.spec.tsï¼ˆ9ã‚±ãƒ¼ã‚¹ï¼‰
- ğŸ”´ **å•é¡Œç‚¹**: å¤šæ•°ã®ãƒ†ã‚¹ãƒˆãŒREDçŠ¶æ…‹ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«æœªå®Ÿè£…ã«ä¾å­˜ï¼‰
- âœ… **è‰¯ã„ç‚¹**: ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«å®Ÿè£…æ¸ˆã¿ï¼ˆ`src/shared/utils/debug.ts`ï¼‰
- ğŸŸ¡ **æ”¹å–„ç‚¹**:
  1. ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã®Page Objecté€£æºç¢ºèª
  2. MainSceneãŒä»®å®Ÿè£…ã®ãŸã‚ã€å®Ÿè£…ã«åˆã‚ã›ã¦ãƒ†ã‚¹ãƒˆä¿®æ­£
  3. ResultPageï¼ˆGameClearScene/GameOverSceneï¼‰ã®å®Ÿè£…ç¢ºèª

### 3.3 Page Objectsæ‹¡å¼µè¨ˆç”»

#### æ—¢å­˜Page Objects
- âœ… `BasePage`: åŸºæœ¬æ©Ÿèƒ½ï¼ˆã‚­ãƒ£ãƒ³ãƒã‚¹å¾…æ©Ÿã€ãƒ‡ãƒãƒƒã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼‰
- âœ… `GamePage`: æ±ç”¨ã‚²ãƒ¼ãƒ ãƒšãƒ¼ã‚¸æ“ä½œ
- âœ… `TitlePage`: ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢æ“ä½œ
- âœ… `MainPage`: ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢æ“ä½œï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«é€£æºï¼‰
- âœ… `ResultPage`: ãƒªã‚¶ãƒ«ãƒˆç”»é¢æ“ä½œ

#### æ–°è¦Page Objectsï¼ˆå„ªå…ˆåº¦é †ï¼‰

**1. QuestPage (P1) - ä¾é ¼å—æ³¨ãƒ•ã‚§ãƒ¼ã‚º**
```typescript
export class QuestPage extends BasePage {
  async selectQuest(questId: string): Promise<void>;
  async openQuestDetail(questId: string): Promise<void>;
  async acceptQuest(): Promise<void>;
  async closeQuestDetail(): Promise<void>;
  async getAvailableQuests(): Promise<string[]>;
  async isQuestAccepted(questId: string): Promise<boolean>;
}
```

**2. GatheringPage (P1) - æ¡å–ãƒ•ã‚§ãƒ¼ã‚º**
```typescript
export class GatheringPage extends BasePage {
  async selectDraftCard(index: number): Promise<void>;
  async skipDraftPick(): Promise<void>;
  async getDraftCardQuality(index: number): Promise<string>;
  async getRemainingPicks(): Promise<number>;
  async endGatheringPhase(): Promise<void>;
}
```

**3. AlchemyPage (P1) - èª¿åˆãƒ•ã‚§ãƒ¼ã‚º**
```typescript
export class AlchemyPage extends BasePage {
  async selectMaterial(slotIndex: number, materialId: string): Promise<void>;
  async synthesize(): Promise<void>;
  async getRecipeList(): Promise<string[]>;
  async getMaterialQuality(slotIndex: number): Promise<string>;
  async getResultQuality(): Promise<string>;
}
```

**4. DeliveryPage (P1) - ç´å“ãƒ•ã‚§ãƒ¼ã‚º**
```typescript
export class DeliveryPage extends BasePage {
  async selectQuestForDelivery(questId: string): Promise<void>;
  async selectItemForDelivery(itemId: string): Promise<void>;
  async deliverItem(): Promise<void>;
  async getReward(): Promise<{ gold: number; contribution: number }>;
  async isQuestCompletable(questId: string): Promise<boolean>;
}
```

**5. ShopPage (P2) - ã‚·ãƒ§ãƒƒãƒ—**
```typescript
export class ShopPage extends BasePage {
  async buyCard(cardId: string): Promise<void>;
  async buyItem(itemId: string): Promise<void>;
  async getAvailableCards(): Promise<string[]>;
  async getCardPrice(cardId: string): Promise<number>;
}
```

**6. UIComponentPage (P1) - Phase 5 UIå¼·åŒ–æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆç”¨**
```typescript
export class UIComponentPage extends BasePage {
  // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
  async dragCardToSlot(cardIndex: number, slotIndex: number): Promise<void>;
  async isDragEnabled(): Promise<boolean>;

  // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—
  async hoverElement(selector: string): Promise<void>;
  async isTooltipVisible(): Promise<boolean>;
  async getTooltipText(): Promise<string>;

  // ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿
  async toggleSidebar(): Promise<void>;
  async isSidebarCollapsed(): Promise<boolean>;

  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ¤œè¨¼
  async waitForFadeIn(): Promise<void>;
  async waitForFadeOut(): Promise<void>;
}
```

---

## 4. Playwright Test Agentsæ´»ç”¨æˆ¦ç•¥

### 4.1 Playwright Test Agentsã¨ã¯

Playwright Test Agentsã¯ã€AIã‚’æ´»ç”¨ã—ã¦E2Eãƒ†ã‚¹ãƒˆã®ä½œæˆã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã€å®Ÿè¡Œã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯ä»¥ä¸‹ã®æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¾ã™:

### 4.2 AIãƒ†ã‚¹ãƒˆç”Ÿæˆæˆ¦ç•¥

#### ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆå„ªå…ˆåº¦: P0ï¼‰
```bash
# 1. Claude Codeã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”Ÿæˆ
# - æ—¢å­˜Page Objectsã‚’å‚ç…§
# - è¨­è¨ˆæ–‡æ›¸ï¼ˆui-design/screens/*.mdï¼‰ã‚’å‚ç…§
# - æ—¢å­˜ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆboot.spec.ts, game-flow.spec.tsï¼‰ã‚’æ¨¡å€£

# ç”Ÿæˆå¯¾è±¡:
- phase5-ui-enhancements.spec.ts  # Phase 5 UIå¼·åŒ–æ©Ÿèƒ½ï¼ˆ14ã‚±ãƒ¼ã‚¹ï¼‰
- quest-flow.spec.ts              # ä¾é ¼å—æ³¨ãƒ•ãƒ­ãƒ¼ï¼ˆ6ã‚±ãƒ¼ã‚¹ï¼‰
- gathering-flow.spec.ts          # æ¡å–ãƒ•ãƒ­ãƒ¼ï¼ˆ8ã‚±ãƒ¼ã‚¹ï¼‰
- alchemy-flow.spec.ts            # èª¿åˆãƒ•ãƒ­ãƒ¼ï¼ˆ6ã‚±ãƒ¼ã‚¹ï¼‰
- delivery-flow.spec.ts           # ç´å“ãƒ•ãƒ­ãƒ¼ï¼ˆ5ã‚±ãƒ¼ã‚¹ï¼‰
```

#### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆç”Ÿæˆï¼ˆå„ªå…ˆåº¦: P1ï¼‰
```typescript
// visual-regression.spec.ts
test('VISUAL-001: TitleSceneã®å¤–è¦³ãŒå¤‰ã‚ã£ã¦ã„ãªã„', async ({ gamePage }) => {
  const title = new TitlePage(gamePage);
  await title.waitForTitleLoad();

  // Playwrightã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒæ©Ÿèƒ½
  await expect(gamePage).toHaveScreenshot('title-scene.png', {
    maxDiffPixels: 100, // è¨±å®¹å·®åˆ†100ãƒ”ã‚¯ã‚»ãƒ«
  });
});

// Phase 5 UIå¼·åŒ–æ©Ÿèƒ½ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆ
test('VISUAL-002: ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®å¤–è¦³', async ({ gamePage }) => {
  const title = new TitlePage(gamePage);
  await title.waitForTitleLoad();

  // ãƒœã‚¿ãƒ³ã«ãƒ›ãƒãƒ¼
  await gamePage.locator('button:has-text("æ–°è¦ã‚²ãƒ¼ãƒ ")').hover();
  await gamePage.waitForTimeout(200); // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾…æ©Ÿ

  await expect(gamePage).toHaveScreenshot('button-hover-effect.png');
});
```

#### ãƒ•ã‚§ãƒ¼ã‚º3: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ã‚¹ãƒˆï¼ˆå„ªå…ˆåº¦: P2ï¼‰
```typescript
// Playwright Codegenã‚’ä½¿ã£ãŸè¨˜éŒ²å‹ãƒ†ã‚¹ãƒˆç”Ÿæˆ
// $ pnpm exec playwright codegen http://localhost:3000

// ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’Page Objectsã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
// æ‰‹å‹•æ“ä½œ â†’ è¨˜éŒ² â†’ AIæ”¯æ´ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
```

### 4.3 ãƒ†ã‚¹ãƒˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®è‡ªå‹•åŒ–

#### è‡ªå‹•ä¿®å¾©æˆ¦ç•¥
```typescript
// test-utils/auto-retry.ts
import { test as base } from '@playwright/test';

export const test = base.extend({
  page: async ({ page }, use) => {
    // ã‚»ãƒ¬ã‚¯ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤
    page.setDefaultTimeout(5000);

    // ã‚¨ãƒ©ãƒ¼æ™‚ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆè‡ªå‹•ä¿å­˜
    page.on('pageerror', async (error) => {
      await page.screenshot({
        path: `test-results/error-${Date.now()}.png`,
      });
      console.error('Page error:', error);
    });

    await use(page);
  },
});
```

#### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†
```typescript
// e2e/fixtures/test-data.ts
export const TEST_SCENARIOS = {
  // æ–°è¦ã‚²ãƒ¼ãƒ é–‹å§‹ã‚·ãƒŠãƒªã‚ª
  newGame: {
    initialState: {
      rank: 'G',
      gold: 100,
      days: 30,
      actionPoints: 3,
    },
  },

  // Sãƒ©ãƒ³ã‚¯åˆ°é”ã‚·ãƒŠãƒªã‚ª
  gameClearing: {
    initialState: {
      rank: 'A',
      gold: 10000,
      days: 5,
      contribution: 9500, // Sãƒ©ãƒ³ã‚¯æ˜‡æ ¼ç›´å‰
    },
  },

  // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒŠãƒªã‚ª
  gameOver: {
    initialState: {
      rank: 'G',
      gold: 0,
      days: 1,
      contribution: 0,
    },
  },
};

// ä½¿ç”¨ä¾‹
test('TC-FLOW-001: æ–°è¦ã‚²ãƒ¼ãƒ é–‹å§‹', async ({ gamePage }) => {
  const main = new MainPage(gamePage);

  // ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚·ãƒŠãƒªã‚ªã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  await main.setScenario(TEST_SCENARIOS.newGame);

  // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
  const rank = await main.getCurrentRank();
  expect(rank).toBe('G');
});
```

---

## 5. Phase 5 UIå¼·åŒ–æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### 5.1 å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ä¸€è¦§

| ã‚¿ã‚¹ã‚¯ID | æ©Ÿèƒ½å | çŠ¶æ…‹ | E2Eãƒ†ã‚¹ãƒˆ | å„ªå…ˆåº¦ |
|---------|--------|------|-----------|--------|
| TASK-0038 | ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |
| TASK-0039 | ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¼·åŒ– | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |
| TASK-0040 | ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |
| TASK-0041 | ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ  | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |
| TASK-0042 | ã‚«ãƒ¼ãƒ‰ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P0 |
| TASK-0043 | ä¾é ¼è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ»å—æ³¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |
| TASK-0044 | å“è³ªã«å¿œã˜ãŸè¦–è¦šåŠ¹æœ | âœ…å®Œäº† | â¬œæœªå®Ÿè£… | P1 |

### 5.2 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¾‹

è©³ç´°ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š
- TASK-0038: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰
- TASK-0039: ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰
- TASK-0040: ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿ï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰
- TASK-0041: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰
- TASK-0042: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰ â˜…æœ€å„ªå…ˆ
- TASK-0043: ä¾é ¼è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰
- TASK-0044: å“è³ªè¦–è¦šåŠ¹æœï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰

---

## 6. ãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: åŸºæœ¬ã‚·ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆå¼·åŒ–ï¼ˆ1é€±é–“ï¼‰

**ç›®æ¨™**: æ—¢å­˜ãƒ†ã‚¹ãƒˆã®ä¿®æ­£ã¨ã‚·ãƒ¼ãƒ³é·ç§»ã®å®‰å®šåŒ–

| ã‚¿ã‚¹ã‚¯ | å·¥æ•° | æ‹…å½“ | èª¬æ˜ |
|--------|------|------|------|
| æ—¢å­˜ãƒ†ã‚¹ãƒˆä¿®æ­£ | 4h | Dev | boot.spec.ts, game-flow.spec.tsã®REDçŠ¶æ…‹ã‚’è§£æ¶ˆ |
| BasePageæ‹¡å¼µ | 2h | Dev | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾…æ©Ÿã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ– |
| ã‚·ãƒ¼ãƒ³é·ç§»ãƒ†ã‚¹ãƒˆè¿½åŠ  | 4h | Dev | å…¨ã‚·ãƒ¼ãƒ³é–“ã®é·ç§»ãƒ†ã‚¹ãƒˆï¼ˆ8ã‚±ãƒ¼ã‚¹ï¼‰ |
| CI/CDçµ±åˆç¢ºèª | 2h | DevOps | GitHub Actionså‹•ä½œç¢ºèªã€ãƒãƒ«ãƒãƒ–ãƒ©ã‚¦ã‚¶è¨­å®š |

**æˆæœç‰©**:
- âœ… æ—¢å­˜17ã‚±ãƒ¼ã‚¹å…¨ã¦GREEN
- âœ… CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®‰å®šåŒ–

### Phase 2: Phase 5 UIå¼·åŒ–æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆ2é€±é–“ï¼‰

**ç›®æ¨™**: 7ã¤ã®UIå¼·åŒ–æ©Ÿèƒ½ã®åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ

| ã‚¿ã‚¹ã‚¯ | å·¥æ•° | æ‹…å½“ | èª¬æ˜ |
|--------|------|------|------|
| UIComponentPageä½œæˆ | 4h | Dev | ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã€ã‚µã‚¤ãƒ‰ãƒãƒ¼æ“ä½œ |
| TASK-0042ãƒ†ã‚¹ãƒˆï¼ˆP0ï¼‰ | 6h | Dev | ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆ2ã‚±ãƒ¼ã‚¹ï¼‰ |
| TASK-0038/0039ãƒ†ã‚¹ãƒˆ | 6h | Dev | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆ4ã‚±ãƒ¼ã‚¹ï¼‰ |
| TASK-0040/0041ãƒ†ã‚¹ãƒˆ | 6h | Dev | ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆ4ã‚±ãƒ¼ã‚¹ï¼‰ |
| TASK-0043/0044ãƒ†ã‚¹ãƒˆ | 6h | Dev | ãƒ¢ãƒ¼ãƒ€ãƒ«ã€å“è³ªè¦–è¦šåŠ¹æœï¼ˆ4ã‚±ãƒ¼ã‚¹ï¼‰ |
| ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ | 8h | Dev | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒåŸºç›¤æ§‹ç¯‰ |

**æˆæœç‰©**:
- âœ… phase5-ui-enhancements.spec.tsï¼ˆ14ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆåŸºç›¤

### Phase 3: ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆ2é€±é–“ï¼‰

**ç›®æ¨™**: 4ãƒ•ã‚§ãƒ¼ã‚ºã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã®å®Œå…¨ãƒ†ã‚¹ãƒˆ

| ã‚¿ã‚¹ã‚¯ | å·¥æ•° | æ‹…å½“ | èª¬æ˜ |
|--------|------|------|------|
| QuestPageä½œæˆ | 4h | Dev | ä¾é ¼å—æ³¨æ“ä½œ |
| quest-flow.spec.ts | 6h | Dev | ä¾é ¼å—æ³¨ãƒ•ãƒ­ãƒ¼ï¼ˆ6ã‚±ãƒ¼ã‚¹ï¼‰ |
| GatheringPageä½œæˆ | 4h | Dev | æ¡å–ãƒ•ã‚§ãƒ¼ã‚ºæ“ä½œ |
| gathering-flow.spec.ts | 8h | Dev | æ¡å–ãƒ•ãƒ­ãƒ¼ï¼ˆ8ã‚±ãƒ¼ã‚¹ï¼‰ |
| AlchemyPageä½œæˆ | 4h | Dev | èª¿åˆãƒ•ã‚§ãƒ¼ã‚ºæ“ä½œ |
| alchemy-flow.spec.ts | 6h | Dev | èª¿åˆãƒ•ãƒ­ãƒ¼ï¼ˆ6ã‚±ãƒ¼ã‚¹ï¼‰ |
| DeliveryPageä½œæˆ | 4h | Dev | ç´å“ãƒ•ã‚§ãƒ¼ã‚ºæ“ä½œ |
| delivery-flow.spec.ts | 6h | Dev | ç´å“ãƒ•ãƒ­ãƒ¼ï¼ˆ5ã‚±ãƒ¼ã‚¹ï¼‰ |
| critical-path.spec.ts | 8h | Dev | ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ3ã‚±ãƒ¼ã‚¹ï¼‰ |

**æˆæœç‰©**:
- âœ… 4ã¤ã®æ–°è¦specãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ25ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… critical-path.spec.tsï¼ˆ3ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… 4ã¤ã®æ–°è¦Page Objects

### Phase 4: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ1é€±é–“ï¼‰

**ç›®æ¨™**: å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

| ã‚¿ã‚¹ã‚¯ | å·¥æ•° | æ‹…å½“ | èª¬æ˜ |
|--------|------|------|------|
| å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ | 6h | Dev | æ‰€æŒé‡‘0ã€æ—¥æ•°0ã€åœ¨åº«æº€æ¯ãªã© |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ | 6h | Dev | ç„¡åŠ¹æ“ä½œã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ | 6h | Dev | èª­ã¿è¾¼ã¿æ™‚é–“ã€FPSæ¸¬å®š |
| ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ | 6h | Dev | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã€ARIAå±æ€§ |

**æˆæœç‰©**:
- âœ… edge-cases.spec.tsï¼ˆ4ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… performance.spec.tsï¼ˆ3ã‚±ãƒ¼ã‚¹ï¼‰
- âœ… accessibility.spec.tsï¼ˆ3ã‚±ãƒ¼ã‚¹ï¼‰

### Phase 5: ç¶™ç¶šçš„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

**ç›®æ¨™**: ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®ç¶­æŒãƒ»æ”¹å–„

- é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼: ãƒ†ã‚¹ãƒˆå¤±æ•—ç‡ã€å®Ÿè¡Œæ™‚é–“
- æœˆæ¬¡æ”¹å–„: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸æ‹¡å¤§ã€ãƒ•ãƒ¬ãƒ¼ã‚­ãƒ¼ãƒ†ã‚¹ãƒˆä¿®æ­£
- å››åŠæœŸè©•ä¾¡: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥è¦‹ç›´ã—

---

## 7. ãƒªã‚½ãƒ¼ã‚¹è¦‹ç©ã‚‚ã‚Š

### 7.1 å·¥æ•°è¦‹ç©ã‚‚ã‚Š

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | å·¥æ•°ï¼ˆäººæ—¥ï¼‰ | å‚™è€ƒ |
|---------|------|------------|------|
| Phase 1: åŸºæœ¬ã‚·ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆå¼·åŒ– | 1é€±é–“ | 1.5æ—¥ | æ—¢å­˜ãƒ†ã‚¹ãƒˆä¿®æ­£ä¸­å¿ƒ |
| Phase 2: Phase 5 UIãƒ†ã‚¹ãƒˆ | 2é€±é–“ | 4.5æ—¥ | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé›†ä¸­ |
| Phase 3: ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ | 2é€±é–“ | 6.25æ—¥ | æœ€å¤§è¦æ¨¡ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ |
| Phase 4: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ | 1é€±é–“ | 3æ—¥ | å“è³ªä¿è¨¼ |
| **åˆè¨ˆ** | **6é€±é–“** | **15.25æ—¥** | ç´„3é€±é–“ã®é–‹ç™ºå·¥æ•° |

### 7.2 ãƒãƒ¼ãƒ æ§‹æˆæ¨å¥¨

- **E2Eãƒ†ã‚¹ãƒˆãƒªãƒ¼ãƒ‰**: 1åï¼ˆãƒ•ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºè€…**: 1-2åï¼ˆãƒ‘ãƒ¼ãƒˆã‚¿ã‚¤ãƒ ã€Page Objectså®Ÿè£…æ”¯æ´ï¼‰
- **QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢**: 1åï¼ˆãƒ‘ãƒ¼ãƒˆã‚¿ã‚¤ãƒ ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰

### 7.3 ãƒ„ãƒ¼ãƒ«ãƒ»ç’°å¢ƒã‚³ã‚¹ãƒˆ

| é …ç›® | ã‚³ã‚¹ãƒˆ | å‚™è€ƒ |
|------|--------|------|
| Playwright | ç„¡æ–™ | ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ |
| GitHub Actions | ç„¡æ–™/æœˆ | Public Repo |
| CI/CDå®Ÿè¡Œæ™‚é–“ | ç´„2000åˆ†/æœˆ | ç„¡æ–™æ å†… |
| **åˆè¨ˆ** | **$0/æœˆ** | ã‚³ã‚¹ãƒˆåŠ¹ç‡â— |

---

## 8. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 8.1 ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å“è³ª

```typescript
// âœ… è‰¯ã„ä¾‹: æ˜ç¢ºãªãƒ†ã‚¹ãƒˆæ§‹é€ 
test('TC-QUEST-001: ä¾é ¼ã‚’å—æ³¨ã§ãã‚‹', async ({ gamePage }) => {
  // Arrange: åˆæœŸçŠ¶æ…‹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  const quest = new QuestPage(gamePage);
  await quest.waitForQuestLoad();

  // Act: ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®æ“ä½œ
  const questId = (await quest.getAvailableQuests())[0];
  await quest.selectQuest(questId);
  await quest.acceptQuest();

  // Assert: çµæœã®æ¤œè¨¼
  expect(await quest.isQuestAccepted(questId)).toBe(true);
});

// âŒ æ‚ªã„ä¾‹: æ›–æ˜§ãªæ¤œè¨¼
test('ä¾é ¼ãƒ†ã‚¹ãƒˆ', async ({ gamePage }) => {
  // ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹ä¸æ˜ç¢º
  await gamePage.click('.quest-button');
  await gamePage.waitForTimeout(1000);
  // æ¤œè¨¼ãŒãªã„
});
```

### 8.2 Page Objectsãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// âœ… è‰¯ã„ä¾‹: è²¬å‹™ã®æ˜ç¢ºãªåˆ†é›¢
export class QuestPage extends BasePage {
  // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼: UIæ“ä½œã®è©³ç´°ã‚’éš è”½
  private async getQuestCard(questId: string) {
    return this.page.locator(`[data-quest-id="${questId}"]`);
  }

  // ãƒ‘ãƒ–ãƒªãƒƒã‚¯API: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¡¨ç¾
  async selectQuest(questId: string): Promise<void> {
    const card = await this.getQuestCard(questId);
    await card.click();
  }
}

// âŒ æ‚ªã„ä¾‹: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ã‚»ãƒ¬ã‚¯ã‚¿ãŒæ•£åœ¨
test('ä¾é ¼é¸æŠ', async ({ gamePage }) => {
  await gamePage.locator('[data-quest-id="quest-001"]').click(); // ã‚»ãƒ¬ã‚¯ã‚¿ç›´æ›¸ã
});
```

### 8.3 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†

```typescript
// âœ… è‰¯ã„ä¾‹: å†åˆ©ç”¨å¯èƒ½ãªãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
export const QUEST_FIXTURES = {
  easyQuest: {
    id: 'quest-001',
    title: 'è–¬è‰æ¡é›†',
    difficulty: 1,
    reward: 100,
  },
  hardQuest: {
    id: 'quest-100',
    title: 'ç«œé€€æ²»',
    difficulty: 10,
    reward: 10000,
  },
};

test('ç°¡å˜ãªä¾é ¼ã‚’å—æ³¨', async ({ gamePage }) => {
  const quest = new QuestPage(gamePage);
  await quest.acceptQuest(QUEST_FIXTURES.easyQuest.id);
  // ...
});

// âŒ æ‚ªã„ä¾‹: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
test('ä¾é ¼å—æ³¨', async ({ gamePage }) => {
  await quest.acceptQuest('quest-001'); // ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
});
```

### 8.4 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
// âœ… è‰¯ã„ä¾‹: è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
async selectQuest(questId: string): Promise<void> {
  const quests = await this.getAvailableQuests();

  if (!quests.includes(questId)) {
    throw new Error(
      `Quest ${questId} is not available. Available quests: ${quests.join(', ')}`
    );
  }

  await this.getQuestCard(questId).click();
}

// âŒ æ‚ªã„ä¾‹: æƒ…å ±ä¸è¶³ã®ã‚¨ãƒ©ãƒ¼
async selectQuest(questId: string): Promise<void> {
  await this.getQuestCard(questId).click(); // å­˜åœ¨ã—ãªã„å ´åˆã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
}
```

---

## 9. ãƒªã‚¹ã‚¯ã¨è»½æ¸›ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | ç™ºç”Ÿç¢ºç‡ | è»½æ¸›ç­– |
|--------|--------|---------|--------|
| MainSceneãŒä»®å®Ÿè£…ã§å¤šæ•°ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ | é«˜ | é«˜ | Phase 3ã§å®Ÿè£…å®Œäº†å¾Œã«ãƒ†ã‚¹ãƒˆä½œæˆ |
| ãƒ•ãƒ¬ãƒ¼ã‚­ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆä¸å®‰å®šãªãƒ†ã‚¹ãƒˆï¼‰ | ä¸­ | ä¸­ | ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã€é©åˆ‡ãªå¾…æ©Ÿæˆ¦ç•¥ |
| ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®å¢—åŠ  | ä¸­ | é«˜ | ä¸¦åˆ—å®Ÿè¡Œã€ãƒ†ã‚¹ãƒˆåˆ†å‰²ã€CIæœ€é©åŒ– |
| Phaserã‚²ãƒ¼ãƒ ã®è¦ç´ å–å¾—å›°é›£ | é«˜ | ä¸­ | ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«æ‹¡å¼µã€ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ |
| ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆã®å·®åˆ†èª¤æ¤œçŸ¥ | ä½ | ä¸­ | è¨±å®¹å·®åˆ†è¨­å®šã€ç’°å¢ƒçµ±ä¸€ |

---

## 10. æˆåŠŸæŒ‡æ¨™ï¼ˆKPIï¼‰

### 10.1 ã‚«ãƒãƒ¬ãƒƒã‚¸æŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|------|---------|
| E2Eãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•° | 17 | 60 | `pnpm test:e2e --list` |
| E2Eãƒ†ã‚¹ãƒˆæˆåŠŸç‡ | ~50%ï¼ˆREDå¤šæ•°ï¼‰ | 95%+ | CI/CDãƒ¬ãƒãƒ¼ãƒˆ |
| Page Objectsæ•° | 4 | 10 | ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã‚«ã‚¦ãƒ³ãƒˆ |
| ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã‚«ãƒãƒ¬ãƒƒã‚¸ | 30% | 100% | æ‰‹å‹•ãƒã‚§ãƒƒã‚¯ |
| ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ | 0 | 10+ | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ•° |

### 10.2 å“è³ªæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|---------|
| ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ | <10åˆ† | CI/CDå®Ÿè¡Œæ™‚é–“ |
| ãƒ•ãƒ¬ãƒ¼ã‚­ãƒ¼ãƒ†ã‚¹ãƒˆç‡ | <5% | å¤±æ•—/æˆåŠŸç‡ã®åˆ†æ•£ |
| ãƒã‚°æ¤œå‡ºç‡ | 80%+ | ãƒªãƒªãƒ¼ã‚¹å‰ã«æ¤œå‡ºã—ãŸãƒã‚°æ•° |
| ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³é˜²æ­¢ç‡ | 95%+ | æ—¢å­˜æ©Ÿèƒ½ã®ãƒã‚°å†ç™ºç‡ |

### 10.3 é–‹ç™ºåŠ¹ç‡æŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|---------|
| ãƒ†ã‚¹ãƒˆä½œæˆæ™‚é–“ | å¹³å‡2æ™‚é–“/spec | ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ„ãƒ¼ãƒ« |
| PRé€šéæ™‚é–“ | <30åˆ† | GitHub Actionså±¥æ­´ |
| ãƒ†ã‚¹ãƒˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å·¥æ•° | <10%ç·å·¥æ•° | æœˆæ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

---

## 11. ã¾ã¨ã‚ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### 11.1 è¨ˆç”»ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

1. **æ—¢å­˜ãƒ†ã‚¹ãƒˆä¿®æ­£**: 17ã‚±ãƒ¼ã‚¹å…¨ã¦ã‚’GREENçŠ¶æ…‹ã«ï¼ˆPhase 1ï¼‰
2. **Phase 5 UIå¼·åŒ–æ©Ÿèƒ½**: 7æ©Ÿèƒ½Ã—2ã‚±ãƒ¼ã‚¹ = 14ã‚±ãƒ¼ã‚¹è¿½åŠ ï¼ˆPhase 2ï¼‰
3. **ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼å®Œå…¨ãƒ†ã‚¹ãƒˆ**: ä¾é ¼å—æ³¨â†’æ¡å–â†’èª¿åˆâ†’ç´å“ï¼ˆ25ã‚±ãƒ¼ã‚¹ã€Phase 3ï¼‰
4. **ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ãƒ†ã‚¹ãƒˆ**: ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ï¼ˆ3ã‚±ãƒ¼ã‚¹ï¼‰
5. **ç·ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**: 17 â†’ **60ã‚±ãƒ¼ã‚¹**ï¼ˆ+43ã‚±ãƒ¼ã‚¹ã€+253%å¢—åŠ ï¼‰

### 11.2 å³åº§ã«å®Ÿè¡Œå¯èƒ½ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³

**ä»Šã™ãã§ãã‚‹ã“ã¨ï¼ˆWeek 1ï¼‰**:

1. **æ—¢å­˜ãƒ†ã‚¹ãƒˆã®ä¿®æ­£**
   - `boot.spec.ts` L77ã®TitleSceneé·ç§»ãƒ†ã‚¹ãƒˆä¿®æ­£
   - `game-flow.spec.ts`ã®ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«é€£æºç¢ºèª

2. **UIComponentPageå®Ÿè£…**
   - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ï¼ˆæœ€å„ªå…ˆ: TASK-0042ï¼‰
   - ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—æ¤œè¨¼ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 

3. **æœ€åˆã®Phase 5ãƒ†ã‚¹ãƒˆä½œæˆ**
   - `UI-0042-01: ã‚«ãƒ¼ãƒ‰ã®ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—`ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…
   - æˆåŠŸã—ãŸã‚‰CI/CDã«çµ±åˆ

### 11.3 é•·æœŸçš„ãªå±•æœ›

- **Q2 2026**: E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆå®Œæˆï¼ˆ60ã‚±ãƒ¼ã‚¹ï¼‰
- **Q3 2026**: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆæ‹¡å……
- **Q4 2026**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆè¿½åŠ 
- **2027+**: AIé§†å‹•ãƒ†ã‚¹ãƒˆï¼ˆPlaywright Test Agentsæ­£å¼ç‰ˆï¼‰å°å…¥

---

## 12. é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

ãƒ†ã‚¹ãƒˆè¨ˆç”»ã‚’å®Ÿè£…ã™ã‚‹ä¸Šã§æœ€ã‚‚é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«:

- `e2e/pages/base.page.ts` - å…¨Page Objectsã®åŸºåº•ã‚¯ãƒ©ã‚¹ã€‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾…æ©Ÿã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’å¼·åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- `e2e/fixtures/game.fixture.ts` - ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®æ‹¡å¼µã€‚ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãŒå¿…è¦
- `playwright.config.ts` - CI/CDè¨­å®šã®æœ€é©åŒ–ã€‚ãƒãƒ«ãƒãƒ–ãƒ©ã‚¦ã‚¶ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³è¨­å®šã®è¿½åŠ ãŒå¿…è¦
- `src/shared/utils/debug.ts` - ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã€‚E2Eãƒ†ã‚¹ãƒˆã§ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®æ‹¡å¼µãŒå¿…è¦
- `src/presentation/ui/components/DraggableCardUI.ts` - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å®Ÿè£…ã®ç¢ºèªã€‚E2Eãƒ†ã‚¹ãƒˆã§æœ€å„ªå…ˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|----------|---------|
| 2026-01-19 | 1.0.0 | åˆç‰ˆä½œæˆ - Playwright Test Agents E2Eãƒ†ã‚¹ãƒˆè¨ˆç”» |

---

## é–¢é€£æ–‡æ›¸

- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸**: [../design/atelier-guild-rank/architecture-overview.md](../design/atelier-guild-rank/architecture-overview.md)
- **UIè¨­è¨ˆæ¦‚è¦**: [../design/atelier-guild-rank/ui-design/overview.md](../design/atelier-guild-rank/ui-design/overview.md)
- **ã‚¿ã‚¹ã‚¯ä¸€è¦§**: [../tasks/atelier-guild-rank/overview.md](../tasks/atelier-guild-rank/overview.md)
- **TASK-0030ï¼ˆE2Eãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ï¼‰**: [../tasks/atelier-guild-rank/phase-4/TASK-0030.md](../tasks/atelier-guild-rank/phase-4/TASK-0030.md)
